(window.webpackJsonp=window.webpackJsonp||[]).push([[261],{573:function(t,a,s){"use strict";s.r(a);var e=s(27),r=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"bash"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bash"}},[t._v("#")]),t._v(" Bash")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.gnu.org/software/bash/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Bash"),a("OutboundLink")],1),t._v("（Bourne Again Shell）是一种广泛使用的 Linux 命令行解释器和脚本语言，提供强大的命令执行、脚本编写和系统管理功能，兼具交互式和编程式操作能力。")]),t._v(" "),a("h2",{attrs:{id:"一、命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、命令"}},[t._v("#")]),t._v(" 一、命令")]),t._v(" "),a("h3",{attrs:{id:"简单命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简单命令"}},[t._v("#")]),t._v(" 简单命令")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Simple-Commands.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Simple Commands"),a("OutboundLink")],1),t._v(" 是最常见的命令类型。它是一个由空格分隔的单词序列，由 Shell 的一个"),a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Definitions.html#index-control-operator",target:"_blank",rel:"noopener noreferrer"}},[t._v("控制操作符"),a("OutboundLink")],1),t._v("终止。第一个单词通常指定要执行的命令，其余单词是该命令的参数。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),t._v(" +"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'%Y-%m-%d %T'")]),t._v("\n")])])]),a("h4",{attrs:{id:"简单命令扩展"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简单命令扩展"}},[t._v("#")]),t._v(" 简单命令扩展")]),t._v(" "),a("p",[t._v("当执行一个"),a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Simple-Command-Expansion.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("简单命令"),a("OutboundLink")],1),t._v("时，Shell 从左到右按以下顺序执行以下扩展、赋值和重定向。")]),t._v(" "),a("ul",[a("li",[t._v("命令名之前的变量赋值将被保存，以供以后处理。")]),t._v(" "),a("li",[t._v("Shell Expansions。")]),t._v(" "),a("li",[t._v("命令名之前的变量赋值。")])]),t._v(" "),a("p",[t._v("变量将添加到执行命令的环境中，不会影响当前的 Shell 环境，即设置当前执行命令中的临时环境变量。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("v")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("var "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$v")]),t._v("\n")])])]),a("p",[t._v("由于命令替换的原因，"),a("code",[t._v("echo $v")]),t._v(" 的执行会在变量赋值之前发生，从而导致 "),a("code",[t._v("$v")]),t._v(" 的值在赋值时仍为空。")]),t._v(" "),a("p",[t._v("具体过程如下。")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("1、命令替换，$v 为空，命令结果为 echo。\n2、命令名之前的变量赋值，执行 v=var。\n3、执行命令结果，即执行 echo。\n")])])]),a("h4",{attrs:{id:"命令执行环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令执行环境"}},[t._v("#")]),t._v(" 命令执行环境")]),t._v(" "),a("p",[t._v("Shell 有一个"),a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Command-Execution-Environment.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("执行环境"),a("OutboundLink")],1),t._v("，它由以下部分组成：")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("当前工作目录")]),t._v("：使用命令 "),a("code",[t._v("cd")]),t._v("、"),a("code",[t._v("pushd")]),t._v(" 或 "),a("code",[t._v("popd")]),t._v(" 设置，或 Shell 启动时继承的目录。")]),t._v(" "),a("li",[a("strong",[t._v("文件创建模式掩码")]),t._v("：使用 "),a("code",[t._v("umask")]),t._v(" 命令设置，或从父进程继承。")]),t._v(" "),a("li",[a("strong",[t._v("当前信号捕获")]),t._v("：通过 "),a("code",[t._v("trap")]),t._v(" 命令设置。")]),t._v(" "),a("li",[a("strong",[t._v("Shell 参数")]),t._v("：通过变量赋值设置，或使用 "),a("code",[t._v("set")]),t._v(" 命令设置，或从父进程继承。")]),t._v(" "),a("li",[a("strong",[t._v("Shell 函数")]),t._v("：执行时定义的函数，或从父进程继承的函数。")]),t._v(" "),a("li",[a("strong",[t._v("启用的选项")]),t._v("：调用时默认启用或通过命令行参数指定，或使用 "),a("code",[t._v("set")]),t._v(" 命令启用。")]),t._v(" "),a("li",[a("strong",[t._v("Shell 别名")]),t._v("：使用 "),a("code",[t._v("alias")]),t._v(" 命令定义。")]),t._v(" "),a("li",[a("strong",[t._v("各类进程 ID")]),t._v("：包括后台作业的进程 ID、当前 Shell 的 PID 和父进程的 PID。")])]),t._v(" "),a("p",[t._v("当一个程序被调用时，它会获得一个名为 "),a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Environment.html",target:"_blank",rel:"noopener noreferrer"}},[a("em",[t._v("environment")]),a("OutboundLink")],1),t._v(" 的字符串数组。这是一个以 "),a("code",[t._v("name=value")]),t._v(" 形式表示的键值对列表。")]),t._v(" "),a("p",[t._v("下面这些赋值语句只影响该命令所看到的 Environment，不会影响当前的 Shell Environment。")]),t._v(" "),a("p",[t._v("例如，设置临时环境变量。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CITY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("Shanghai "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" CITY\n")])])]),a("p",[t._v("例如，输出指定时区的日期。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("TZ")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("':Asia/Tokyo'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),t._v(" +"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'%Y-%m-%d %T'")]),t._v("\n")])])]),a("p",[t._v("当要执行除内置函数或 Shell 函数之外的简单命令时，会在由以下内容组成的单独执行环境中调用该命令。")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("标记为 "),a("code",[t._v("export")]),t._v(" 的 Shell 变量和函数。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CITY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("Shanghai"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" CITY\n")])])])])]),t._v(" "),a("h3",{attrs:{id:"复合命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#复合命令"}},[t._v("#")]),t._v(" 复合命令")]),t._v(" "),a("p",[t._v("在 Shell 编程中，"),a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Compound-Commands.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("复合命令"),a("OutboundLink")],1),t._v("是由"),a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Definitions.html#index-reserved-word",target:"_blank",rel:"noopener noreferrer"}},[t._v("保留字"),a("OutboundLink")],1),t._v("或"),a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Definitions.html#index-control-operator",target:"_blank",rel:"noopener noreferrer"}},[t._v("控制操作符"),a("OutboundLink")],1),t._v("定义的语言结构。每个复合命令结构以一个保留字或控制操作符开始，并由对应的保留字或操作符结束。")]),t._v(" "),a("p",[t._v("此外，任何与复合命令关联的"),a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Redirections.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("重定向"),a("OutboundLink")],1),t._v("会应用于该复合命令中的所有子命令，除非这些重定向被显式覆盖。")]),t._v(" "),a("p",[t._v("常见的复合命令包括：")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Looping-Constructs.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("循环结构"),a("OutboundLink")],1),t._v("：如 "),a("code",[t._v("for")]),t._v("、"),a("code",[t._v("while")]),t._v("、"),a("code",[t._v("until")]),t._v(" 等。")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Conditional-Constructs.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("条件结构"),a("OutboundLink")],1),t._v("：如 "),a("code",[t._v("if")]),t._v(" 和 "),a("code",[t._v("case")]),t._v("。")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Command-Grouping.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("分组命令"),a("OutboundLink")],1),t._v("：使用 "),a("code",[t._v("{}")]),t._v(" 或 "),a("code",[t._v("()")]),t._v(" 进行命令分组。")])]),t._v(" "),a("p",[t._v("这些结构允许在 Shell 脚本中实现复杂的逻辑控制和命令流管理。")]),t._v(" "),a("h4",{attrs:{id:"条件构造"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#条件构造"}},[t._v("#")]),t._v(" 条件构造")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Conditional-Constructs.html#index-if",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("if")]),a("OutboundLink")],1),t._v(" 命令的语法如下。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" test-commands"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n  consequent-commands"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n")])])]),a("h5",{attrs:{id:"测试命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试命令"}},[t._v("#")]),t._v(" 测试命令")]),t._v(" "),a("p",[t._v("在 Bash 中，"),a("code",[t._v("[]")]),t._v(" 用于 "),a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Bourne-Shell-Builtins.html#index-test",target:"_blank",rel:"noopener noreferrer"}},[a("em",[t._v("test")]),a("OutboundLink")],1),t._v(" 条件。它是 "),a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Bourne-Shell-Builtins.html#index-test",target:"_blank",rel:"noopener noreferrer"}},[a("em",[t._v("test")]),a("OutboundLink")],1),t._v(" 表达式的一种方法，也被称为 "),a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Bourne-Shell-Builtins.html#index-test",target:"_blank",rel:"noopener noreferrer"}},[a("em",[t._v("test")]),a("OutboundLink")],1),t._v(" 命令。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-z")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${MINIO_VOLUMES}")]),t._v('"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Variable MINIO_VOLUMES not set in /etc/default/minio'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n")])])]),a("h5",{attrs:{id:"条件表达式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#条件表达式"}},[t._v("#")]),t._v(" 条件表达式")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Bash-Conditional-Expressions.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("条件表达式"),a("OutboundLink")],1),t._v("由 "),a("code",[t._v("[[")]),t._v(" "),a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Conditional-Constructs.html#index-_005b_005b",target:"_blank",rel:"noopener noreferrer"}},[t._v("命令"),a("OutboundLink")],1),t._v("和 "),a("code",[t._v("[")]),t._v(" "),a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Bourne-Shell-Builtins.html#index-test",target:"_blank",rel:"noopener noreferrer"}},[t._v("命令"),a("OutboundLink")],1),t._v("使用。")]),t._v(" "),a("ul",[a("li",[t._v("-"),a("strong",[t._v("z")]),t._v(" "),a("em",[t._v("string")]),t._v("：如果字符串的长度为零，则为 True。")]),t._v(" "),a("li",[t._v("-"),a("strong",[t._v("n")]),t._v(" "),a("em",[t._v("string")]),t._v("：如果字符串的长度非零，则为 True。")])]),t._v(" "),a("h2",{attrs:{id:"二、扩展"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、扩展"}},[t._v("#")]),t._v(" 二、扩展")]),t._v(" "),a("p",[t._v("在 Shell 中，"),a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Shell-Expansions.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Expansions"),a("OutboundLink")],1),t._v(" 是指 Shell 在执行命令之前，对输入命令中的某些特定模式或符号进行替换或处理的过程。")]),t._v(" "),a("p",[t._v("常见的 Shell 扩展包括：")]),t._v(" "),a("ul",[a("li",[t._v("大括号扩展（Brace Expansion）")]),t._v(" "),a("li",[t._v("波浪号扩展（Tilde Expansion）")]),t._v(" "),a("li",[t._v("参数和变量扩展（Parameter and Variable Expansion）")]),t._v(" "),a("li",[t._v("命令替换（Command Substitution）")]),t._v(" "),a("li",[t._v("算术扩展（Arithmetic Expansion）")]),t._v(" "),a("li",[t._v("单词分割（Word Splitting）")]),t._v(" "),a("li",[t._v("文件名扩展（Filename Expansion）")])]),t._v(" "),a("p",[t._v("这些扩展是 Shell 在处理命令之前完成的预处理操作，可以让命令更加简洁高效。")]),t._v(" "),a("h3",{attrs:{id:"参数扩展"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参数扩展"}},[t._v("#")]),t._v(" 参数扩展")]),t._v(" "),a("p",[t._v("Bash 将 "),a("code",[t._v("$")]),t._v(" 开头的词视为变量，将其"),a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("扩展"),a("OutboundLink")],1),t._v("成变量值。"),a("code",[t._v("${}")]),t._v(" 是可选的，可以用于明确标识变量名的边界，以防止歧义。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NAME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Alice"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, '),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${NAME}")]),t._v('"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将参数值中的反斜杠转义序列按 $'...' 引用机制展开")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("str")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'line1\\r\\nline2'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${str@E}")]),t._v('"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("$'line1"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\r"}},[t._v("\\r")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v("line2'")]),t._v("\n")])])]),a("h3",{attrs:{id:"命令替换"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令替换"}},[t._v("#")]),t._v(" 命令替换")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Command-Substitution.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("命令替换"),a("OutboundLink")],1),t._v("允许命令的输出替换命令本身。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("current_date")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),t._v(" +"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'%Y-%m-%d %T'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"当前日期是：'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$current_date")]),t._v('"')]),t._v("\n")])])]),a("h3",{attrs:{id:"进程替换"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进程替换"}},[t._v("#")]),t._v(" 进程替换")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Process-Substitution.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("进程替换"),a("OutboundLink")],1),t._v("允许通过文件名引用进程的输入或输出。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tree -h"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"三、重定向"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、重定向"}},[t._v("#")]),t._v(" 三、重定向")]),t._v(" "),a("p",[t._v("在执行命令之前，Shell 可以使用特殊的符号对命令的输入和输出进行"),a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Redirections.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("重定向"),a("OutboundLink")],1),t._v("。重定向允许对命令的文件句柄进行复制、打开、关闭、重新指向不同的文件，从而改变命令读取和写入的目标文件。")]),t._v(" "),a("p",[t._v("此外，重定向还可以用于修改当前 Shell 执行环境中的文件句柄。这些重定向操作符可以出现在简单命令的前面、命令内部的任意位置，或者紧随命令之后。")]),t._v(" "),a("p",[t._v("重定向的处理顺序是从左到右，按照它们在命令中出现的顺序依次执行。")]),t._v(" "),a("p",[t._v("常见重定向操作符包括：")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("输入重定向")]),t._v("："),a("code",[t._v("<")])]),t._v(" "),a("li",[a("strong",[t._v("输出重定向")]),t._v("："),a("code",[t._v(">")])]),t._v(" "),a("li",[a("strong",[t._v("追加重定向")]),t._v("："),a("code",[t._v(">>")])]),t._v(" "),a("li",[a("strong",[t._v("错误重定向")]),t._v("："),a("code",[t._v("2>")])]),t._v(" "),a("li",[a("strong",[t._v("将文件描述符合并")]),t._v("："),a("code",[t._v("&>")])]),t._v(" "),a("li",[a("strong",[t._v("空设备重定向")]),t._v("："),a("code",[t._v(">/dev/null")])])]),t._v(" "),a("p",[t._v("通过重定向，Shell 可以灵活地控制命令的输入来源和输出目标。")]),t._v(" "),a("h3",{attrs:{id:"文件描述符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件描述符"}},[t._v("#")]),t._v(" 文件描述符")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://zh.wikipedia.org/wiki/%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6",target:"_blank",rel:"noopener noreferrer"}},[t._v("文件描述符"),a("OutboundLink")],1),t._v("是内核为了高效管理已经被打开的文件所创建的索引，是一个非负整数，用于指代被打开的文件，所有执行 I/O 操作的系统调用都通过文件描述符来实现。")]),t._v(" "),a("p",[t._v("同时还规定 "),a("code",[t._v("0")]),t._v(" 是标准输入，"),a("code",[t._v("1")]),t._v(" 是标准输出，"),a("code",[t._v("2")]),t._v(" 是标准错误。这意味着如果此时去打开一个新的文件，它的文件描述符会是 "),a("code",[t._v("3")]),t._v("；再打开一个文件，文件描述符就是 "),a("code",[t._v("4")]),t._v("。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("整数值")]),t._v(" "),a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("文件流")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("0")])]),t._v(" "),a("td",[t._v("标准输入")]),t._v(" "),a("td",[a("code",[t._v("stdin")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("1")])]),t._v(" "),a("td",[t._v("标准输出")]),t._v(" "),a("td",[a("code",[t._v("stdout")])])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("2")])]),t._v(" "),a("td",[t._v("标准错误")]),t._v(" "),a("td",[a("code",[t._v("stderr")])])])])]),t._v(" "),a("h3",{attrs:{id:"重定向输出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重定向输出"}},[t._v("#")]),t._v(" 重定向输出")]),t._v(" "),a("p",[t._v("将"),a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Redirections.html#Redirecting-Output",target:"_blank",rel:"noopener noreferrer"}},[t._v("输出重定向"),a("OutboundLink")],1),t._v("到文件。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, World"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" output.txt\n")])])]),a("p",[t._v("将输出以追加的方式重定向到文件。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, World"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" output.txt\n")])])]),a("p",[a("code",[t._v("[n]>")]),t._v(" 表示将文件描述符为 "),a("code",[t._v("n")]),t._v(" 的流重定向到文件。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" non_existent_file.txt "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">")]),t._v(" error.log\n")])])]),a("p",[t._v("将标准输出和标准错误重定向到文件。有三种格式，语义上是等同的。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" non_existent_file.txt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&>")]),t._v(" all.log\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" non_existent_file.txt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">&")]),t._v(" all.log\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" log.txt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" /dev/null "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("&1")]),t._v("\n")])])]),a("h3",{attrs:{id:"重定向输入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重定向输入"}},[t._v("#")]),t._v(" 重定向输入")]),t._v(" "),a("p",[t._v("将"),a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Redirections.html#Redirecting-Input",target:"_blank",rel:"noopener noreferrer"}},[t._v("输入重定向"),a("OutboundLink")],1),t._v("到文件。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" output.txt\n")])])]),a("h3",{attrs:{id:"here-documents"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#here-documents"}},[t._v("#")]),t._v(" Here Documents")]),t._v(" "),a("p",[t._v("在 Shell 中，"),a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Redirections.html#Here-Documents",target:"_blank",rel:"noopener noreferrer"}},[t._v("Here Documents"),a("OutboundLink")],1),t._v(" 是一种多行输入重定向方式，用于将一段文字作为输入传递给命令。")]),t._v(" "),a("p",[t._v("语法如下：")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("EOF\n多行内容\nEOF")]),t._v("\n")])])]),a("p",[t._v("例如，从当前源读取输入，读取的所有行都用作命令的标准输入。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<-")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("EOF"),a("span",{pre:!0,attrs:{class:"token bash punctuation"}},[t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" output.txt")]),t._v("\nLine 1\nLine 2\nLine 3\nEOF")]),t._v("\n")])])]),a("h2",{attrs:{id:"四、启动文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、启动文件"}},[t._v("#")]),t._v(" 四、启动文件")]),t._v(" "),a("p",[t._v("Bash "),a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Bash-Startup-Files.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("启动文件"),a("OutboundLink")],1),t._v("是 Bash 在启动时自动执行的配置文件，用于初始化 Shell 环境。这些文件的加载顺序和作用取决于 Bash 的启动模式：交互式登录 Shell、交互式非登录 Shell 或 非交互式 Shell。")]),t._v(" "),a("h3",{attrs:{id:"交互式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#交互式"}},[t._v("#")]),t._v(" 交互式")]),t._v(" "),a("p",[t._v("交互式（Interactive）和非交互式（Non-Interactive）是两种不同的用户界面模式。")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("非交互式 Shell")])]),t._v(" "),a("p",[t._v("非交互式 Shell 用于执行脚本，如果设置了 "),a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Bash-Startup-Files.html#Invoked-non_002dinteractively",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("BASH_ENV")]),a("OutboundLink")],1),t._v(" 环境变量，则加载其指定的文件。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" myscript.sh\n")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("交互式 Shell")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, World"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n")])])])])]),t._v(" "),a("p",[t._v("以下是一个在 Bash 脚本中判断当前 Shell 是否交互式的示例。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/bin/bash")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-n")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PS1")]),t._v('"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"当前是交互式 Shell"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"当前是非交互式 Shell"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n")])])]),a("h3",{attrs:{id:"登录式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#登录式"}},[t._v("#")]),t._v(" 登录式")]),t._v(" "),a("p",[t._v("登录式（login shell）和非登录式（non-login shell）是两种不同的交互式 Shell 启动方式。")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("登录式 Shell")])]),t._v(" "),a("p",[t._v("当用户登录到系统时，系统会启动一个登录式 Shell，会加载以下文件：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("/etc/profile")]),t._v("：系统范围的配置文件，适用于所有用户。")]),t._v(" "),a("li",[a("code",[t._v("~/.bash_profile")]),t._v("、"),a("code",[t._v("~/.bash_login")]),t._v(" 或 "),a("code",[t._v("~/.profile")]),t._v("：用户特定的配置文件，按顺序查找并加载第一个找到的文件。")])]),t._v(" "),a("p",[t._v("当 Bash 会话结束时，会执行：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("~/.bash_logout")]),t._v("：用户退出时运行的命令，可用于清理任务。")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("非登录式 Shell")])]),t._v(" "),a("p",[t._v("在已经登录的环境中启动新的 Shell（如运行 "),a("code",[t._v("bash")]),t._v(" 命令），或者通过执行脚本来启动 Shell 时，通常会得到一个非登录式 Shell。")]),t._v(" "),a("p",[t._v("非登录式 Shell 不会执行用户的登录配置文件，而是执行其他配置文件。")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("/etc/bash.bashrc")]),t._v("：系统范围的配置文件。")]),t._v(" "),a("li",[a("code",[t._v("~/.bashrc")]),t._v("：用户特定的配置文件。")])])])]),t._v(" "),a("p",[t._v("可以通过查看 "),a("code",[t._v("$0")]),t._v(" 环境变量的值来确定当前 Shell 是否为登录式或非登录式。如果 "),a("code",[t._v("$0")]),t._v(" 的值以 "),a("code",[t._v("-")]),t._v(" 开头，通常表示登录式 Shell。")]),t._v(" "),a("p",[t._v("非交互式非登录式 Shell 的典型用例如下。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" myscript.sh\n")])])]),a("h2",{attrs:{id:"五、内置命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五、内置命令"}},[t._v("#")]),t._v(" 五、内置命令")]),t._v(" "),a("p",[t._v("以下 Shell "),a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Shell-Builtin-Commands.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("内建命令"),a("OutboundLink")],1),t._v("是从 Bourne Shell 继承而来的，并按照 POSIX 标准进行了实现。这些命令是 Shell 自带的功能，不需要外部程序支持，因此执行效率更高。")]),t._v(" "),a("h3",{attrs:{id:"符号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#符号"}},[t._v("#")]),t._v(" 符号")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[a("code",[t._v(":")])])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Bourne-Shell-Builtins.html#index-_003a",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v(":")]),a("OutboundLink")],1),t._v(" 为空命令，返回成功状态。除了扩展参数和执行重定向之外，什么都不做。")])]),t._v(" "),a("li",[a("p",[a("strong",[a("code",[t._v(".")])])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Bourne-Shell-Builtins.html#index-_002e",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v(".")]),a("OutboundLink")],1),t._v(" 为执行指定文件中的命令，通常用于加载脚本。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" ./myscript.sh\n")])])])])]),t._v(" "),a("h3",{attrs:{id:"结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#结构"}},[t._v("#")]),t._v(" 结构")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[a("code",[t._v("break")])])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Bourne-Shell-Builtins.html#index-break",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("break")]),a("OutboundLink")],1),t._v(" 命令用于退出当前的循环结构。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[t._v("i")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$i")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-eq")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("break")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$i")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("strong",[a("code",[t._v("continue")])])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Bourne-Shell-Builtins.html#index-continue",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("continue")]),a("OutboundLink")],1),t._v(" 命令用于跳过本次循环的剩余部分，开始下一次循环。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[t._v("i")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$i")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-eq")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("continue")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$i")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("strong",[a("code",[t._v("return")])])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Bourne-Shell-Builtins.html#index-return",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("return")]),a("OutboundLink")],1),t._v(" 命令用于从函数中返回，指定返回状态码。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function-name function"}},[t._v("myfunc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nmyfunc\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$?")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 输出 5")]),t._v("\n")])])])])]),t._v(" "),a("h3",{attrs:{id:"执行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#执行"}},[t._v("#")]),t._v(" 执行")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[a("code",[t._v("eval")])])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Bourne-Shell-Builtins.html#index-eval",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("eval")]),a("OutboundLink")],1),t._v(" 命令用于执行一个字符串作为命令。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("eval")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"echo Hello, World"')]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("strong",[a("code",[t._v("exec")])])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Bourne-Shell-Builtins.html#index-exec",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("exec")]),a("OutboundLink")],1),t._v(" 用指定命令替换当前 Shell 进程，或者重定向文件描述符。")]),t._v(" "),a("p",[t._v("例如，用当前用户的默认 Shell，替换当前的 Shell 进程。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$SHELL")]),t._v('"')]),t._v("\n")])])]),a("p",[t._v("例如，将输出重定向到文件。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" output.txt\n")])])])]),t._v(" "),a("li",[a("p",[a("strong",[a("code",[t._v("exit")])])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Bourne-Shell-Builtins.html#index-exit",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("exit")]),a("OutboundLink")],1),t._v(" 用于退出 Shell，并返回指定的退出状态码。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("strong",[a("code",[t._v("times")])])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Bourne-Shell-Builtins.html#index-times",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("times")]),a("OutboundLink")],1),t._v(" 用于显示 Shell 和子进程的执行时间。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("times")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("strong",[a("code",[t._v("trap")])])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Bourne-Shell-Builtins.html#index-trap",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("trap")]),a("OutboundLink")],1),t._v(" 用于定义脚本在接收到信号时执行的动作。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("trap")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"echo Ctrl+C 被捕获"')]),t._v(" SIGINT\n")])])])])]),t._v(" "),a("h3",{attrs:{id:"变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#变量"}},[t._v("#")]),t._v(" 变量")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[a("code",[t._v("export")])])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Bourne-Shell-Builtins.html#index-export",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("export")]),a("OutboundLink")],1),t._v(" 用于将变量导出到子进程中。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("MYVAR")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello"')]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("strong",[a("code",[t._v("readonly")])])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Bourne-Shell-Builtins.html#index-readonly",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("readonly")]),a("OutboundLink")],1),t._v(" 用于将变量标记为只读，无法修改。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("readonly")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("VAR")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value"')]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("strong",[a("code",[t._v("unset")])])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Bourne-Shell-Builtins.html#index-unset",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("unset")]),a("OutboundLink")],1),t._v(" 用于删除变量或函数的值。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("unset")]),t._v(" MYVAR\n")])])])])]),t._v(" "),a("h3",{attrs:{id:"参数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参数"}},[t._v("#")]),t._v(" 参数")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[a("code",[t._v("set")])])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/The-Set-Builtin.html#index-set",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("set")]),a("OutboundLink")],1),t._v(" 用于设置或取消设置 Shell 选项或位置参数。")]),t._v(" "),a("ul",[a("li",[t._v("-"),a("strong",[t._v("e")]),t._v("：当脚本中的任何命令返回非零退出状态时，立即退出脚本。")]),t._v(" "),a("li",[t._v("-"),a("strong",[t._v("u")]),t._v("：如果尝试使用未声明的变量，则引发错误并导致脚本退出。")]),t._v(" "),a("li",[t._v("-"),a("strong",[t._v("x")]),t._v("：执行脚本时，在执行每个命令之前，打印出实际执行的命令及其参数。")]),t._v(" "),a("li",[t._v("-"),a("strong",[t._v("o")]),t._v(" "),a("em",[t._v("option-name")]),t._v("：设置与选项名称对应的选项。")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-eux")]),t._v("\n")])])]),a("p",[t._v("在 Bash 脚本中，通常会使用管道 "),a("code",[t._v("|")]),t._v(" 将多个命令连接起来。")]),t._v(" "),a("p",[t._v("例如，"),a("code",[t._v("mysqldump | gzip")]),t._v(" 会将 "),a("code",[t._v("mysqldump")]),t._v(" 的输出通过管道传递给 "),a("code",[t._v("gzip")]),t._v("。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/bin/bash")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-o")]),t._v(" pipefail\nmysqldump "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("gzip")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" backup.sql.gz\n")])])]),a("p",[t._v("默认情况下，管道中只有最后一个命令的退出状态码会被脚本捕获和返回。如果中间的命令失败了，但最后一个命令成功了，那么整个管道会被认为是成功的。这可能会掩盖中间命令的错误，导致脚本无法正确检测到失败。")]),t._v(" "),a("p",[a("code",[t._v("pipefail")]),t._v(" 选项改变了这个行为，使得整个管道的退出状态码是管道中任何一个命令的非零退出状态码（如果有的话）。")]),t._v(" "),a("p",[t._v("这样，如果 "),a("code",[t._v("mysqldump")]),t._v(" 失败了，即使 "),a("code",[t._v("gzip")]),t._v(" 成功，整个管道仍然会返回非零的退出状态码。")])]),t._v(" "),a("li",[a("p",[a("strong",[a("code",[t._v("shift")])])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.gnu.org/software/bash/manual/html_node/Bourne-Shell-Builtins.html#index-shift",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("shift")]),a("OutboundLink")],1),t._v(" 用于移动位置参数的顺序。")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("shift")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将 $3 变为 $1")]),t._v("\n")])])])])])])}),[],!1,null,null,null);a.default=r.exports}}]);