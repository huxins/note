# 内存

- **ECC 内存**

  ECC 内存分为普通 ECC 和 RECC。RECC 自带寄存器（单面 10 颗芯片），支持更多内存颗粒，容量更大、性能更高，但需 E5 及以上处理器支持。

  - RDIMM：标压内存，如 PC3-12800R；
  - LRDIMM：低压内存，如 PC3L-12800L。

## 颗粒

目前市场上，主流内存颗粒生产商是三星、海力士、镁光。

- **Rank**

  Rank 是内存条上由一组颗粒构成的数据区域，一个 Rank 的颗粒可分布在内存条的两面。
  
  内存条可分为 Single-Rank（1R）、Dual-Rank（2R）和 Quad-Rank（4R）。x4 和 x8 指每个 Bank 的数据位宽。
  
  一个 Rank 的总数据位宽为 64 bit。因此，若每个 Bank 为 4 bit，则需 16 个 Bank；若为 8 bit，则需 8 个 Bank。例如，1Rx8 表示单 rank 且每个 Bank 为 8 bit。

## 频率

内存工作频率受到内存控制器的制约，从 11 代酷睿处理器开始，Intel 就紧跟 AMD 锐龙的步伐，引入「内存分频机制」。

> Intel 12 和 13 代 Non-K CPU 会锁 SA 电压，使用 D4 内存频率超过 3200Mhz，大概率会进入 Gear 2 分频模式；使用 D5 内存频率推荐 6400MHz。
>
> K CPU 使用 D4 内存，可上到 4000 Mhz；D5 内存根据主板的不同，可上到 7000 甚至是 8000+MHz。

```
读写速度 = 内存频率 * 64 * 通道数 / 8
```

## 时序

内存时序是描述内存条性能的一种参数，一般存储在内存条的 SPD 中。

|   缩写   |             全称              |                             说明                             |           影响性能的关键点           |
| :------: | :---------------------------: | :----------------------------------------------------------: | :----------------------------------: |
|  **CL**  | CAS Latency (列地址访问延迟)  | 从发送读指令到收到第一个数据的时间周期数。**数值越低，数据响应越快**。 | **直接决定内存延迟**，对性能最敏感。 |
| **tRCD** | RAS to CAS Delay (行到列延迟) | 激活行地址后，需等待多久才能访问列地址的周期数。**影响内存切换存储行的效率**。 |   过高会降低多任务处理的响应速度。   |
| **tRP**  | RAS Precharge (行预充电时间)  | 关闭当前行地址后，需等待多久才能激活新行地址的周期数。**影响内存切换存储行的速度**。 |      过高会导致行切换延迟增加。      |
| **tRAS** | Row Active Time (行激活时间)  | 行地址激活后必须保持开启的最短周期数。**需满足：tRAS ≥ CL + tRCD + 2**（否则会不稳定）。 | 过低导致数据错误，过高拖累带宽效率。 |

同频率下，CL 值越小内存条性能越好。从 DDR1 - DDR4 随着内存条的频率越来越高，CL 值也越来越大，但是其真实的 CL 延迟时间几乎没有什么变化。

> 乘 2 的原因是 DDR 内存一个时钟周期内传输两次数据，可以看做基数是 2

```
DDR-400 3-3-3-8：3*2/400 = 15 ns
DDR2-800 6-6-6-18：6*2/800 = 15 ns
DDR3-1333 9-9-9-24：9*2/1333 = 13.5 ns
DDR4-2133 15-15-15-35：15*2/2133 = 14 ns
DDR4-2400 17-17-17-39：17*2/2400 = 14 ns
DDR4-3200 22-22-22-52：22*2/3200 = 13.7 ns
```

## 超频

- [XMP](https://www.intel.cn/content/www/cn/zh/gaming/extreme-memory-profile-xmp.html)
- [EXPO](https://www.amd.com/zh-cn/products/processors/technologies/expo.html)

## 品牌

- 宜鼎/Innodisk

- [美光/Micron](https://www.micron.cn/sales-support/sales-network/authorized-distributors)

- 英睿达/Crucial
  
  - [物料号识别](https://www.crucial.com/support/identify-parts)
  - [物料号验证](https://www.crucial.com/warranty-home)
  - 零件号：C16FT
    - 第一位为颗粒品牌，M、C 为美光，K 为三星，可能不存在
    - 数字为颗粒个数
    - 最后一位为颗粒版本
  - 颗粒号：前两位为日期，中间第三位为颗粒版本，可参考 CSN11
  
  - 经销商
  
    - 文明蒙恬旗下北京合众怡毅科技有限公司
    - 深圳市怡亚通供应链股份有限公司

