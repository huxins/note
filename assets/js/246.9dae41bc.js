(window.webpackJsonp=window.webpackJsonp||[]).push([[246],{558:function(a,t,s){"use strict";s.r(t);var e=s(27),n=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"minio"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#minio"}},[a._v("#")]),a._v(" MinIO")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://github.com/minio/minio",target:"_blank",rel:"noopener noreferrer"}},[a._v("MinIO"),t("OutboundLink")],1),a._v(" 是高性能的开源对象存储服务器，完全兼容 Amazon S3 API，专为云原生和私有化部署设计。")]),a._v(" "),t("h2",{attrs:{id:"一、安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、安装"}},[a._v("#")]),a._v(" 一、安装")]),a._v(" "),t("ul",[t("li",[t("p",[t("strong",[a._v("CentOS 7")])]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("wget")]),a._v(" https://dl.min.io/server/minio/release/linux-amd64/archive/minio-20231115204325.0.0.x86_64.rpm "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-O")]),a._v(" minio.rpm\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" minio.rpm\n")])])])])]),a._v(" "),t("h3",{attrs:{id:"systemd"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#systemd"}},[a._v("#")]),a._v(" Systemd")]),a._v(" "),t("ul",[t("li",[t("p",[t("strong",[a._v("minio.service")])]),a._v(" "),t("p",[a._v("创建 "),t("code",[a._v("/usr/lib/systemd/system/minio.service")]),a._v(" 文件。")]),a._v(" "),t("div",{staticClass:"language-ini extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ini"}},[t("code",[t("span",{pre:!0,attrs:{class:"token section"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token section-name selector"}},[a._v("Unit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("Description")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("MinIO")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("Documentation")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("https://docs.min.io")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("Wants")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("network-online.target")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("After")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("network-online.target")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("AssertFileIsExecutable")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/usr/local/bin/minio")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token section"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token section-name selector"}},[a._v("Service")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("Type")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("notify")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("WorkingDirectory")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/usr/local")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("User")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("minio-user")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("Group")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("minio-user")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# Added in version 247.")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# ProtectProc=invisible")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("EnvironmentFile")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("-/etc/default/minio")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("ExecStartPre")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/bin/bash -c \"if [ -z '${MINIO_VOLUMES}' ]; then echo 'Variable MINIO_VOLUMES not set in /etc/default/minio'; exit 1; fi\"")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("ExecStart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("/usr/local/bin/minio server $MINIO_OPTS $MINIO_VOLUMES")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("Restart")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("always")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("LimitNOFILE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("1048576")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("TasksMax")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("infinity")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("TimeoutStopSec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("infinity")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("SendSIGKILL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("no")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token section"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token section-name selector"}},[a._v("Install")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("WantedBy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("multi-user.target")]),a._v("\n")])])])])]),a._v(" "),t("h3",{attrs:{id:"配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置文件"}},[a._v("#")]),a._v(" 配置文件")]),a._v(" "),t("p",[a._v("创建 "),t("code",[a._v("/etc/default/minio")]),a._v(" 文件。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MINIO_VOLUMES")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/mnt/data"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MINIO_OPTS")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"--address :9199 --console-address :9001"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MINIO_ROOT_USER")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Root-User\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MINIO_ROOT_PASSWORD")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Root-Password\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MINIO_CONFIG_ENV_FILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/etc/default/minio\n")])])]),t("h3",{attrs:{id:"配置用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置用户"}},[a._v("#")]),a._v(" 配置用户")]),a._v(" "),t("p",[a._v("新增用户组。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("groupadd")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v(" minio-user\n")])])]),t("p",[a._v("新增用户。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("useradd")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-m")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" /home/minio-user "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-g")]),a._v(" minio-user minio-user\n")])])]),t("p",[a._v("新增数据目录并更改所有权。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" /mnt/data\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("chown")]),a._v(" minio-user:minio-user /mnt/data\n")])])]),t("h2",{attrs:{id:"二、minio-client"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、minio-client"}},[a._v("#")]),a._v(" 二、MinIO Client")]),a._v(" "),t("p",[a._v("安装 "),t("a",{attrs:{href:"https://min.io/docs/minio/linux/reference/minio-mc.html",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("mc")]),t("OutboundLink")],1),a._v("。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-O")]),a._v(" https://dl.min.io/client/mc/release/linux-amd64/mc\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" +x "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mc")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mv")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mc")]),a._v(" /usr/local/bin/mc\n")])])]),t("h3",{attrs:{id:"mc-alias"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mc-alias"}},[a._v("#")]),a._v(" mc alias")]),a._v(" "),t("p",[t("code",[a._v("mc alias")]),a._v(" 命令为管理 "),t("code",[a._v("mc")]),a._v(" 可以连接并执行操作的 S3 兼容主机列表提供了便捷的接口。")]),a._v(" "),t("ul",[t("li",[t("p",[t("code",[a._v("mc alias set")])]),a._v(" "),t("p",[t("code",[a._v("mc alias set")]),a._v(" 命令用于向本地 "),t("code",[a._v("mc")]),a._v(" 配置添加或更新别名。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mc")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("alias")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" myminio http://127.0.0.1:9199 Root-User Root-Password\n")])])])])]),a._v(" "),t("h3",{attrs:{id:"mc-ls"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mc-ls"}},[a._v("#")]),a._v(" mc ls")]),a._v(" "),t("p",[t("code",[a._v("mc ls")]),a._v(" 命令列出 MinIO 或其他与 S3 兼容的服务上的存储桶和对象。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mc")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" myminio\n")])])]),t("p",[a._v("列出 "),t("code",[a._v("ALIAS")]),a._v(" 中每个存储桶或目录的内容。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mc")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-r")]),a._v(" myminio\n")])])]),t("h2",{attrs:{id:"三、minio-admin-client"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、minio-admin-client"}},[a._v("#")]),a._v(" 三、MinIO Admin Client")]),a._v(" "),t("h3",{attrs:{id:"mc-admin-info"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mc-admin-info"}},[a._v("#")]),a._v(" mc admin info")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://min.io/docs/minio/linux/reference/minio-mc-admin/mc-admin-info.html",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("mc admin info")]),t("OutboundLink")],1),a._v(" 命令显示 MinIO 服务器上的信息。对于分布式 MinIO 部署，"),t("code",[a._v("mc admin info")]),a._v(" 显示部署中每个 MinIO 服务器的信息。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mc")]),a._v(" admin info myminio\n")])])]),t("h3",{attrs:{id:"mc-admin-service"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mc-admin-service"}},[a._v("#")]),a._v(" mc admin service")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://min.io/docs/minio/linux/reference/minio-mc-admin/mc-admin-service.html",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("mc admin service")]),t("OutboundLink")],1),a._v(" 命令可以重新启动或停止 MinIO 服务器。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mc")]),a._v(" admin "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" restart myminio\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);