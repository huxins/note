(window.webpackJsonp=window.webpackJsonp||[]).push([[187],{500:function(t,r,n){"use strict";n.r(r);var s=n(27),e=Object(s.a)({},(function(){var t=this,r=t._self._c;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"包和模块"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#包和模块"}},[t._v("#")]),t._v(" 包和模块")]),t._v(" "),r("p",[t._v("Python 所有模块均属于唯一的模块对象类型，无论由 Python、C 或其他语言实现。")]),t._v(" "),r("h2",{attrs:{id:"包"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#包"}},[t._v("#")]),t._v(" 包")]),t._v(" "),r("p",[t._v("为构建模块化的代码组织体系，Python 通过包实现层次化命名空间管理，形成结构化模块资源池。所有"),r("strong",[t._v("包都是模块")]),t._v("，但并非所有模块都是包。或者换句话说，包只是一种特殊的模块。")]),t._v(" "),r("p",[t._v("可以把包看成是文件系统中的目录，并把模块看成是目录中的文件。包既可包含常规模块，又可嵌套包含"),r("strong",[t._v("子包")]),t._v("，形成树状结构化的代码容器体系。")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://docs.python.org/zh-cn/3/reference/import.html#regular-packages",target:"_blank",rel:"noopener noreferrer"}},[t._v("常规包"),r("OutboundLink")],1),t._v("通常以一个包含 "),r("code",[t._v("__init__.py")]),t._v(" 文件的目录形式实现，当一个常规包被导入时，这个 "),r("code",[t._v("__init__.py")]),t._v(" 文件会隐式地被执行，它所定义的对象会被绑定到该包命名空间中的名称。")]),t._v(" "),r("p",[r("code",[t._v("__init__.py")]),t._v(" 文件可以包含与任何其他模块中所包含的 Python 代码相似的代码，Python 将在模块被导入时为其添加额外的属性。")]),t._v(" "),r("p",[t._v("以下文件系统布局定义了一个最高层级的 "),r("code",[t._v("parent")]),t._v(" 包和三个子包。")]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("parent/\n    __init__.py\n    one/\n        __init__.py\n    two/\n        __init__.py\n    three/\n        __init__.py\n")])])]),r("p",[t._v("导入 "),r("code",[t._v("parent.one")]),t._v(" 将隐式地执行 "),r("code",[t._v("parent/__init__.py")]),t._v(" 和 "),r("code",[t._v("parent/one/__init__.py")]),t._v("，后续导入 "),r("code",[t._v("parent.two")]),t._v(" 或 "),r("code",[t._v("parent.three")]),t._v(" 则将分别执行 "),r("code",[t._v("parent/two/__init__.py")]),t._v(" 和 "),r("code",[t._v("parent/three/__init__.py")]),t._v("。")]),t._v(" "),r("h2",{attrs:{id:"模块导入"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#模块导入"}},[t._v("#")]),t._v(" 模块导入")]),t._v(" "),r("p",[t._v("一个模块内的 Python 代码通过导入操作就能够访问另一个模块内的代码。")]),t._v(" "),r("p",[t._v("发起调用"),r("a",{attrs:{href:"https://docs.python.org/zh-cn/3/reference/import.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("导入机制"),r("OutboundLink")],1),t._v("的方式：")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://docs.python.org/zh-cn/3/reference/simple_stmts.html#import",target:"_blank",rel:"noopener noreferrer"}},[r("code",[t._v("import")]),r("OutboundLink")],1),t._v(" 语句")]),t._v(" "),r("li",[r("a",{attrs:{href:"https://docs.python.org/zh-cn/3/library/importlib.html#importlib.import_module",target:"_blank",rel:"noopener noreferrer"}},[r("code",[t._v("importlib.import_module()")]),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://docs.python.org/zh-cn/3/library/functions.html#import__",target:"_blank",rel:"noopener noreferrer"}},[r("code",[t._v("__import__()")]),r("OutboundLink")],1)])]),t._v(" "),r("h3",{attrs:{id:"import"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#import"}},[t._v("#")]),t._v(" import")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://docs.python.org/zh-cn/3/reference/simple_stmts.html#import",target:"_blank",rel:"noopener noreferrer"}},[r("code",[t._v("import")]),r("OutboundLink")],1),t._v(" 语句结合了两个操作：")]),t._v(" "),r("ul",[r("li",[t._v("搜索指定名称的模块")]),t._v(" "),r("li",[t._v("将搜索结果绑定到当前作用域中的名称")])]),t._v(" "),r("p",[r("a",{attrs:{href:"https://docs.python.org/zh-cn/3/reference/simple_stmts.html#import",target:"_blank",rel:"noopener noreferrer"}},[r("code",[t._v("import")]),r("OutboundLink")],1),t._v(" 语句的搜索操作被定义为对 "),r("a",{attrs:{href:"https://docs.python.org/zh-cn/3/library/functions.html#import__",target:"_blank",rel:"noopener noreferrer"}},[r("code",[t._v("__import__()")]),r("OutboundLink")],1),t._v(" 函数的调用并带有适当的参数，"),r("a",{attrs:{href:"https://docs.python.org/zh-cn/3/library/functions.html#import__",target:"_blank",rel:"noopener noreferrer"}},[r("code",[t._v("__import__()")]),r("OutboundLink")],1),t._v(" 的返回值会被用于执行 "),r("code",[t._v("import")]),t._v(" 语句的名称绑定操作。")]),t._v(" "),r("p",[t._v("对 "),r("a",{attrs:{href:"https://docs.python.org/zh-cn/3/library/functions.html#import__",target:"_blank",rel:"noopener noreferrer"}},[r("code",[t._v("__import__()")]),r("OutboundLink")],1),t._v(" 的直接调用将仅执行模块搜索，如果找到，则执行模块创建操作。只有 "),r("a",{attrs:{href:"https://docs.python.org/zh-cn/3/reference/simple_stmts.html#import",target:"_blank",rel:"noopener noreferrer"}},[r("code",[t._v("import")]),r("OutboundLink")],1),t._v(" 语句会执行名称绑定操作。")]),t._v(" "),r("p",[t._v("如果标识符列表改为一个星号 "),r("code",[t._v("*")]),t._v("，则在模块中定义的全部"),r("strong",[t._v("公有名称")]),t._v("都将按 "),r("code",[t._v("import")]),t._v(" 语句所在的作用域被绑定到局部命名空间。")]),t._v(" "),r("div",{staticClass:"language-python extra-class"},[r("pre",{pre:!0,attrs:{class:"language-python"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" module "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("\n")])])]),r("ul",[r("li",[r("strong",[t._v("公有名称")]),t._v("：在模块中可以被外部直接访问和使用的名称（如函数、类、变量等）。")]),t._v(" "),r("li",[r("strong",[t._v("私有名称")]),t._v("：通常以下划线 "),r("code",[t._v("_")]),t._v(" 开头，表示这些名称是模块的内部实现细节，不建议外部访问。")])]),t._v(" "),r("p",[t._v("一个模块所定义的"),r("strong",[t._v("公有名称")]),t._v("，是由在模块的命名空间中检测一个名为 "),r("code",[t._v("__all__")]),t._v(" 的变量来确定的；如果有定义，它必须是一个字符串列表，其中的项为该模块所定义或导入的名称。")]),t._v(" "),r("p",[t._v("当使用 "),r("code",[t._v("from module import *")]),t._v(" 语句时，只有 "),r("code",[t._v("__all__")]),t._v(" 列表中的名称会被导入。")]),t._v(" "),r("p",[t._v("如果没有定义 "),r("code",[t._v("__all__")]),t._v("，Python 会默认将所有不以下划线 "),r("code",[t._v("_")]),t._v(" 开头的名称视为公有名称。")]),t._v(" "),r("div",{staticClass:"language-python extra-class"},[r("pre",{pre:!0,attrs:{class:"language-python"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" views\n\n__all__ "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"views"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),r("h3",{attrs:{id:"import-2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#import-2"}},[t._v("#")]),t._v(" _"),r("em",[t._v("import")]),t._v("_")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://docs.python.org/zh-cn/3/library/functions.html#import__",target:"_blank",rel:"noopener noreferrer"}},[r("code",[t._v("__import__")]),r("OutboundLink")],1),t._v(" 函数会由 "),r("a",{attrs:{href:"https://docs.python.org/zh-cn/3/reference/simple_stmts.html#import",target:"_blank",rel:"noopener noreferrer"}},[r("code",[t._v("import")]),r("OutboundLink")],1),t._v(" 语句发起调用。不建议直接使用 "),r("a",{attrs:{href:"https://docs.python.org/zh-cn/3/library/functions.html#import__",target:"_blank",rel:"noopener noreferrer"}},[r("code",[t._v("__import__()")]),r("OutboundLink")],1),t._v(" 而应该用 "),r("a",{attrs:{href:"https://docs.python.org/zh-cn/3/library/importlib.html#importlib.import_module",target:"_blank",rel:"noopener noreferrer"}},[r("code",[t._v("importlib.import_module()")]),r("OutboundLink")],1),t._v("。")]),t._v(" "),r("div",{staticClass:"language-python extra-class"},[r("pre",{pre:!0,attrs:{class:"language-python"}},[r("code",[r("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("__import__")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("globals")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("None")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("locals")]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),r("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("None")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fromlist"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" level"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),r("p",[t._v("本函数会导入模块 "),r("code",[t._v("name")]),t._v("，"),r("code",[t._v("fromlist")]),t._v(" 给出了应从 "),r("code",[t._v("name")]),t._v(" 模块中导入的对象或子模块的名称。"),r("code",[t._v("level")]),t._v(" 指定是使用绝对还是相对导入，"),r("code",[t._v("0")]),t._v(" 意味着仅执行绝对导入。")]),t._v(" "),r("p",[t._v("当 "),r("code",[t._v("name")]),t._v(" 变量的形式为 "),r("code",[t._v("package.module")]),t._v(" 时，通常将会返回最高层级的包，而不是以 "),r("code",[t._v("name")]),t._v(" 命名的模块。但是，当给出了非空的 "),r("code",[t._v("fromlist")]),t._v(" 参数时，则将返回以 "),r("code",[t._v("name")]),t._v(" 命名的模块。")]),t._v(" "),r("div",{staticClass:"language-python extra-class"},[r("pre",{pre:!0,attrs:{class:"language-python"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# import time")]),t._v("\ntime "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("__import__")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'time'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("globals")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("locals")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# import lxml.html")]),t._v("\nlxml "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("__import__")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'lxml.html'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("globals")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("locals")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 返回顶层模块")]),t._v("\n\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# from lxml.html import fromstring, document_fromstring as doc_fromstring")]),t._v("\n_temp "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("__import__")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'lxml.html'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("globals")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("locals")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fromstring'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'document_fromstring'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 返回 name 模块")]),t._v("\nfromstring "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _temp"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fromstring\ndoc_fromstring "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _temp"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("document_fromstring\n")])])]),r("h3",{attrs:{id:"importlib"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#importlib"}},[t._v("#")]),t._v(" importlib")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://docs.python.org/zh-cn/3/library/importlib.html",target:"_blank",rel:"noopener noreferrer"}},[r("code",[t._v("importlib")]),r("OutboundLink")],1),t._v(" 包的主要目的是在 Python 源代码中提供 "),r("a",{attrs:{href:"https://docs.python.org/zh-cn/3/reference/simple_stmts.html#import",target:"_blank",rel:"noopener noreferrer"}},[r("code",[t._v("import")]),r("OutboundLink")],1),t._v(" 语句的实现。")]),t._v(" "),r("ul",[r("li",[r("p",[t._v("importlib."),r("a",{attrs:{href:"https://docs.python.org/zh-cn/3/library/importlib.html#importlib.import_module",target:"_blank",rel:"noopener noreferrer"}},[r("strong",[t._v("import_module")]),r("OutboundLink")],1),t._v("("),r("em",[t._v("name")]),t._v(", "),r("em",[t._v("package")]),t._v("="),r("em",[t._v("None")]),t._v(")")]),t._v(" "),r("p",[t._v("导入一个模块。参数 "),r("code",[t._v("name")]),t._v(" 指定了以绝对或相对导入方式导入什么模块。如果参数 "),r("code",[t._v("name")]),t._v(" 使用相对导入的方式来指定，那么 "),r("code",[t._v("package")]),t._v(" 参数必须设置为模块包名。")])])])])}),[],!1,null,null,null);r.default=e.exports}}]);