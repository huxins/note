(window.webpackJsonp=window.webpackJsonp||[]).push([[157],{470:function(e,t,r){"use strict";r.r(t);var a=r(27),n=Object(a.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"csharp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#csharp"}},[e._v("#")]),e._v(" CSharp")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/csharp/tour-of-csharp/overview",target:"_blank",rel:"noopener noreferrer"}},[e._v("C#"),t("OutboundLink")],1),e._v(" 语言是适用于 "),t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/",target:"_blank",rel:"noopener noreferrer"}},[e._v(".NET"),t("OutboundLink")],1),e._v(" 平台的最流行语言。")]),e._v(" "),t("h2",{attrs:{id:"一、类型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、类型"}},[e._v("#")]),e._v(" 一、类型")]),e._v(" "),t("p",[e._v("CSharp 是一种强"),t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/csharp/fundamentals/types/",target:"_blank",rel:"noopener noreferrer"}},[e._v("类型"),t("OutboundLink")],1),e._v("语言。每个变量和常量都有一个类型，每个求值的表达式也是如此。")]),e._v(" "),t("h3",{attrs:{id:"内置类型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#内置类型"}},[e._v("#")]),e._v(" 内置类型")]),e._v(" "),t("p",[e._v("CSharp 提供了一组标准的"),t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/built-in-types",target:"_blank",rel:"noopener noreferrer"}},[e._v("内置类型"),t("OutboundLink")],1),e._v("。")]),e._v(" "),t("ul",[t("li",[t("p",[t("strong",[e._v("char")])]),e._v(" "),t("p",[t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/char",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("char")]),t("OutboundLink")],1),e._v(" 类型表示 Unicode UTF-16 字符。")]),e._v(" "),t("div",{staticClass:"language-c# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("char firstLetter = 'C';\n")])])])]),e._v(" "),t("li",[t("p",[t("strong",[e._v("int")])]),e._v(" "),t("p",[t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/integral-numeric-types",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("int")]),t("OutboundLink")],1),e._v(" 类型表示整数。所有的整型数值类型均为值类型。")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("C#")]),e._v(" "),t("th",[e._v("Size")]),e._v(" "),t("th",[e._v(".NET")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[t("code",[e._v("int")])]),e._v(" "),t("td",[e._v("带符号的 32 位整数")]),e._v(" "),t("td",[t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/api/system.int32",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("System.Int32")]),t("OutboundLink")],1)])])])])]),e._v(" "),t("li",[t("p",[t("strong",[e._v("float")])]),e._v(" "),t("p",[t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/floating-point-numeric-types",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("float")]),t("OutboundLink")],1),e._v(" 类型表示实数。所有浮点型数值类型均为值类型。")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",[e._v("C#")]),e._v(" "),t("th",[e._v("Size")]),e._v(" "),t("th",[e._v(".NET")])])]),e._v(" "),t("tbody",[t("tr",[t("td",[t("code",[e._v("float")])]),e._v(" "),t("td",[e._v("4 字节")]),e._v(" "),t("td",[t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/api/system.single",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("System.Single")]),t("OutboundLink")],1)])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("double")])]),e._v(" "),t("td",[e._v("8 字节")]),e._v(" "),t("td",[t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/api/system.double",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("System.Double")]),t("OutboundLink")],1)])]),e._v(" "),t("tr",[t("td",[t("code",[e._v("decimal")])]),e._v(" "),t("td",[e._v("16 字节")]),e._v(" "),t("td",[t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/api/system.decimal",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("System.Decimal")]),t("OutboundLink")],1)])])])]),e._v(" "),t("div",{staticClass:"language-c# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("// 创建 float 类型，在数字后面追加字母 F\nConsole.WriteLine(0.25F.GetType());\n\n// 创建 double 类型，只需输入一个十进制数字即可\nConsole.WriteLine(2.625.GetType());\n\n// 创建 decimal 类型，在数字后面追加字母 M\nConsole.WriteLine(12.39816M.GetType());\n")])])])]),e._v(" "),t("li",[t("p",[t("strong",[e._v("bool")])]),e._v(" "),t("p",[t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/bool",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("bool")]),t("OutboundLink")],1),e._v(" 类型关键字是 .NET "),t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/api/system.boolean",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("System.Boolean")]),t("OutboundLink")],1),e._v(" 结构类型的别名，它表示一个布尔值，可为 "),t("code",[e._v("true")]),e._v(" 或 "),t("code",[e._v("false")]),e._v("。")]),e._v(" "),t("div",{staticClass:"language-c# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Console.WriteLine(true);\nConsole.WriteLine(false);\n")])])])]),e._v(" "),t("li",[t("p",[t("strong",[e._v("string")])]),e._v(" "),t("p",[t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/reference-types#the-string-type",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("string")]),t("OutboundLink")],1),e._v(" 类型表示零个或多个 Unicode 字符的序列。"),t("code",[e._v("string")]),e._v(" 是 "),t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/api/system.string",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("System.String")]),t("OutboundLink")],1),e._v(" 在 .NET 中的别名。")]),e._v(" "),t("p",[e._v("字符串文本可包含任何字符文本，包括转义序列。")]),e._v(" "),t("div",{staticClass:"language-c# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('// 使用 `\\n` 表示换行符\nConsole.WriteLine("Hello\\nWorld!");\nConsole.WriteLine("Hello\\tWorld!");\n\n// 使用转义序列 `\\\\` 表示反斜杠\n// 使用 `\\u0066` 表示字母 f\nConsole.WriteLine("\\\\\\u0066\\n F");\n')])])]),t("p",[t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/tokens/verbatim",target:"_blank",rel:"noopener noreferrer"}},[e._v("逐字字符串"),t("OutboundLink")],1),e._v("将保留所有空格和字符，而无需转义反斜杠。要创建逐字字符串，请在文本字符串的前面使用 "),t("code",[e._v("@")]),e._v(" 指令。")]),e._v(" "),t("div",{staticClass:"language-c# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('Console.WriteLine(@"    c:\\source\\repos    \n        (this is where your code goes)");\n')])])]),t("p",[t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/tokens/interpolated",target:"_blank",rel:"noopener noreferrer"}},[e._v("字符串模板"),t("OutboundLink")],1),e._v("可以将多个值合并为单个文本字符串。")]),e._v(" "),t("div",{staticClass:"language-c# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('string message = $"{greeting} {firstName}!";\n')])])])])]),e._v(" "),t("h3",{attrs:{id:"引用类型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#引用类型"}},[e._v("#")]),e._v(" 引用类型")]),e._v(" "),t("p",[e._v("C# 中有两种类型："),t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/keywords/reference-types",target:"_blank",rel:"noopener noreferrer"}},[e._v("引用类型"),t("OutboundLink")],1),e._v("和"),t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/value-types",target:"_blank",rel:"noopener noreferrer"}},[e._v("值类型"),t("OutboundLink")],1),e._v("。引用类型的变量存储对其数据（对象）的引用，而值类型的变量直接包含其数据。")]),e._v(" "),t("h4",{attrs:{id:"数组"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数组"}},[e._v("#")]),e._v(" 数组")]),e._v(" "),t("p",[e._v("可以将同一类型的多个变量存储在一个"),t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/arrays",target:"_blank",rel:"noopener noreferrer"}},[e._v("数组"),t("OutboundLink")],1),e._v("数据结构中。")]),e._v(" "),t("div",{staticClass:"language-c# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("int[] array1 = new int[5];\nint[] array2 = [1, 2, 3, 4, 5, 6];\n")])])]),t("h2",{attrs:{id:"二、语句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、语句"}},[e._v("#")]),e._v(" 二、语句")]),e._v(" "),t("h3",{attrs:{id:"选择语句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#选择语句"}},[e._v("#")]),e._v(" 选择语句")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/statements/selection-statements#the-if-statement",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("if")]),t("OutboundLink")],1),e._v("、"),t("code",[e._v("if-else")]),e._v(" 和 "),t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/statements/selection-statements#the-switch-statement",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("switch")]),t("OutboundLink")],1),e._v(" 语句根据表达式的值从多个可能的语句选择要执行的路径。")]),e._v(" "),t("div",{staticClass:"language-c# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('if (total > 14)\n{\n    Console.WriteLine("You win!");\n}\n')])])]),t("p",[t("code",[e._v("switch")]),e._v(" 语句根据与匹配表达式匹配的模式来选择要执行的语句列表。")]),e._v(" "),t("div",{staticClass:"language-c# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('switch (fruit)\n{\n    case "apple":\n        Console.WriteLine($"App will display information for apple.");\n        break;\n\n    case "banana":\n        Console.WriteLine($"App will display information for banana.");\n        break;\n\n    default:\n        Console.WriteLine($"App will display information for default.");\n        break;\n}\n')])])]),t("h3",{attrs:{id:"迭代语句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#迭代语句"}},[e._v("#")]),e._v(" 迭代语句")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/statements/iteration-statements",target:"_blank",rel:"noopener noreferrer"}},[e._v("迭代语句"),t("OutboundLink")],1),e._v("重复执行语句或语句块。")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/statements/iteration-statements#the-for-statement",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("for")]),t("OutboundLink")],1),e._v(" 语句在指定的布尔表达式的计算结果为 "),t("code",[e._v("true")]),e._v(" 时，会执行一条语句或一个语句块。")]),e._v(" "),t("div",{staticClass:"language-c# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("for (int i = 0; i < 3; i++)\n{\n    Console.Write(i);\n}\n")])])]),t("p",[t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/statements/iteration-statements#the-foreach-statement",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("foreach")]),t("OutboundLink")],1),e._v(" 语句提供一种简单、明了的方法来循环访问数组的元素。")]),e._v(" "),t("div",{staticClass:"language-c# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('string[] names = ["Rowena", "Robin", "Bao"];\nforeach (string name in names)\n{\n    Console.WriteLine(name);\n}\n')])])]),t("h2",{attrs:{id:"三、linq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、linq"}},[e._v("#")]),e._v(" 三、LINQ")]),e._v(" "),t("p",[e._v("语言集成查询 "),t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/csharp/linq/",target:"_blank",rel:"noopener noreferrer"}},[e._v("LINQ"),t("OutboundLink")],1),e._v(" 是一系列直接将查询功能集成到 C# 语言的技术统称，提供"),t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/standard/linq/#language-level-query-syntax",target:"_blank",rel:"noopener noreferrer"}},[e._v("语言级查询"),t("OutboundLink")],1),e._v("功能和高阶函数 API。")]),e._v(" "),t("ul",[t("li",[t("p",[t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/standard/linq/#language-level-query-syntax",target:"_blank",rel:"noopener noreferrer"}},[e._v("语言级查询"),t("OutboundLink")],1)]),e._v(" "),t("div",{staticClass:"language-c# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("var parts = from x in salesOrderItems\n            where salesOrderItems.FindIndex(z => z.PartNumber == x.PartNumber) == salesOrderItems.IndexOf(x)\n            select x;\n")])])])]),e._v(" "),t("li",[t("p",[t("code",[e._v("IEnumerable<T>")]),e._v(" API")]),e._v(" "),t("div",{staticClass:"language-c# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("var parts = salesOrderItems\n    .Where((x, i) => salesOrderItems.FindIndex(z => z.PartNumber == x.PartNumber) == i)\n    .ToList();\n")])])])])]),e._v(" "),t("h3",{attrs:{id:"排序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#排序"}},[e._v("#")]),e._v(" 排序")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/csharp/linq/standard-query-operators/sorting-data",target:"_blank",rel:"noopener noreferrer"}},[e._v("排序"),t("OutboundLink")],1),e._v("操作基于一个或多个属性对序列的元素进行排序。第一个排序条件对元素执行主要排序。通过指定第二个排序条件，可以对每个主要排序组内的元素进行排序。")]),e._v(" "),t("div",{staticClass:"language-c# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("var salesOrderItems = salesOrderItems\n    .OrderByDescending(x => x.OrderDate)\n    .ThenBy(x => x.SalesOrderNumber)\n    .ThenBy(x=> x.SalesItemNumber)\n    .ToList();\n")])])]),t("h3",{attrs:{id:"分组"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分组"}},[e._v("#")]),e._v(" 分组")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/csharp/linq/standard-query-operators/grouping-data",target:"_blank",rel:"noopener noreferrer"}},[e._v("分组"),t("OutboundLink")],1),e._v("是指将数据分到不同的组，使每组中的元素拥有公共的属性。")]),e._v(" "),t("div",{staticClass:"language-c# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('var parts = salesOrderItems\n    .Where(s => s.Status == "NOT REVIEWED")\n    .Where(s => s.OrderItemLinks == null || !s.OrderItemLinks.Any())\n    .GroupBy(s => new { s.PartNumber, s.PartType })\n    .Select(g => g.First())\n    .ToList();\n')])])]),t("h2",{attrs:{id:"四、异步"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、异步"}},[e._v("#")]),e._v(" 四、异步")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/csharp/asynchronous-programming/",target:"_blank",rel:"noopener noreferrer"}},[e._v("异步编程"),t("OutboundLink")],1),e._v("的核心是 "),t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("Task")]),t("OutboundLink")],1),e._v(" 和 "),t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/api/system.threading.tasks.task-1",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("Task<T>")]),t("OutboundLink")],1),e._v(" 对象，这两个对象对异步操作建模。它们受关键字 "),t("code",[e._v("async")]),e._v(" 和 "),t("code",[e._v("await")]),e._v(" 的支持。")]),e._v(" "),t("h3",{attrs:{id:"io-绑定"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#io-绑定"}},[e._v("#")]),e._v(" IO 绑定")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/csharp/asynchronous-programming/async-scenarios#io-bound-example-download-data-from-a-web-service",target:"_blank",rel:"noopener noreferrer"}},[e._v("IO 绑定"),t("OutboundLink")],1),e._v("主要指的是那些需要等待外部资源的操作，如文件系统、数据库、网络请求等。")]),e._v(" "),t("div",{staticClass:"language-c# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('// 异步调用并等待异步方法执行完成\nawait MyAsyncMethod();\nConsole.WriteLine("主线程继续执行。");\nConsole.ReadLine();\n\nstatic async Task MyAsyncMethod()\n{\n    // 模拟异步操作，比如网络请求或者文件读取\n    await Task.Delay(2000);  // 两秒钟的延迟\n    Console.WriteLine("异步方法执行完成。");\n}\n')])])]),t("p",[e._v("当 "),t("code",[e._v("await Task.Delay(2000)")]),e._v(" 执行时，它实际上会立即返回一个任务给调用者，并且主线程可以继续处理其他任务或保持响应状态，而不需要等待 2 秒钟。")]),e._v(" "),t("p",[e._v("在等待期间，主线程是空闲的，它可以继续处理其他操作，比如用户输入、UI 更新等。")]),e._v(" "),t("p",[e._v("等待结束后，当 "),t("code",[e._v("Task.Delay(2000)")]),e._v(" 完成时，控制权返回到 "),t("code",[e._v("MyAsyncMethod")]),e._v(" 并继续执行后面的代码。")]),e._v(" "),t("h3",{attrs:{id:"cpu-绑定"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cpu-绑定"}},[e._v("#")]),e._v(" CPU 绑定")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/csharp/asynchronous-programming/async-scenarios#cpu-bound-example-perform-a-calculation-for-a-game",target:"_blank",rel:"noopener noreferrer"}},[e._v("CPU 绑定"),t("OutboundLink")],1),e._v("主要指的是那些需要大量计算的操作，比如复杂的数学计算、数据处理等。")]),e._v(" "),t("div",{staticClass:"language-c# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('// 异步调用并等待异步方法执行完成\nint result = await CalculateFactorialAsync(10);\nConsole.WriteLine($"Factorial of 10 is {result}");\nConsole.ReadLine();\n\nstatic async Task<int> CalculateFactorialAsync(int number)\n{\n    // 使用 Task.Run 在后台线程中执行 CPU 绑定操作\n    return await Task.Run(() => CalculateFactorial(number));\n}\n\nstatic int CalculateFactorial(int number)\n{\n    int result = 1;\n    for (int i = 1; i <= number; i++)\n    {\n        result *= i;\n    }\n    return result;\n}\n')])])]),t("h3",{attrs:{id:"异常处理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#异常处理"}},[e._v("#")]),e._v(" 异常处理")]),e._v(" "),t("p",[e._v("在异步编程中，"),t("code",[e._v("async")]),e._v(" 方法通常返回 "),t("code",[e._v("Task")]),e._v(" 或 "),t("code",[e._v("Task<T>")]),e._v("，这使得调用方可以等待它们完成并处理可能的异常。")]),e._v(" "),t("p",[e._v("当 "),t("code",[e._v("async")]),e._v(" 方法返回 "),t("code",[e._v("void")]),e._v(" 时，异常处理会变得复杂，因为调用方无法直接捕获这些异常。")]),e._v(" "),t("div",{staticClass:"language-c# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('// 调用无法捕获异常\ntry\n{\n    DoSomethingAsync();\n}\ncatch (Exception ex)\n{\n    Console.WriteLine("Exception caught: " + ex.Message);\n}\n\nasync void DoSomethingAsync()\n{\n    // 可能抛出异常\n    await Task.Delay(1000);\n    throw new Exception("Something went wrong!");\n}\n')])])]),t("p",[e._v("推荐的做法："),t("code",[e._v("async Task")]),e._v("。")]),e._v(" "),t("div",{staticClass:"language-c# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('// 调用可以捕获异常\ntry\n{\n    await DoSomethingAsync();\n}\ncatch (Exception ex)\n{\n    Console.WriteLine("Exception caught: " + ex.Message);\n}\n\nasync Task DoSomethingAsync()\n{\n    // 可能抛出异常\n    await Task.Delay(1000);\n    throw new Exception("Something went wrong!");\n}\n')])])]),t("h3",{attrs:{id:"异步机制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#异步机制"}},[e._v("#")]),e._v(" 异步机制")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://learn.microsoft.com/zh-cn/dotnet/csharp/language-reference/operators/await",target:"_blank",rel:"noopener noreferrer"}},[t("code",[e._v("await")]),t("OutboundLink")],1),e._v(" 内部维护了一个状态机，当主线程运行到 "),t("code",[e._v("await")]),e._v(" 时，如果等待的任务尚未完成，方法会返回一个未完成的任务，并释放当前线程。状态机保存当前的执行位置。")]),e._v(" "),t("p",[e._v("当异步操作完成时，状态机会尝试在捕获的同步上下文中恢复执行后续代码。如果没有特定的同步上下文，代码将在线程池线程中继续执行。")])])}),[],!1,null,null,null);t.default=n.exports}}]);