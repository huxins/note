(window.webpackJsonp=window.webpackJsonp||[]).push([[231],{544:function(s,t,a){"use strict";a.r(t);var e=a(27),r=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"sed"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sed"}},[s._v("#")]),s._v(" Sed")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.gnu.org/software/sed/manual/html_node/index.html",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("sed")]),t("OutboundLink")],1),s._v(" 是一种流编辑器，用于对文本文件进行解析和编辑操作。它基于早期的 "),t("code",[s._v("ed")]),s._v(" 编辑器，采用了非交互的流式操作方式。")]),s._v(" "),t("p",[t("strong",[s._v("功能：")])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("文本替换")]),s._v("：对文件或输入流中的文本进行模式匹配并替换。")]),s._v(" "),t("li",[t("strong",[s._v("文本删除")]),s._v("：删除匹配的行或特定的部分。")]),s._v(" "),t("li",[t("strong",[s._v("文本插入")]),s._v("：在特定位置插入新内容。")]),s._v(" "),t("li",[t("strong",[s._v("文本选择")]),s._v("：仅处理特定行的文本。")]),s._v(" "),t("li",[t("strong",[s._v("格式转换")]),s._v("：结合正则表达式，完成复杂的文本格式转换。")])]),s._v(" "),t("h2",{attrs:{id:"一、选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、选项"}},[s._v("#")]),s._v(" 一、选项")]),s._v(" "),t("ul",[t("li",[s._v("-"),t("strong",[s._v("i")]),s._v("：直接修改文件内容。")]),s._v(" "),t("li",[s._v("-"),t("strong",[s._v("n")]),s._v("：禁止默认输出（pattern space），仅打印满足条件的内容。")]),s._v(" "),t("li",[s._v("-"),t("strong",[s._v("e")]),s._v(" "),t("em",[s._v("script")]),s._v("：支持多条编辑命令。将脚本添加到要执行的命令中，可以多次添加。")]),s._v(" "),t("li",[s._v("-"),t("strong",[s._v("E")]),s._v(", -"),t("strong",[s._v("r")]),s._v("：支持扩展正则表达式。使用扩展正则表达式而不是基本正则表达式。")])]),s._v(" "),t("h2",{attrs:{id:"二、脚本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、脚本"}},[s._v("#")]),s._v(" 二、脚本")]),s._v(" "),t("h3",{attrs:{id:"替换文本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#替换文本"}},[s._v("#")]),s._v(" 替换文本")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.gnu.org/software/sed/manual/html_node/The-_0022s_0022-Command.html",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("s")]),t("OutboundLink")],1),s._v(" 命令可以替换指定字符，并且有很多不同的选项。"),t("code",[s._v("s")]),s._v(" 命令的语法是 "),t("code",[s._v("s/regexp/replacement/flags")]),s._v("。")]),s._v(" "),t("p",[t("code",[s._v("s")]),s._v(" 命令后面可以跟零个或多个以下 "),t("a",{attrs:{href:"https://www.gnu.org/software/sed/manual/html_node/The-_0022s_0022-Command.html#index-s-command_002c-option-flags",target:"_blank",rel:"noopener noreferrer"}},[t("em",[s._v("flags")]),t("OutboundLink")],1),s._v("：")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("g")]),s._v("：将替换应用于正则表达式的所有匹配项，而不仅仅是第一个。")]),s._v(" "),t("li",[t("em",[t("strong",[s._v("number")])]),s._v("：仅替换正则表达式的第 "),t("em",[s._v("number")]),s._v(" 个匹配项。")])]),s._v(" "),t("p",[s._v("当混合 "),t("code",[s._v("g")]),s._v(" 和 "),t("em",[t("code",[s._v("number")])]),s._v(" 修饰符时，对于 GNU "),t("code",[s._v("sed")]),s._v("，忽略第 "),t("em",[s._v("number")]),s._v(" 号之前的匹配，然后匹配并替换第 "),t("em",[s._v("number")]),s._v(" 号以后的所有匹配。")]),s._v(" "),t("p",[s._v("例如，"),t("strong",[s._v("替换")]),s._v("指定字符串。仅替换每行的第一个匹配项。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/one/two/'")]),s._v(" test.txt\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/one/two/'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'one\\nthree'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("p",[s._v("例如，"),t("strong",[s._v("插入")]),s._v("指定字符串。在每一行最前面加点东西。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/^/#/'")]),s._v(" test.txt\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/^/#/'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1\\n2'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("p",[s._v("例如，"),t("strong",[s._v("插入")]),s._v("指定字符串。在每一行最后面加点东西。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/$/ --- /'")]),s._v(" test.txt\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/$/ --- /'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1\\n2'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),t("p",[s._v("例如，"),t("strong",[s._v("删除")]),s._v("指定字符串。去掉 HTML 中的所有标签。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/<[^>]*>//g'")]),s._v(" test.html\n")])])]),t("p",[s._v("例如，"),t("strong",[s._v("引用")]),s._v("替代。未转义的 "),t("code",[s._v("&")]),s._v(" 字符可以替代整个匹配部分。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("seq")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/3/[&]/g'")]),s._v("\n")])])]),t("h3",{attrs:{id:"删除行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除行"}},[s._v("#")]),s._v(" 删除行")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.gnu.org/software/sed/manual/html_node/Common-Commands.html#index-d-_0028delete_0029-command",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("d")]),t("OutboundLink")],1),s._v(" 命令删除匹配的整个 pattern space。")]),s._v(" "),t("p",[s._v("例如，删除第三行。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("seq")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" 3d\n")])])]),t("p",[s._v("例如，删除匹配模式的行。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("seq")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/^3/d'")]),s._v("\n")])])]),t("h3",{attrs:{id:"插入行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#插入行"}},[s._v("#")]),s._v(" 插入行")]),s._v(" "),t("p",[t("code",[s._v("a")]),s._v(" 命令在行后插入文本。")]),s._v(" "),t("p",[s._v("例如，在第三行后插入文本。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("seq")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3a append'")]),s._v("\n")])])]),t("p",[t("code",[s._v("i")]),s._v(" 命令在行前插入文本。")]),s._v(" "),t("p",[s._v("例如，在第三行前插入文本。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("seq")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3i insert'")]),s._v("\n")])])]),t("h3",{attrs:{id:"跳过行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#跳过行"}},[s._v("#")]),s._v(" 跳过行")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.gnu.org/software/sed/manual/html_node/Common-Commands.html#index-n-_0028next_002dline_0029-command",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("n")]),t("OutboundLink")],1),s._v(" 命令用下一行输入替换 pattern space。如果未禁用自动打印，则打印模式空间，然后无论如何都将模式空间替换为下一行输入。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("seq")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'n;n;s/./x/'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("seq")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'n;n;s/./x/;p'")]),s._v("\n")])])]),t("p",[t("a",{attrs:{href:"https://www.gnu.org/software/sed/manual/html_node/Other-Commands.html#index-N-_0028append-Next-line_0029-command",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("N")]),t("OutboundLink")],1),s._v(" 命令在 pattern space 中添加换行符，然后将下一行输入附加到 pattern space。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("seq")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'N;a #'")]),s._v("\n")])])]),t("h3",{attrs:{id:"替换行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#替换行"}},[s._v("#")]),s._v(" 替换行")]),s._v(" "),t("p",[t("code",[s._v("c")]),s._v(" 命令用文本替换匹配行。")]),s._v(" "),t("p",[s._v("例如，替换第三行内容。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("seq")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3c 66'")]),s._v("\n")])])]),t("h3",{attrs:{id:"打印特定行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#打印特定行"}},[s._v("#")]),s._v(" 打印特定行")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.gnu.org/software/sed/manual/html_node/Common-Commands.html#index-p-_0028print_0029-command",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("p")]),t("OutboundLink")],1),s._v(" 命令打印匹配的模式空间。可以作为 "),t("code",[s._v("grep")]),s._v(" 式的命令。")]),s._v(" "),t("p",[s._v("例如，打印第三行内容。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("seq")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" 3p\n")])])]),t("p",[s._v("例如，打印匹配的行。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("seq")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/^3/p'")]),s._v("\n")])])]),t("h3",{attrs:{id:"组合命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#组合命令"}},[s._v("#")]),s._v(" 组合命令")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.gnu.org/software/sed/manual/html_node/Common-Commands.html#index-_007b_007d-command-grouping",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("{ *cmd ; cmd ...* }")]),t("OutboundLink")],1),s._v(" 将多个命令组合在一起。")]),s._v(" "),t("p",[s._v("例如，执行替换然后打印第二个输入行。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("seq")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'2{s/2/X/ ; p}'")]),s._v("\n")])])]),t("h3",{attrs:{id:"多命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#多命令"}},[s._v("#")]),s._v(" 多命令")]),s._v(" "),t("p",[s._v("有几种方法可以在 "),t("code",[s._v("sed")]),s._v(" 程序中指定多个命令。")]),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("换行符")]),s._v("：在命令行上，所有 "),t("code",[s._v("sed")]),s._v(" 命令都可以用换行符分隔。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("seq")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1d\n3d\n5d'")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("-e 选项")]),s._v("：可以将每个命令指定为 "),t("code",[s._v("-e")]),s._v(" 选项的参数。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("seq")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" 1d "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" 3d "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" 5d\n")])])])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("分号")]),s._v("：可用于分隔最简单的命令。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("seq")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1d;3d;5d'")]),s._v("\n")])])])])]),s._v(" "),t("h2",{attrs:{id:"三、hold-space"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、hold-space"}},[s._v("#")]),s._v(" 三、Hold space")]),s._v(" "),t("p",[s._v("当 "),t("code",[s._v("sed")]),s._v(" 一行一行的读取文件，正在读取的当前行会被插入到 "),t("code",[s._v("pattern space")]),s._v("。"),t("code",[s._v("pattern space")]),s._v(" 像是一个临时的缓冲区，即存储当前信息的暂存器。")]),s._v(" "),t("p",[t("code",[s._v("hold space")]),s._v(" 像一个长期储存，你可以将你获取的一些东西储存到其中然后待会在 "),t("code",[s._v("sed")]),s._v(" 处理别的行的时候再取出来用，你不能直接对 "),t("code",[s._v("hold space")]),s._v(" 进行操作，取而代之的是将他的内容复制或添加到 "),t("code",[s._v("pattern space")]),s._v("。")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://www.gnu.org/software/sed/manual/html_node/Other-Commands.html#index-g-_0028get_0029-command",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("g")]),t("OutboundLink")],1),s._v(" 命令：将模式空间的内容替换为保持空间的内容。")]),s._v(" "),t("li",[t("a",{attrs:{href:"https://www.gnu.org/software/sed/manual/html_node/Other-Commands.html#index-G-_0028appending-Get_0029-command",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("G")]),t("OutboundLink")],1),s._v(" 命令：将换行符附加到模式空间，然后将保留空间的内容附加到模式空间。")]),s._v(" "),t("li",[t("a",{attrs:{href:"https://www.gnu.org/software/sed/manual/html_node/Other-Commands.html#index-h-_0028hold_0029-command",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("h")]),t("OutboundLink")],1),s._v(" 命令：将保持空间的内容替换为模式空间的内容。")]),s._v(" "),t("li",[t("a",{attrs:{href:"https://www.gnu.org/software/sed/manual/html_node/Other-Commands.html#index-H-_0028append-Hold_0029-command",target:"_blank",rel:"noopener noreferrer"}},[t("code",[s._v("H")]),t("OutboundLink")],1),s._v(" 命令：将换行符附加到保持空间，然后将模式空间的内容附加到保持空间。")]),s._v(" "),t("li",[t("a",{attrs:{href:"https://www.gnu.org/software/sed/manual/html_node/Other-Commands.html#index-x-_0028eXchange_0029-command",target:"_blank",rel:"noopener noreferrer"}},[s._v("x"),t("OutboundLink")],1),s._v(" 命令：交换保持空间和模式空间的内容。")])]),s._v(" "),t("p",[s._v("例如，反序文件的行。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"one '),t("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("two "),t("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v('three"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1!G;h;$!d'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"one '),t("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("two "),t("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v('three"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1!G;h;$p'")]),s._v("\n")])])]),t("h2",{attrs:{id:"四、指定行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、指定行"}},[s._v("#")]),s._v(" 四、指定行")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.gnu.org/software/sed/manual/html_node/Addresses-overview.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("地址"),t("OutboundLink")],1),s._v("决定了 "),t("code",[s._v("sed")]),s._v(" 命令将在哪一行执行。如果没有给出地址，则在所有行上执行该命令。")]),s._v(" "),t("h3",{attrs:{id:"通过数字选择行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过数字选择行"}},[s._v("#")]),s._v(" 通过数字选择行")]),s._v(" "),t("p",[s._v("以下命令仅在第 3 行将单词替换。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3s/one/two/g'")]),s._v(" test.txt\n")])])]),t("p",[s._v("地址范围用逗号（"),t("code",[s._v(",")]),s._v("）分隔的两个地址指定。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3,6s/one/two/g'")]),s._v(" test.txt\n")])])]),t("p",[t("code",[s._v("sed")]),s._v(" 脚本中的地址可以是以下任何一种形式：")]),s._v(" "),t("ul",[t("li",[t("em",[t("strong",[s._v("number")])]),s._v("：指定行号将仅匹配输入中的该行。")]),s._v(" "),t("li",[t("strong",[s._v("$")]),s._v("：此地址匹配最后一个输入文件的最后一行。")])]),s._v(" "),t("h3",{attrs:{id:"通过文本匹配选择行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过文本匹配选择行"}},[s._v("#")]),s._v(" 通过文本匹配选择行")]),s._v(" "),t("p",[s._v("以下命令仅在包含字符串 '3' 时，将 '6' 替换为 '5'。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"136 '),t("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("146 "),t("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("156 "),t("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v('163"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/3/s/6/5/g'")]),s._v("\n")])])]),t("h3",{attrs:{id:"否定匹配"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#否定匹配"}},[s._v("#")]),s._v(" 否定匹配")]),s._v(" "),t("p",[s._v("在命令字母之前，附加 "),t("code",[s._v("!")]),s._v(" 字符作否定。")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"136 '),t("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("146 "),t("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v("156 "),t("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[s._v("\\n")]),s._v('163"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/3/!s/6/5/g'")]),s._v("\n")])])]),t("h2",{attrs:{id:"五、正则表达式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#五、正则表达式"}},[s._v("#")]),s._v(" 五、正则表达式")]),s._v(" "),t("h3",{attrs:{id:"反向引用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#反向引用"}},[s._v("#")]),s._v(" 反向引用")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://www.gnu.org/software/sed/manual/html_node/Back_002dreferences-and-Subexpressions.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("反向引用"),t("OutboundLink")],1),s._v("是正则表达式命令，它引用匹配的正则表达式的前一部分。")]),s._v(" "),t("p",[s._v("反向引用用反斜杠和一个数字指定（如 "),t("code",[s._v("\\1")]),s._v("）。他们引用的正则表达式部分称为子表达式，并用括号指定。整个匹配部分用未转义的 "),t("code",[s._v("&")]),s._v(" 字符指定。")]),s._v(" "),t("p",[s._v("反向引用和子表达式用于两种情况：正则表达式搜索模式和 "),t("code",[s._v("s")]),s._v(" 命令的替换部分。")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("正则表达式搜索模式：")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("seq")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("666")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-E")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-n")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/^3(6)\\1$/p'")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[t("code",[s._v("s")]),s._v(" 命令：")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("seq")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("666")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-E")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/^66(6)$/&:last is:\\1/g'")]),s._v("\n")])])])])]),s._v(" "),t("h2",{attrs:{id:"reference"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#reference"}},[s._v("#")]),s._v(" Reference")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://coolshell.cn/articles/9104.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("SED 简明教程 - 酷壳"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=r.exports}}]);