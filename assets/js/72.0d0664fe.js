(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{385:function(t,s,r){"use strict";r.r(s);var a=r(27),e=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"树结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#树结构"}},[t._v("#")]),t._v(" 树结构")]),t._v(" "),s("h2",{attrs:{id:"一、二叉搜索树"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、二叉搜索树"}},[t._v("#")]),t._v(" 一、二叉搜索树")]),t._v(" "),s("p",[t._v("二叉搜索树（BST）满足以下结构特性：")]),t._v(" "),s("ul",[s("li",[t._v("任意节点的左子树非空时，其所有节点值均小于根节点值；")]),t._v(" "),s("li",[t._v("任意节点的右子树非空时，其所有节点值均大于根节点值；")]),t._v(" "),s("li",[t._v("该性质递归适用于每个节点的左右子树。")])]),t._v(" "),s("div",{staticClass:"language-mermaid extra-class"},[s("pre",{pre:!0,attrs:{class:"language-mermaid"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("graph")]),t._v(" TD\n    4"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("((4))")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" 2"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("((2))")]),t._v("\n    4 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" 6"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("((6))")]),t._v("\n    2 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" 1"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("((1))")]),t._v("\n    2 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" 3"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("((3))")]),t._v("\n    6 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" 5"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("((5))")]),t._v("\n    6 "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" 7"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("((7))")]),t._v("\n")])])]),s("p",[t._v("在标准 BST 中，查询时间复杂度与目标节点的深度正相关。当树结构退化为链式结构时，最坏情况时间复杂度将上升至 O(n)。")]),t._v(" "),s("div",{staticClass:"language-mermaid extra-class"},[s("pre",{pre:!0,attrs:{class:"language-mermaid"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("graph")]),t._v(" TD\n  root"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(5)")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" L"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(4)")]),t._v("\n  L "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" LL"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(3)")]),t._v("\n  LL "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" LLL"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(2)")]),t._v("\n  LLL "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" LLLL"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(1)")]),t._v("\n")])])]),s("p",[t._v("为解决该效率问题，衍生出平衡二叉搜索树结构，其通过动态调整维持近似平衡的树形结构（各子树高度差受限），从而确保查询、插入、删除等操作的最坏时间复杂度稳定在 O(log n)。")]),t._v(" "),s("p",[t._v("这种平衡机制通过旋转、重构等操作实现，典型实现包括 AVL 树、红黑树等。")]),t._v(" "),s("h2",{attrs:{id:"二、平衡二叉搜索树"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、平衡二叉搜索树"}},[t._v("#")]),t._v(" 二、平衡二叉搜索树")]),t._v(" "),s("p",[t._v("自平衡二叉搜索树在符合二叉搜索树的条件下，所有叶子的深度趋于平衡。")]),t._v(" "),s("p",[s("strong",[t._v("AVL 平衡树")]),t._v("：")]),t._v(" "),s("div",{staticClass:"language-mermaid extra-class"},[s("pre",{pre:!0,attrs:{class:"language-mermaid"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("graph")]),t._v(" TD\n  root"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(3)")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" L"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(2)")]),t._v("\n  root"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(3)")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" R"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(5)")]),t._v("\n  L "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" LL"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(1)")]),t._v("\n  R "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" RL"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(4)")]),t._v("\n  R "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" RR"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(6)")]),t._v("\n")])])]),s("p",[s("strong",[t._v("旋转操作示例（右旋）")]),t._v("：")]),t._v(" "),s("ul",[s("li",[t._v("当节点 "),s("code",[t._v("3")]),t._v(" 的平衡因子变为 2（左子树高度 - 右子树高度 ≥ 2）")]),t._v(" "),s("li",[t._v("以节点 "),s("code",[t._v("3")]),t._v(" 为中心进行右旋重构")])]),t._v(" "),s("div",{staticClass:"language-mermaid extra-class"},[s("pre",{pre:!0,attrs:{class:"language-mermaid"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("graph")]),t._v(" TD\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("subgraph")]),t._v(" Before\n    A"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(5)")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" B"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(4)")]),t._v("\n    B "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" C"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(3)")]),t._v("\n    C "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" D"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(2)")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("subgraph")]),t._v(" After\n    X"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(3)")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" Y"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(2)")]),t._v("\n    X "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" Z"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(5)")]),t._v("\n    Z "),s("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" W"),s("span",{pre:!0,attrs:{class:"token text string"}},[t._v("(4)")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("end")]),t._v("\n")])])]),s("h2",{attrs:{id:"三、多路平衡查找树"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、多路平衡查找树"}},[t._v("#")]),t._v(" 三、多路平衡查找树")]),t._v(" "),s("h3",{attrs:{id:"b-树"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#b-树"}},[t._v("#")]),t._v(" B 树")]),t._v(" "),s("p",[t._v("磁盘数据读取以"),s("strong",[t._v("磁盘块")]),t._v("为基本单位，单次读取会加载整个块的数据。")]),t._v(" "),s("p",[t._v("B-tree 通过组织数据结构，使每个磁盘块中的键值能高效定位目标记录，从而减少磁盘 I/O 次数。")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("数据记录结构")])]),t._v(" "),s("p",[t._v("每条记录表示为二元组 "),s("code",[t._v("[key, data]")]),t._v("。")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("key")]),t._v("：唯一标识记录的主键（Primary Key）")]),t._v(" "),s("li",[s("code",[t._v("data")]),t._v("：主键外其他字段的数据")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("m 阶 B 树性质")]),t._v("（m ≥ 3）")]),t._v(" "),s("ul",[s("li",[t._v("树形数据结构满足\n"),s("ul",[s("li",[t._v("节点最大分支数："),s("code",[t._v("m")])]),t._v(" "),s("li",[t._v("所有叶节点共层级")])])]),t._v(" "),s("li",[t._v("节点分支约束\n"),s("ul",[s("li",[t._v("根节点：非叶节点时分支数 ≥ 2")]),t._v(" "),s("li",[t._v("内部节点（非根）：分支数 ∈ [⌈m/2⌉, m]")])])])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("键值数量规则")])]),t._v(" "),s("p",[t._v("对于含 "),s("code",[t._v("k")]),t._v(" 个子节点的非叶节点：")]),t._v(" "),s("ul",[s("li",[t._v("必存储 "),s("code",[t._v("k-1")]),t._v(" 个升序排列的主键")]),t._v(" "),s("li",[t._v("键值序列建立区间映射关系，指导子树搜索路径")])])])]),t._v(" "),s("p",[t._v("B-tree 中的每个节点通过动态维护键值数量与子节点指针，实现存储空间利用率与查询效率的平衡。")]),t._v(" "),s("p",[t._v("典型 3 阶 B 树中，非根内部节点分支数稳定在 2 - 3 区间。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://img.inxiny.cn/manual/b-tree.png",alt:"B-tree"}})]),t._v(" "),s("p",[t._v("B-tree 节点采用磁盘块存储结构，每个节点包含两个按升序排列的键值（Key）和三个子树指针（Pointer）。")]),t._v(" "),s("p",[t._v("其中，指针指向子节点所在的磁盘块物理地址，键值通过三元划分（k₁ < 范围 ≤ k₂）严格界定子树数据域：")]),t._v(" "),s("p",[t._v("以根节点键值 "),s("code",[t._v("17")]),t._v(" 和 "),s("code",[t._v("35")]),t._v(" 为例，P1 子树数据域为 "),s("code",[t._v("<17")]),t._v("，P2 子树数据域为 "),s("code",[t._v("[17,35]")]),t._v("，P3 子树数据域为 "),s("code",[t._v(">35")]),t._v("。")]),t._v(" "),s("p",[t._v("相较于 AVL 树，B 树通过层级压缩显著降低节点总数，使单次磁盘 I/O 加载的节点数据得到充分利用，有效提升大规模数据查询性能。")]),t._v(" "),s("h3",{attrs:{id:"b-树-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#b-树-2"}},[t._v("#")]),t._v(" B+ 树")]),t._v(" "),s("p",[t._v("B+ 树是针对 B 树优化的外存索引结构（如 InnoDB 引擎标准实现），其核心改进在于存储分离与顺序访问优化：")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("存储架构重构")]),t._v(" "),s("ul",[s("li",[t._v("B 树节点同时存储键值（Key）与数据（Data），受限于页存储容量，导致扇出率（Fan-out）低下，数据量激增时树深度呈线性增长，I/O 复杂度升至 O(h)")]),t._v(" "),s("li",[t._v("B+ 树实施严格层级分工：非叶节点仅存键值索引，叶节点全量存储数据记录并通过双向链表串联，使非叶节点扇出率提升 4 - 10 倍（单页键值容量从 4 增至 40）")])])]),t._v(" "),s("li",[s("strong",[t._v("性能优势量化")]),t._v(" "),s("ul",[s("li",[t._v("树高度对数级压缩（如千万级数据下 B+ 树高度 3 - 4 vs B 树高度 8 - 10）")]),t._v(" "),s("li",[t._v("范围查询时间复杂度从 O(h + n) 优化至 O(log n + k)，链表结构实现顺序访问免回溯")])])])]),t._v(" "),s("p",[t._v("优化 B-tree 为 B+ tree 结构，其中非叶子节点仅存储键值及指针，假设每个磁盘块可容纳 4 个键值及指针，其优化后的结构如下图所示。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://img.inxiny.cn/manual/b+tree.png",alt:"B+tree"}})]),t._v(" "),s("p",[t._v("B+ 树索引在数据库中的实现具有以下技术特性：")]),t._v(" "),s("ul",[s("li",[s("p",[s("strong",[t._v("双指针体系与查询模式")])]),t._v(" "),s("ul",[s("li",[t._v("采用根节点指针和最小叶节点指针的双向定位机制")]),t._v(" "),s("li",[t._v("叶节点层通过双向链表构建有序环状结构")]),t._v(" "),s("li",[t._v("支持两种检索方式：基于叶链的范围/分页扫描，以及根起始的随机精确检索")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("存储结构与容量计算")])]),t._v(" "),s("ul",[s("li",[t._v("InnoDB 引擎页容量为 16 KB，按主键类型（INT = 4B / BIGINT = 8B）及指针（4 - 8B）计算")]),t._v(" "),s("li",[t._v("单页存储密度：16 KB / (8B 键值 + 8B 指针) ≈ 1K 索引项")]),t._v(" "),s("li",[t._v("三级树型结构理论存储量：10^3 × 10^3 × 10^3 = 10 亿记录")])])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("索引架构设计")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("索引类型")]),t._v(" "),s("th",[t._v("存储结构")]),t._v(" "),s("th",[t._v("数据关联机制")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("聚集索引")]),t._v(" "),s("td",[t._v("叶节点直接驻留数据页")]),t._v(" "),s("td",[t._v("主键与行记录物理存储一致")])]),t._v(" "),s("tr",[s("td",[t._v("辅助索引")]),t._v(" "),s("td",[t._v("叶节点存储主键引用")]),t._v(" "),s("td",[t._v("二次查询机制：辅助索引 → 主键 → 聚集索引")])])])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);