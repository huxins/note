(window.webpackJsonp=window.webpackJsonp||[]).push([[222],{535:function(s,a,e){"use strict";e.r(a);var t=e(27),r=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"shadow-utils"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shadow-utils"}},[s._v("#")]),s._v(" Shadow-utils")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/shadow-maint/shadow",target:"_blank",rel:"noopener noreferrer"}},[a("code",[s._v("shadow-utils")]),a("OutboundLink")],1),s._v(" 包含用于将 UNIX 密码文件转换为影子密码格式的必要程序，以及用于管理用户和组账户的工具。")]),s._v(" "),a("h2",{attrs:{id:"一、用户账户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、用户账户"}},[s._v("#")]),s._v(" 一、用户账户")]),s._v(" "),a("h3",{attrs:{id:"新增用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新增用户"}},[s._v("#")]),s._v(" 新增用户")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://manpages.debian.org/bookworm/passwd/useradd.8.en.html",target:"_blank",rel:"noopener noreferrer"}},[a("code",[s._v("useradd")]),a("OutboundLink")],1),s._v(" 是一个用于创建新用户的命令。它会在系统中设置用户的账户信息、主目录等，并更新相关配置文件。")]),s._v(" "),a("p",[s._v("通常会影响以下文件：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("/etc/passwd")]),s._v("：存储用户的基本账户信息。")]),s._v(" "),a("li",[a("code",[s._v("/etc/shadow")]),s._v("：存储用户的密码信息。")]),s._v(" "),a("li",[a("code",[s._v("/etc/group")]),s._v("：配置用户所属的组信息。")]),s._v(" "),a("li",[a("code",[s._v("/etc/default/useradd")]),s._v("：定义 "),a("code",[s._v("useradd")]),s._v(" 的默认行为。")]),s._v(" "),a("li",[a("code",[s._v("/etc/skel/")]),s._v("：存储新用户主目录的初始文件模板。")])]),s._v(" "),a("p",[a("strong",[s._v("常用选项：")])]),s._v(" "),a("ul",[a("li",[s._v("-"),a("strong",[s._v("d")]),s._v(" "),a("em",[s._v("HOME_DIR")]),s._v("：指定用户的主目录路径。如果未指定，默认在 "),a("code",[s._v("/home/用户名")]),s._v(" 下创建。")]),s._v(" "),a("li",[s._v("-"),a("strong",[s._v("g")]),s._v(" "),a("em",[s._v("GROUP")]),s._v("：指定用户的主组（必须是已存在的组）。")]),s._v(" "),a("li",[s._v("-"),a("strong",[s._v("G")]),s._v(" "),a("em",[s._v("组列表")]),s._v("：为用户添加附加组（多个组名用逗号分隔）。")]),s._v(" "),a("li",[s._v("-"),a("strong",[s._v("m")]),s._v("：创建用户的主目录（如果不存在）。")]),s._v(" "),a("li",[s._v("-"),a("strong",[s._v("s")]),s._v(" "),a("em",[s._v("SHELL")]),s._v("：指定用户的默认登录 Shell（如 "),a("code",[s._v("/bin/bash")]),s._v("）。")]),s._v(" "),a("li",[s._v("-"),a("strong",[s._v("r")]),s._v(", --"),a("strong",[s._v("system")]),s._v("：创建系统用户（UID 通常小于 1000）。")]),s._v(" "),a("li",[s._v("-"),a("strong",[s._v("c")]),s._v(" "),a("em",[s._v("注释")]),s._v("：为用户添加注释信息（如用户全名或用途说明）。")])]),s._v(" "),a("p",[s._v("可以运行以下命令查看用户及其组的信息。")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" username\n")])])]),a("p",[s._v("也可以查看 "),a("code",[s._v("/etc/passwd")]),s._v("，是一个文本文件，描述系统的用户登录帐户。其密码已经用 "),a("code",[s._v("x")]),s._v(" 替换掉了，基于安全考虑，密码的密文存储在 "),a("code",[s._v("/etc/shadow")]),s._v(" 中。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologin\n")])])]),a("p",[s._v("例如，创建一个普通用户。")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-m")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /bin/bash alice\n")])])]),a("p",[s._v("例如，指定附加组和注释信息。")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-m")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-G")]),s._v(" sudo,kvm "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Alice Doe"')]),s._v(" alice\n")])])]),a("p",[s._v("例如，创建一个系统用户，并禁用登录功能。")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /sbin/nologin system_user\n")])])]),a("p",[a("a",{attrs:{href:"https://manpages.debian.org/bookworm/adduser/adduser.8.en.html",target:"_blank",rel:"noopener noreferrer"}},[a("code",[s._v("adduser")]),a("OutboundLink")],1),s._v(" 是用于添加新用户的命令，但与 "),a("a",{attrs:{href:"https://manpages.debian.org/bookworm/passwd/useradd.8.en.html",target:"_blank",rel:"noopener noreferrer"}},[a("code",[s._v("useradd")]),a("OutboundLink")],1),s._v(" 不同的是，"),a("code",[s._v("adduser")]),s._v(" 通常是一个 "),a("strong",[s._v("高层的、友好的脚本")]),s._v("，它通过调用底层工具（如 "),a("code",[s._v("useradd")]),s._v(" 和 "),a("code",[s._v("usermod")]),s._v("）来完成用户添加的任务。")]),s._v(" "),a("p",[a("code",[s._v("adduser")]),s._v(" 的主要功能与 "),a("code",[s._v("useradd")]),s._v(" 类似，但它更加直观且交互式。执行时，"),a("code",[s._v("adduser")]),s._v(" 通常会引导用户一步步完成新账户的配置。")]),s._v(" "),a("p",[a("strong",[s._v("常用选项：")])]),s._v(" "),a("ul",[a("li",[s._v("--"),a("strong",[s._v("home")]),s._v(" "),a("em",[s._v("dir")]),s._v("：指定用户主目录的位置。如果目录不存在，则会创建该目录。")]),s._v(" "),a("li",[s._v("--"),a("strong",[s._v("shell")]),s._v(" "),a("em",[s._v("shell")]),s._v("：指定用户默认登录的 Shell。")]),s._v(" "),a("li",[s._v("--"),a("strong",[s._v("ingroup")]),s._v(" "),a("em",[s._v("groupname")]),s._v("：指定用户所属的初始组。")]),s._v(" "),a("li",[s._v("--"),a("strong",[s._v("disabled-password")]),s._v("：创建用户时禁用密码。")]),s._v(" "),a("li",[s._v("--"),a("strong",[s._v("disabled-login")]),s._v("：创建用户时禁用登录。")]),s._v(" "),a("li",[s._v("--"),a("strong",[s._v("no-create-home")]),s._v("：不为用户创建主目录。")]),s._v(" "),a("li",[s._v("--"),a("strong",[s._v("system")]),s._v("：创建一个系统用户。")]),s._v(" "),a("li",[s._v("--"),a("strong",[s._v("comment")]),s._v(" "),a("em",[s._v("comment")]),s._v("：为生成的新条目设置注释字段。")]),s._v(" "),a("li",[s._v("--"),a("strong",[s._v("group")]),s._v("：配合 "),a("code",[s._v("--system")]),s._v(" 使用该选项表示新用户应获得一个相同名称的组作为其主要组。如果不与 "),a("code",[s._v("--system")]),s._v(" 组合，则会创建一个具有给定名称的组。")])]),s._v(" "),a("h3",{attrs:{id:"修改用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改用户"}},[s._v("#")]),s._v(" 修改用户")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://manpages.debian.org/bookworm/passwd/usermod.8.en.html",target:"_blank",rel:"noopener noreferrer"}},[a("code",[s._v("usermod")]),a("OutboundLink")],1),s._v(" 是一个用于修改现有用户账户信息的命令。")]),s._v(" "),a("p",[a("strong",[s._v("常用选项：")])]),s._v(" "),a("ul",[a("li",[s._v("-"),a("strong",[s._v("l")]),s._v(" "),a("em",[s._v("NEW_LOGIN")]),s._v("：更改用户的登录名。")]),s._v(" "),a("li",[s._v("-"),a("strong",[s._v("g")]),s._v(" "),a("em",[s._v("主组")]),s._v("：修改用户的主组。")]),s._v(" "),a("li",[s._v("-"),a("strong",[s._v("G")]),s._v(" "),a("em",[s._v("附加组")]),s._v("：设置用户的附加组（覆盖原有附加组）。")]),s._v(" "),a("li",[s._v("-"),a("strong",[s._v("a")]),s._v("：仅与 "),a("code",[s._v("-G")]),s._v(" 选项一起使用，将用户添加到指定附加组（不覆盖原有附加组）。")])]),s._v(" "),a("p",[s._v("例如，添加用户到附加组。")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("usermod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-aG")]),s._v(" additional_group username\n")])])]),a("p",[s._v("例如，使用 "),a("code",[s._v("usermod")]),s._v(" 命令移除辅助组。")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("usermod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-G")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-nG")]),s._v(" username "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("' '")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\\n'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-v")]),s._v(" group_name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tr")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'\\n'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("','")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'s/,$//'")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" username\n")])])]),a("h2",{attrs:{id:"二、组账户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、组账户"}},[s._v("#")]),s._v(" 二、组账户")]),s._v(" "),a("h3",{attrs:{id:"新增组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#新增组"}},[s._v("#")]),s._v(" 新增组")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://manpages.debian.org/bookworm/passwd/groupadd.8.en.html",target:"_blank",rel:"noopener noreferrer"}},[a("code",[s._v("groupadd")]),a("OutboundLink")],1),s._v(" 是一个用于创建用户组的命令。主要功能是添加新的用户组到系统中，同时在 "),a("code",[s._v("/etc/group")]),s._v(" 文件中记录新组的信息。")]),s._v(" "),a("p",[s._v("可以通过 "),a("code",[s._v("/etc/group")]),s._v(" 查看工作组详情，它是一个文本文件，用于定义系统上的组。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sshd:x:74:\n")])])]),a("p",[a("strong",[s._v("常用选项：")])]),s._v(" "),a("ul",[a("li",[s._v("-"),a("strong",[s._v("r")]),s._v(", --"),a("strong",[s._v("system")]),s._v("：创建一个系统组（GID 通常小于 1000）。")])]),s._v(" "),a("p",[s._v("例如，创建普通用户组。")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupadd")]),s._v(" mygroup\n")])])]),a("h3",{attrs:{id:"管理组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#管理组"}},[s._v("#")]),s._v(" 管理组")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://manpages.debian.org/bookworm/passwd/gpasswd.1.en.html",target:"_blank",rel:"noopener noreferrer"}},[a("code",[s._v("gpasswd")]),a("OutboundLink")],1),s._v(" 命令用于管理组的密码以及组成员，通常用来对 "),a("code",[s._v("/etc/group")]),s._v(" 文件进行管理。")]),s._v(" "),a("p",[a("code",[s._v("gpasswd")]),s._v(" 修改的主要文件是：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("/etc/group")]),s._v("：记录组信息，包括组名、组密码（如果设置）、GID 和组成员。")]),s._v(" "),a("li",[a("code",[s._v("/etc/gshadow")]),s._v("：组影子文件，存储组的密码和组管理员信息。")])]),s._v(" "),a("p",[s._v("例如，添加用户到组。")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("gpasswd "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v(" username groupname\n")])])]),a("p",[s._v("例如，从组中删除用户。")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("gpasswd "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" username groupname\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);