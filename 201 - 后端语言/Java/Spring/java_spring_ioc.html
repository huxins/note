<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>IoC | 偷影子的人</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="你在，春华秋实夏蝉冬雪。">
    
    <link rel="preload" href="/assets/css/0.styles.f3e2e2a4.css" as="style"><link rel="preload" href="/assets/js/app.26e764c1.js" as="script"><link rel="preload" href="/assets/js/2.fbd8ae4c.js" as="script"><link rel="preload" href="/assets/js/1.36b86acd.js" as="script"><link rel="preload" href="/assets/js/171.06c63be3.js" as="script"><link rel="prefetch" href="/assets/js/10.f9290ab4.js"><link rel="prefetch" href="/assets/js/100.382cb6e0.js"><link rel="prefetch" href="/assets/js/101.123c0127.js"><link rel="prefetch" href="/assets/js/102.634002a8.js"><link rel="prefetch" href="/assets/js/103.bc93a69d.js"><link rel="prefetch" href="/assets/js/104.03f88858.js"><link rel="prefetch" href="/assets/js/105.ea7c37c5.js"><link rel="prefetch" href="/assets/js/106.f6f31056.js"><link rel="prefetch" href="/assets/js/107.9af9d201.js"><link rel="prefetch" href="/assets/js/108.9e629ffa.js"><link rel="prefetch" href="/assets/js/109.e6132df5.js"><link rel="prefetch" href="/assets/js/11.3642076d.js"><link rel="prefetch" href="/assets/js/110.24b94b0a.js"><link rel="prefetch" href="/assets/js/111.adc17da6.js"><link rel="prefetch" href="/assets/js/112.6be94f38.js"><link rel="prefetch" href="/assets/js/113.5f067daa.js"><link rel="prefetch" href="/assets/js/114.ccdf12b3.js"><link rel="prefetch" href="/assets/js/115.2d494def.js"><link rel="prefetch" href="/assets/js/116.06327632.js"><link rel="prefetch" href="/assets/js/117.4bdef7f5.js"><link rel="prefetch" href="/assets/js/118.48bbd765.js"><link rel="prefetch" href="/assets/js/119.f5fe2448.js"><link rel="prefetch" href="/assets/js/12.d477a3d7.js"><link rel="prefetch" href="/assets/js/120.2faa0850.js"><link rel="prefetch" href="/assets/js/121.260ae837.js"><link rel="prefetch" href="/assets/js/122.91a798a4.js"><link rel="prefetch" href="/assets/js/123.883192e5.js"><link rel="prefetch" href="/assets/js/124.3055365d.js"><link rel="prefetch" href="/assets/js/125.23c33b14.js"><link rel="prefetch" href="/assets/js/126.bcc0c86f.js"><link rel="prefetch" href="/assets/js/127.610ac4e2.js"><link rel="prefetch" href="/assets/js/128.66e69a56.js"><link rel="prefetch" href="/assets/js/129.dc7e0e22.js"><link rel="prefetch" href="/assets/js/13.fdc0cb88.js"><link rel="prefetch" href="/assets/js/130.d5328c60.js"><link rel="prefetch" href="/assets/js/131.e32561c5.js"><link rel="prefetch" href="/assets/js/132.bbe59604.js"><link rel="prefetch" href="/assets/js/133.85128019.js"><link rel="prefetch" href="/assets/js/134.f3d8e386.js"><link rel="prefetch" href="/assets/js/135.2385c350.js"><link rel="prefetch" href="/assets/js/136.626375a0.js"><link rel="prefetch" href="/assets/js/137.83399c47.js"><link rel="prefetch" href="/assets/js/138.4d1e6582.js"><link rel="prefetch" href="/assets/js/139.d3efe04e.js"><link rel="prefetch" href="/assets/js/14.8652bbfc.js"><link rel="prefetch" href="/assets/js/140.c4e7fd05.js"><link rel="prefetch" href="/assets/js/141.648db750.js"><link rel="prefetch" href="/assets/js/142.d807cd59.js"><link rel="prefetch" href="/assets/js/143.ab924d26.js"><link rel="prefetch" href="/assets/js/144.b8e23446.js"><link rel="prefetch" href="/assets/js/145.4295c6ff.js"><link rel="prefetch" href="/assets/js/146.30b06925.js"><link rel="prefetch" href="/assets/js/147.3b6490b7.js"><link rel="prefetch" href="/assets/js/148.9cdf13b2.js"><link rel="prefetch" href="/assets/js/149.8d554acf.js"><link rel="prefetch" href="/assets/js/15.0924230e.js"><link rel="prefetch" href="/assets/js/150.24e6db5b.js"><link rel="prefetch" href="/assets/js/151.a10d09ac.js"><link rel="prefetch" href="/assets/js/152.bfc36b3a.js"><link rel="prefetch" href="/assets/js/153.fc589bcf.js"><link rel="prefetch" href="/assets/js/154.8f8ef57a.js"><link rel="prefetch" href="/assets/js/155.5a44283b.js"><link rel="prefetch" href="/assets/js/156.798d1c61.js"><link rel="prefetch" href="/assets/js/157.79dca306.js"><link rel="prefetch" href="/assets/js/158.1c981e76.js"><link rel="prefetch" href="/assets/js/159.1ec798ac.js"><link rel="prefetch" href="/assets/js/16.6370dde0.js"><link rel="prefetch" href="/assets/js/160.7c76094b.js"><link rel="prefetch" href="/assets/js/161.7d9200fd.js"><link rel="prefetch" href="/assets/js/162.7840af56.js"><link rel="prefetch" href="/assets/js/163.4ab2b7e3.js"><link rel="prefetch" href="/assets/js/164.9df265fb.js"><link rel="prefetch" href="/assets/js/165.c7b3aa16.js"><link rel="prefetch" href="/assets/js/166.a6c04cfb.js"><link rel="prefetch" href="/assets/js/167.428a5696.js"><link rel="prefetch" href="/assets/js/168.2df823f8.js"><link rel="prefetch" href="/assets/js/169.4b755137.js"><link rel="prefetch" href="/assets/js/17.40f5acbf.js"><link rel="prefetch" href="/assets/js/170.77002315.js"><link rel="prefetch" href="/assets/js/172.b4e0f83d.js"><link rel="prefetch" href="/assets/js/173.a316476e.js"><link rel="prefetch" href="/assets/js/174.96f2d995.js"><link rel="prefetch" href="/assets/js/175.09dfde29.js"><link rel="prefetch" href="/assets/js/176.36fac859.js"><link rel="prefetch" href="/assets/js/177.a1186054.js"><link rel="prefetch" href="/assets/js/178.6308f1c0.js"><link rel="prefetch" href="/assets/js/179.cc3c37e1.js"><link rel="prefetch" href="/assets/js/18.1198418d.js"><link rel="prefetch" href="/assets/js/180.3cdeb401.js"><link rel="prefetch" href="/assets/js/181.f6c50db1.js"><link rel="prefetch" href="/assets/js/182.b834eb68.js"><link rel="prefetch" href="/assets/js/183.2993debc.js"><link rel="prefetch" href="/assets/js/184.eb1dc8e8.js"><link rel="prefetch" href="/assets/js/185.da64597a.js"><link rel="prefetch" href="/assets/js/186.111a7473.js"><link rel="prefetch" href="/assets/js/187.c125876a.js"><link rel="prefetch" href="/assets/js/188.cf1afd07.js"><link rel="prefetch" href="/assets/js/189.1c70e820.js"><link rel="prefetch" href="/assets/js/19.9231050b.js"><link rel="prefetch" href="/assets/js/190.762c40b4.js"><link rel="prefetch" href="/assets/js/191.625ac8d4.js"><link rel="prefetch" href="/assets/js/192.4d801cde.js"><link rel="prefetch" href="/assets/js/193.7c00f9a9.js"><link rel="prefetch" href="/assets/js/194.ce783697.js"><link rel="prefetch" href="/assets/js/195.adc9f1b5.js"><link rel="prefetch" href="/assets/js/196.3106e5d2.js"><link rel="prefetch" href="/assets/js/197.b602befa.js"><link rel="prefetch" href="/assets/js/198.f92420ac.js"><link rel="prefetch" href="/assets/js/199.99a2e574.js"><link rel="prefetch" href="/assets/js/20.91723d19.js"><link rel="prefetch" href="/assets/js/200.b7d77a13.js"><link rel="prefetch" href="/assets/js/201.7baf4c1c.js"><link rel="prefetch" href="/assets/js/202.5784f1c1.js"><link rel="prefetch" href="/assets/js/203.282cbf5e.js"><link rel="prefetch" href="/assets/js/204.efe2ba54.js"><link rel="prefetch" href="/assets/js/205.ad5c2b97.js"><link rel="prefetch" href="/assets/js/206.adf8d7a2.js"><link rel="prefetch" href="/assets/js/207.0b5bc755.js"><link rel="prefetch" href="/assets/js/208.4c44730d.js"><link rel="prefetch" href="/assets/js/209.d7b7382d.js"><link rel="prefetch" href="/assets/js/21.0d839817.js"><link rel="prefetch" href="/assets/js/210.bbd7e189.js"><link rel="prefetch" href="/assets/js/211.226de5a9.js"><link rel="prefetch" href="/assets/js/212.b25f4edb.js"><link rel="prefetch" href="/assets/js/213.a780b63d.js"><link rel="prefetch" href="/assets/js/214.f72c0ebb.js"><link rel="prefetch" href="/assets/js/215.17a6b0cd.js"><link rel="prefetch" href="/assets/js/216.c35c604d.js"><link rel="prefetch" href="/assets/js/217.dbcdb695.js"><link rel="prefetch" href="/assets/js/218.8616155b.js"><link rel="prefetch" href="/assets/js/219.c1ad65f0.js"><link rel="prefetch" href="/assets/js/22.ab19b397.js"><link rel="prefetch" href="/assets/js/220.e2c3d913.js"><link rel="prefetch" href="/assets/js/221.f085f4cc.js"><link rel="prefetch" href="/assets/js/222.b3914a2d.js"><link rel="prefetch" href="/assets/js/223.cc42d467.js"><link rel="prefetch" href="/assets/js/224.4446c0bf.js"><link rel="prefetch" href="/assets/js/225.889f1eef.js"><link rel="prefetch" href="/assets/js/226.80465316.js"><link rel="prefetch" href="/assets/js/227.bef2a223.js"><link rel="prefetch" href="/assets/js/228.3a4308a7.js"><link rel="prefetch" href="/assets/js/229.ab7cc470.js"><link rel="prefetch" href="/assets/js/23.93221970.js"><link rel="prefetch" href="/assets/js/230.4ca71f69.js"><link rel="prefetch" href="/assets/js/231.4082a004.js"><link rel="prefetch" href="/assets/js/232.f9b10ab6.js"><link rel="prefetch" href="/assets/js/233.6786a66b.js"><link rel="prefetch" href="/assets/js/234.57fbadfb.js"><link rel="prefetch" href="/assets/js/235.ae63d43d.js"><link rel="prefetch" href="/assets/js/236.332b4a3c.js"><link rel="prefetch" href="/assets/js/237.9cd3c9d1.js"><link rel="prefetch" href="/assets/js/238.93d504a0.js"><link rel="prefetch" href="/assets/js/239.6bf3284a.js"><link rel="prefetch" href="/assets/js/24.53be4ac8.js"><link rel="prefetch" href="/assets/js/240.718fdeba.js"><link rel="prefetch" href="/assets/js/241.34bf3b89.js"><link rel="prefetch" href="/assets/js/242.370557f4.js"><link rel="prefetch" href="/assets/js/243.1d29714a.js"><link rel="prefetch" href="/assets/js/244.c7b7f215.js"><link rel="prefetch" href="/assets/js/245.ac7d9a97.js"><link rel="prefetch" href="/assets/js/246.9dae41bc.js"><link rel="prefetch" href="/assets/js/247.847b1250.js"><link rel="prefetch" href="/assets/js/248.ee784f98.js"><link rel="prefetch" href="/assets/js/249.d9fcacc2.js"><link rel="prefetch" href="/assets/js/25.6a759ded.js"><link rel="prefetch" href="/assets/js/250.07fdf8d9.js"><link rel="prefetch" href="/assets/js/251.f8aef33d.js"><link rel="prefetch" href="/assets/js/252.422eaba4.js"><link rel="prefetch" href="/assets/js/253.9096defe.js"><link rel="prefetch" href="/assets/js/254.82542457.js"><link rel="prefetch" href="/assets/js/255.d7db3f0f.js"><link rel="prefetch" href="/assets/js/256.558f82e7.js"><link rel="prefetch" href="/assets/js/257.1621b7a7.js"><link rel="prefetch" href="/assets/js/258.66be29ca.js"><link rel="prefetch" href="/assets/js/259.19940ba0.js"><link rel="prefetch" href="/assets/js/26.73aa3261.js"><link rel="prefetch" href="/assets/js/260.5ed3ac15.js"><link rel="prefetch" href="/assets/js/261.0e7955f5.js"><link rel="prefetch" href="/assets/js/262.aa4f6899.js"><link rel="prefetch" href="/assets/js/263.3b4e7d7e.js"><link rel="prefetch" href="/assets/js/264.86766e96.js"><link rel="prefetch" href="/assets/js/265.12450c37.js"><link rel="prefetch" href="/assets/js/266.42c1c8b6.js"><link rel="prefetch" href="/assets/js/267.0a9d5170.js"><link rel="prefetch" href="/assets/js/268.0f9f3e97.js"><link rel="prefetch" href="/assets/js/269.e6119111.js"><link rel="prefetch" href="/assets/js/27.2ecebcaf.js"><link rel="prefetch" href="/assets/js/270.2d434d07.js"><link rel="prefetch" href="/assets/js/28.8c3e8d4d.js"><link rel="prefetch" href="/assets/js/29.aea3f323.js"><link rel="prefetch" href="/assets/js/3.39db2c88.js"><link rel="prefetch" href="/assets/js/30.7b5bdb01.js"><link rel="prefetch" href="/assets/js/31.eeb80769.js"><link rel="prefetch" href="/assets/js/32.3df9ee43.js"><link rel="prefetch" href="/assets/js/33.06f8435e.js"><link rel="prefetch" href="/assets/js/34.b26af0b3.js"><link rel="prefetch" href="/assets/js/35.0e2b9e77.js"><link rel="prefetch" href="/assets/js/36.df007a94.js"><link rel="prefetch" href="/assets/js/37.1114c553.js"><link rel="prefetch" href="/assets/js/38.86d8a338.js"><link rel="prefetch" href="/assets/js/39.0cd99bce.js"><link rel="prefetch" href="/assets/js/4.88a56df4.js"><link rel="prefetch" href="/assets/js/40.7be0da80.js"><link rel="prefetch" href="/assets/js/41.50cbfed9.js"><link rel="prefetch" href="/assets/js/42.a8ee22a7.js"><link rel="prefetch" href="/assets/js/43.8c067420.js"><link rel="prefetch" href="/assets/js/44.fd647e60.js"><link rel="prefetch" href="/assets/js/45.93e9e590.js"><link rel="prefetch" href="/assets/js/46.54e7a19c.js"><link rel="prefetch" href="/assets/js/47.b689b004.js"><link rel="prefetch" href="/assets/js/48.c227e546.js"><link rel="prefetch" href="/assets/js/49.f7843907.js"><link rel="prefetch" href="/assets/js/5.b7f90e93.js"><link rel="prefetch" href="/assets/js/50.dc8352d2.js"><link rel="prefetch" href="/assets/js/51.222af0e8.js"><link rel="prefetch" href="/assets/js/52.3737e9a2.js"><link rel="prefetch" href="/assets/js/53.8b6c114b.js"><link rel="prefetch" href="/assets/js/54.032ff63e.js"><link rel="prefetch" href="/assets/js/55.8bf50a38.js"><link rel="prefetch" href="/assets/js/56.64d6453f.js"><link rel="prefetch" href="/assets/js/57.577425b0.js"><link rel="prefetch" href="/assets/js/58.efbb78fe.js"><link rel="prefetch" href="/assets/js/59.e020f767.js"><link rel="prefetch" href="/assets/js/6.5e3ab303.js"><link rel="prefetch" href="/assets/js/60.ab4a5b20.js"><link rel="prefetch" href="/assets/js/61.997121af.js"><link rel="prefetch" href="/assets/js/62.3ae5d914.js"><link rel="prefetch" href="/assets/js/63.8072cead.js"><link rel="prefetch" href="/assets/js/64.0bea65d6.js"><link rel="prefetch" href="/assets/js/65.ed853767.js"><link rel="prefetch" href="/assets/js/66.298b6015.js"><link rel="prefetch" href="/assets/js/67.4bb3cf7c.js"><link rel="prefetch" href="/assets/js/68.992d0241.js"><link rel="prefetch" href="/assets/js/69.e4fd6506.js"><link rel="prefetch" href="/assets/js/7.59feaf69.js"><link rel="prefetch" href="/assets/js/70.2b437236.js"><link rel="prefetch" href="/assets/js/71.910913f9.js"><link rel="prefetch" href="/assets/js/72.0d0664fe.js"><link rel="prefetch" href="/assets/js/73.a404e451.js"><link rel="prefetch" href="/assets/js/74.1eca8bcf.js"><link rel="prefetch" href="/assets/js/75.999a5733.js"><link rel="prefetch" href="/assets/js/76.1902a309.js"><link rel="prefetch" href="/assets/js/77.72f88aad.js"><link rel="prefetch" href="/assets/js/78.b73d3576.js"><link rel="prefetch" href="/assets/js/79.8a639b82.js"><link rel="prefetch" href="/assets/js/80.29bb5d44.js"><link rel="prefetch" href="/assets/js/81.bac08b3e.js"><link rel="prefetch" href="/assets/js/82.2644c84d.js"><link rel="prefetch" href="/assets/js/83.71771fcc.js"><link rel="prefetch" href="/assets/js/84.826a929a.js"><link rel="prefetch" href="/assets/js/85.6e413b7b.js"><link rel="prefetch" href="/assets/js/86.a9c4bb93.js"><link rel="prefetch" href="/assets/js/87.97d001e0.js"><link rel="prefetch" href="/assets/js/88.ba363f72.js"><link rel="prefetch" href="/assets/js/89.955a2442.js"><link rel="prefetch" href="/assets/js/90.f63b2478.js"><link rel="prefetch" href="/assets/js/91.46ef79ce.js"><link rel="prefetch" href="/assets/js/92.331a5f68.js"><link rel="prefetch" href="/assets/js/93.71fa0fc9.js"><link rel="prefetch" href="/assets/js/94.3d198995.js"><link rel="prefetch" href="/assets/js/95.21680ca5.js"><link rel="prefetch" href="/assets/js/96.06021050.js"><link rel="prefetch" href="/assets/js/97.1626f156.js"><link rel="prefetch" href="/assets/js/98.1c48fd7b.js"><link rel="prefetch" href="/assets/js/99.10a10dbe.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.d852a880.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f3e2e2a4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">偷影子的人</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机硬件" class="dropdown-title"><span class="title">计算机硬件</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机硬件" class="mobile-dropdown-title"><span class="title">计算机硬件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/001 - 计算机硬件/存储设备/" class="nav-link">
  存储设备
</a></li><li class="dropdown-item"><!----> <a href="/001 - 计算机硬件/手机/" class="nav-link">
  手机
</a></li><li class="dropdown-item"><!----> <a href="/001 - 计算机硬件/品牌机/" class="nav-link">
  品牌机
</a></li><li class="dropdown-item"><!----> <a href="/001 - 计算机硬件/电脑配件/" class="nav-link">
  电脑配件
</a></li><li class="dropdown-item"><!----> <a href="/001 - 计算机硬件/计算机管理/" class="nav-link">
  计算机管理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机系统" class="dropdown-title"><span class="title">计算机系统</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机系统" class="mobile-dropdown-title"><span class="title">计算机系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/002 - 计算机系统/存储管理/" class="nav-link">
  存储管理
</a></li><li class="dropdown-item"><!----> <a href="/002 - 计算机系统/数据表示/" class="nav-link">
  数据表示
</a></li><li class="dropdown-item"><!----> <a href="/002 - 计算机系统/数据结构/" class="nav-link">
  数据结构
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="软件开发" class="dropdown-title"><span class="title">软件开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="软件开发" class="mobile-dropdown-title"><span class="title">软件开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/003 - 软件开发/开发工具/" class="nav-link">
  开发工具
</a></li><li class="dropdown-item"><!----> <a href="/003 - 软件开发/软件服务/" class="nav-link">
  软件服务
</a></li><li class="dropdown-item"><!----> <a href="/003 - 软件开发/软件工程/" class="nav-link">
  软件工程
</a></li><li class="dropdown-item"><!----> <a href="/003 - 软件开发/网络技术/" class="nav-link">
  网络技术
</a></li><li class="dropdown-item"><!----> <a href="/003 - 软件开发/文件格式/" class="nav-link">
  文件格式
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="生活技能" class="dropdown-title"><span class="title">生活技能</span> <span class="arrow down"></span></button> <button type="button" aria-label="生活技能" class="mobile-dropdown-title"><span class="title">生活技能</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/004 - 生活技能/购物指南/" class="nav-link">
  购物指南
</a></li><li class="dropdown-item"><!----> <a href="/004 - 生活技能/娱乐游戏/" class="nav-link">
  娱乐游戏
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/101 - 前端基础/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/101 - 前端基础/HTML/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/101 - 前端基础/JavaScript/" class="nav-link">
  JavaScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端开发" class="dropdown-title"><span class="title">前端开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端开发" class="mobile-dropdown-title"><span class="title">前端开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/102 - 前端开发/Vanilla/" class="nav-link">
  Vanilla
</a></li><li class="dropdown-item"><!----> <a href="/102 - 前端开发/Vue/" class="nav-link">
  Vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端语言" class="dropdown-title"><span class="title">后端语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端语言" class="mobile-dropdown-title"><span class="title">后端语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/201 - 后端语言/CSharp/" class="nav-link">
  CSharp
</a></li><li class="dropdown-item"><!----> <a href="/201 - 后端语言/Java/" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/201 - 后端语言/Node/" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/201 - 后端语言/Python/" class="nav-link">
  Python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端开发" class="dropdown-title"><span class="title">后端开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端开发" class="mobile-dropdown-title"><span class="title">后端开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/202 - 后端开发/Database/" class="nav-link">
  Database
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维部署" class="dropdown-title"><span class="title">运维部署</span> <span class="arrow down"></span></button> <button type="button" aria-label="运维部署" class="mobile-dropdown-title"><span class="title">运维部署</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/301 - 运维部署/Cloud/" class="nav-link">
  Cloud
</a></li><li class="dropdown-item"><!----> <a href="/301 - 运维部署/Command/" class="nav-link">
  Command
</a></li><li class="dropdown-item"><!----> <a href="/301 - 运维部署/DevOps/" class="nav-link">
  DevOps
</a></li><li class="dropdown-item"><!----> <a href="/301 - 运维部署/Proxmox VE/" class="nav-link">
  Proxmox VE
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="操作系统" class="dropdown-title"><span class="title">操作系统</span> <span class="arrow down"></span></button> <button type="button" aria-label="操作系统" class="mobile-dropdown-title"><span class="title">操作系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/302 - 操作系统/Linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/302 - 操作系统/Windows/" class="nav-link">
  Windows
</a></li></ul></div></div><div class="nav-item"><a href="https://inxiny.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  导航
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机硬件" class="dropdown-title"><span class="title">计算机硬件</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机硬件" class="mobile-dropdown-title"><span class="title">计算机硬件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/001 - 计算机硬件/存储设备/" class="nav-link">
  存储设备
</a></li><li class="dropdown-item"><!----> <a href="/001 - 计算机硬件/手机/" class="nav-link">
  手机
</a></li><li class="dropdown-item"><!----> <a href="/001 - 计算机硬件/品牌机/" class="nav-link">
  品牌机
</a></li><li class="dropdown-item"><!----> <a href="/001 - 计算机硬件/电脑配件/" class="nav-link">
  电脑配件
</a></li><li class="dropdown-item"><!----> <a href="/001 - 计算机硬件/计算机管理/" class="nav-link">
  计算机管理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机系统" class="dropdown-title"><span class="title">计算机系统</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机系统" class="mobile-dropdown-title"><span class="title">计算机系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/002 - 计算机系统/存储管理/" class="nav-link">
  存储管理
</a></li><li class="dropdown-item"><!----> <a href="/002 - 计算机系统/数据表示/" class="nav-link">
  数据表示
</a></li><li class="dropdown-item"><!----> <a href="/002 - 计算机系统/数据结构/" class="nav-link">
  数据结构
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="软件开发" class="dropdown-title"><span class="title">软件开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="软件开发" class="mobile-dropdown-title"><span class="title">软件开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/003 - 软件开发/开发工具/" class="nav-link">
  开发工具
</a></li><li class="dropdown-item"><!----> <a href="/003 - 软件开发/软件服务/" class="nav-link">
  软件服务
</a></li><li class="dropdown-item"><!----> <a href="/003 - 软件开发/软件工程/" class="nav-link">
  软件工程
</a></li><li class="dropdown-item"><!----> <a href="/003 - 软件开发/网络技术/" class="nav-link">
  网络技术
</a></li><li class="dropdown-item"><!----> <a href="/003 - 软件开发/文件格式/" class="nav-link">
  文件格式
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="生活技能" class="dropdown-title"><span class="title">生活技能</span> <span class="arrow down"></span></button> <button type="button" aria-label="生活技能" class="mobile-dropdown-title"><span class="title">生活技能</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/004 - 生活技能/购物指南/" class="nav-link">
  购物指南
</a></li><li class="dropdown-item"><!----> <a href="/004 - 生活技能/娱乐游戏/" class="nav-link">
  娱乐游戏
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/101 - 前端基础/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/101 - 前端基础/HTML/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/101 - 前端基础/JavaScript/" class="nav-link">
  JavaScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端开发" class="dropdown-title"><span class="title">前端开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端开发" class="mobile-dropdown-title"><span class="title">前端开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/102 - 前端开发/Vanilla/" class="nav-link">
  Vanilla
</a></li><li class="dropdown-item"><!----> <a href="/102 - 前端开发/Vue/" class="nav-link">
  Vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端语言" class="dropdown-title"><span class="title">后端语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端语言" class="mobile-dropdown-title"><span class="title">后端语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/201 - 后端语言/CSharp/" class="nav-link">
  CSharp
</a></li><li class="dropdown-item"><!----> <a href="/201 - 后端语言/Java/" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/201 - 后端语言/Node/" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/201 - 后端语言/Python/" class="nav-link">
  Python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端开发" class="dropdown-title"><span class="title">后端开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端开发" class="mobile-dropdown-title"><span class="title">后端开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/202 - 后端开发/Database/" class="nav-link">
  Database
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维部署" class="dropdown-title"><span class="title">运维部署</span> <span class="arrow down"></span></button> <button type="button" aria-label="运维部署" class="mobile-dropdown-title"><span class="title">运维部署</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/301 - 运维部署/Cloud/" class="nav-link">
  Cloud
</a></li><li class="dropdown-item"><!----> <a href="/301 - 运维部署/Command/" class="nav-link">
  Command
</a></li><li class="dropdown-item"><!----> <a href="/301 - 运维部署/DevOps/" class="nav-link">
  DevOps
</a></li><li class="dropdown-item"><!----> <a href="/301 - 运维部署/Proxmox VE/" class="nav-link">
  Proxmox VE
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="操作系统" class="dropdown-title"><span class="title">操作系统</span> <span class="arrow down"></span></button> <button type="button" aria-label="操作系统" class="mobile-dropdown-title"><span class="title">操作系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/302 - 操作系统/Linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/302 - 操作系统/Windows/" class="nav-link">
  Windows
</a></li></ul></div></div><div class="nav-item"><a href="https://inxiny.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  导航
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Core</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Spring</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/201 - 后端语言/Java/Spring/java_spring_ioc.html" class="active sidebar-link">IoC</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/201 - 后端语言/Java/Spring/java_spring_ioc.html#容器" class="sidebar-link">容器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/201 - 后端语言/Java/Spring/java_spring_ioc.html#配置元数据" class="sidebar-link">配置元数据</a></li></ul></li><li class="sidebar-sub-header"><a href="/201 - 后端语言/Java/Spring/java_spring_ioc.html#依赖" class="sidebar-link">依赖</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/201 - 后端语言/Java/Spring/java_spring_ioc.html#依赖注入" class="sidebar-link">依赖注入</a></li><li class="sidebar-sub-header"><a href="/201 - 后端语言/Java/Spring/java_spring_ioc.html#依赖关系和配置" class="sidebar-link">依赖关系和配置</a></li><li class="sidebar-sub-header"><a href="/201 - 后端语言/Java/Spring/java_spring_ioc.html#自动装配协作者" class="sidebar-link">自动装配协作者</a></li></ul></li><li class="sidebar-sub-header"><a href="/201 - 后端语言/Java/Spring/java_spring_ioc.html#自定义-bean-的性质" class="sidebar-link">自定义 Bean 的性质</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/201 - 后端语言/Java/Spring/java_spring_ioc.html#生命周期回调" class="sidebar-link">生命周期回调</a></li></ul></li><li class="sidebar-sub-header"><a href="/201 - 后端语言/Java/Spring/java_spring_ioc.html#容器扩展点" class="sidebar-link">容器扩展点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/201 - 后端语言/Java/Spring/java_spring_ioc.html#使用-beanfactorypostprocessor-自定义配置元数据" class="sidebar-link">使用 BeanFactoryPostProcessor 自定义配置元数据</a></li></ul></li><li class="sidebar-sub-header"><a href="/201 - 后端语言/Java/Spring/java_spring_ioc.html#基于注解的容器配置" class="sidebar-link">基于注解的容器配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/201 - 后端语言/Java/Spring/java_spring_ioc.html#autowired" class="sidebar-link">@Autowired</a></li><li class="sidebar-sub-header"><a href="/201 - 后端语言/Java/Spring/java_spring_ioc.html#使用-primary-微调基于注解的自动装配" class="sidebar-link">使用 @Primary 微调基于注解的自动装配</a></li><li class="sidebar-sub-header"><a href="/201 - 后端语言/Java/Spring/java_spring_ioc.html#使用-qualifiers-微调基于注解的自动装配" class="sidebar-link">使用 @Qualifiers 微调基于注解的自动装配</a></li><li class="sidebar-sub-header"><a href="/201 - 后端语言/Java/Spring/java_spring_ioc.html#resource" class="sidebar-link">@Resource</a></li></ul></li><li class="sidebar-sub-header"><a href="/201 - 后端语言/Java/Spring/java_spring_ioc.html#类路径扫描和托管组件" class="sidebar-link">类路径扫描和托管组件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/201 - 后端语言/Java/Spring/java_spring_ioc.html#自动检测类和注册-beandefinition" class="sidebar-link">自动检测类和注册 BeanDefinition</a></li><li class="sidebar-sub-header"><a href="/201 - 后端语言/Java/Spring/java_spring_ioc.html#使用过滤器自定义扫描" class="sidebar-link">使用过滤器自定义扫描</a></li></ul></li><li class="sidebar-sub-header"><a href="/201 - 后端语言/Java/Spring/java_spring_ioc.html#applicationcontext-的其他功能" class="sidebar-link">ApplicationContext 的其他功能</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/201 - 后端语言/Java/Spring/java_spring_ioc.html#在-web-应用程序中快捷实例化" class="sidebar-link">在 Web 应用程序中快捷实例化</a></li></ul></li><li class="sidebar-sub-header"><a href="/201 - 后端语言/Java/Spring/java_spring_ioc.html#参考文献" class="sidebar-link">参考文献</a></li><li class="sidebar-sub-header"><a href="/201 - 后端语言/Java/Spring/java_spring_ioc.html#参见" class="sidebar-link">参见</a></li></ul></li><li><a href="/201 - 后端语言/Java/Spring/java_spring_jdbc.html" class="sidebar-link">使用 JDBC 进行数据访问</a></li><li><a href="/201 - 后端语言/Java/Spring/java_spring_mvc.html" class="sidebar-link">MVC</a></li><li><a href="/201 - 后端语言/Java/Spring/java_spring_utils.html" class="sidebar-link">Spring Utils</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>通用组件</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ioc"><a href="#ioc" class="header-anchor">#</a> IoC</h1> <h2 id="容器"><a href="#容器" class="header-anchor">#</a> 容器</h2> <p><code>org.springframework.context.ApplicationContext</code> 接口代表 Spring IoC 容器，负责实例化、配置和组装 bean。容器通过读取配置元数据来获取关于要实例化、配置和组装哪些对象的指令。配置元数据以 XML、Java 注解或 Java 代码表示。它允许您表达组成应用程序的对象以及这些对象之间丰富的相互依赖关系。</p> <h3 id="配置元数据"><a href="#配置元数据" class="header-anchor">#</a> 配置元数据</h3> <p>以下示例显示了基于 XML 的配置元数据的基本结构：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>...<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>...<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>  
        <span class="token comment">&lt;!-- collaborators and configuration for this bean go here --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="依赖"><a href="#依赖" class="header-anchor">#</a> 依赖</h2> <p>典型的企业应用程序不包含单个对象。即使是最简单的应用程序也有一些对象协同工作，以呈现最终用户认为的连贯应用程序。</p> <h3 id="依赖注入"><a href="#依赖注入" class="header-anchor">#</a> 依赖注入</h3> <p>依赖注入是一个过程，其中对象仅通过构造函数参数、工厂方法参数或对象实例来构造或从工厂方法返回。然后容器在创建 bean 时注入这些依赖项。这个过程基本上是 bean 本身的逆过程，因此称为控制反转，它通过使用类的直接构造或服务定位器模式自行控制其依赖项的实例化或位置。</p> <p>使用 DI 原则，代码更干净，当对象具有依赖关系时，解耦更有效。对象不查找其依赖项，也不知道依赖项的位置或类别。结果，您的类变得更容易测试，特别是当依赖关系在接口或抽象基类上时，它们允许在单元测试中使用 <em>stub</em> 或模拟实现。</p> <h4 id="基于构造函数的依赖注入"><a href="#基于构造函数的依赖注入" class="header-anchor">#</a> 基于构造函数的依赖注入</h4> <p>基于构造函数的 DI 是通过容器调用具有多个参数的构造函数来完成的，每个参数代表一个依赖项。调用带有特定参数的静态工厂方法来构造 bean 几乎是等价的，并且本次讨论对构造函数和静态工厂方法的参数进行了类似的处理。以下示例显示了一个只能通过构造函数注入进行依赖注入的类：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleMovieLister</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">MovieFinder</span> movieFinder<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SimpleMovieLister</span><span class="token punctuation">(</span><span class="token class-name">MovieFinder</span> movieFinder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>movieFinder <span class="token operator">=</span> movieFinder<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h5 id="构造函数参数解析"><a href="#构造函数参数解析" class="header-anchor">#</a> 构造函数参数解析</h5> <p>构造函数参数解析匹配通过使用参数的类型进行。如果 bean definition 的构造函数参数中不存在潜在的歧义，在 bean definition 中定义构造函数参数的顺序是在实例化 bean 时将这些参数提供给适当的构造函数的顺序。考虑以下类：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">x<span class="token punctuation">.</span>y</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThingOne</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">ThingOne</span><span class="token punctuation">(</span><span class="token class-name">ThingTwo</span> thingTwo<span class="token punctuation">,</span> <span class="token class-name">ThingThree</span> thingThree<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>假设 <code>ThingTwo</code> 和 <code>ThingThree</code> 类没有继承关系，则不存在潜在的歧义。因此，以下配置工作正常，您无需在 <code>&lt;constructor-arg/&gt;</code> 元素中显式指定构造函数参数索引或类型。</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>beanOne<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>x.y.ThingOne<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>beanTwo<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>beanThree<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>beanTwo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>x.y.ThingTwo<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>beanThree<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>x.y.ThingThree<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>当引用另一个 bean 时，类型是已知的，并且可以发生匹配。当使用简单类型时，例如 <code>&lt;value&gt;true&lt;/value&gt;</code>，Spring 无法确定 value 的类型，因此无法在没有帮助的情况下按类型匹配。考虑以下类：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">examples</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExampleBean</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> years<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> ultimateAnswer<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">ExampleBean</span><span class="token punctuation">(</span><span class="token keyword">int</span> years<span class="token punctuation">,</span> <span class="token class-name">String</span> ultimateAnswer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>years <span class="token operator">=</span> years<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>ultimateAnswer <span class="token operator">=</span> ultimateAnswer<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h5 id="构造函数参数类型匹配"><a href="#构造函数参数类型匹配" class="header-anchor">#</a> 构造函数参数类型匹配</h5> <p>在上述场景中，如果您使用 <code>type</code> 属性显式指定构造函数参数的类型，则容器可以使用简单类型的类型匹配，如以下示例所示：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>exampleBean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>examples.ExampleBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>int<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>7500000<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.lang.String<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>42<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h5 id="构造函数参数索引"><a href="#构造函数参数索引" class="header-anchor">#</a> 构造函数参数索引</h5> <p>您可以使用 <code>index</code> 属性显式指定构造函数参数的索引，如以下示例所示：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>exampleBean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>examples.ExampleBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>7500000<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">index</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>42<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>除了解决多个简单值的歧义之外，指定索引还可以解决构造函数具有两个相同类型参数的歧义。</p> <h5 id="构造函数参数名称"><a href="#构造函数参数名称" class="header-anchor">#</a> 构造函数参数名称</h5> <p>您还可以使用构造函数参数名称进行值消歧，如以下示例所示：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>exampleBean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>examples.ExampleBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>years<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>7500000<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ultimateAnswer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>42<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="基于-setter-的依赖注入"><a href="#基于-setter-的依赖注入" class="header-anchor">#</a> 基于 Setter 的依赖注入</h4> <p>基于 Setter 的 DI 是通过容器在调用无参数构造函数或无参数静态工厂方法来实例化 bean 后调用 bean 上的 setter 方法来完成的。</p> <p>以下示例显示了一个只能通过使用纯 setter 注入进行依赖注入的类。这个类是常规的 Java。它是一个 POJO，不依赖于容器特定的接口、基类或注解。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleMovieLister</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">MovieFinder</span> movieFinder<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMovieFinder</span><span class="token punctuation">(</span><span class="token class-name">MovieFinder</span> movieFinder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>movieFinder <span class="token operator">=</span> movieFinder<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>以下示例将基于 XML 的配置元数据用于基于 setter 的 DI。Spring XML 配置文件的一小部分指定了一些 bean 定义，如下所示：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>exampleBean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>examples.ExampleBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 使用嵌套 ref 元素的 setter 注入 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>beanOne<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>anotherExampleBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!-- 使用更整洁的 ref 属性的 setter 注入 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>beanTwo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>yetAnotherBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>integerProperty<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>anotherExampleBean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>examples.AnotherBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>yetAnotherBean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>examples.YetAnotherBean<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><h3 id="依赖关系和配置"><a href="#依赖关系和配置" class="header-anchor">#</a> 依赖关系和配置</h3> <p>如上一节所述，您可以将 bean 属性和构造函数参数定义为对其他托管 bean（协作者）的引用或作为内联定义的值。为此，Spring 的基于 XML 的配置元数据在其 <code>&lt;property/&gt;</code> 和 <code>&lt;constructor-arg/&gt;</code> 元素中支持子元素类型。</p> <h4 id="collections"><a href="#collections" class="header-anchor">#</a> Collections</h4> <p><code>&lt;list/&gt;</code>、<code>&lt;set/&gt;</code>、<code>&lt;map/&gt;</code> 和 <code>&lt;props/&gt;</code> 元素分别设置 Java 集合类型 List、Set、Map 和 Properties 的属性和参数。以下示例显示了如何使用它们：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>moreComplexObject<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>example.ComplexObject<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- java.util.Properties --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>adminEmails<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>props</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>administrator<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>administrator@example.org<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>support<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>support@example.org<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>prop</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>development<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>development@example.org<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>prop</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>props</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- java.util.List --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>someList<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>a list element followed by a reference<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myDataSource<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- java.util.Map --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>someMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>map</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>an entry<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>just some string<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>a ref<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myDataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>map</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- java.util.Set --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>someSet<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>set</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>just some string<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ref</span> <span class="token attr-name">bean</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myDataSource<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>set</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="自动装配协作者"><a href="#自动装配协作者" class="header-anchor">#</a> 自动装配协作者</h3> <p>Spring 容器可以自动装配协作 bean 之间的关系。您可以通过检查 <code>ApplicationContext</code> 的内容让 Spring 为您的 bean 自动解析协作者（其他 bean）。</p> <p>使用基于 XML 的配置元数据时，您可以使用 <code>&lt;bean/&gt;</code> 元素的 <code>autowire</code> 属性为 bean 定义指定自动装配模式。自动装配功能有四种模式。您可以指定每个 bean 的自动装配，从而可以选择要自动装配的 bean。</p> <table><thead><tr><th>Mode</th> <th>Explanation</th></tr></thead> <tbody><tr><td><code>no</code></td> <td>默认，不自动装配。Bean 引用必须由 ref 元素定义。</td></tr> <tr><td><code>byName</code></td> <td>按属性名称自动装配。</td></tr> <tr><td><code>byType</code></td> <td>按属性类型自动装配。</td></tr> <tr><td><code>constructor</code></td> <td>类似于 <code>byType</code> 但适用于构造函数参数。</td></tr></tbody></table> <h2 id="自定义-bean-的性质"><a href="#自定义-bean-的性质" class="header-anchor">#</a> 自定义 Bean 的性质</h2> <p>Spring Framework 提供了许多接口，您可以使用它们来自定义 bean 的性质。</p> <h3 id="生命周期回调"><a href="#生命周期回调" class="header-anchor">#</a> 生命周期回调</h3> <p>要与容器对 bean 生命周期的管理进行交互，您可以实现 Spring <code>InitializingBean</code> 和 <code>DisposableBean</code> 接口。容器为前者调用 <code>afterPropertiesSet()</code> 并为后者调用 <code>destroy()</code> 以让 bean 在初始化和销毁 bean 时执行某些操作。</p> <h4 id="初始化回调"><a href="#初始化回调" class="header-anchor">#</a> 初始化回调</h4> <p><code>org.springframework.beans.factory.InitializingBean</code> 接口让 bean 在容器设置了 bean 的所有必要属性后执行初始化工作。<code>InitializingBean</code> 接口指定了一个方法：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">afterPropertiesSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
</code></pre></div><p>我们建议您不要使用 <code>InitializingBean</code> 接口，因为它不必要地将代码耦合到 Spring。我们建议使用 <code>@PostConstruct</code> 注解或指定 POJO 初始化方法。对于基于 XML 的配置元数据，您可以使用 <code>init-method</code> 属性来指定具有 <code>void</code> 无参数签名的方法的名称。通过 Java 配置，您可以使用 @Bean 的 <code>initMethod</code> 属性。参考以下示例：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>exampleInitBean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>examples.ExampleBean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">init-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>init<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><h4 id="销毁回调"><a href="#销毁回调" class="header-anchor">#</a> 销毁回调</h4> <p><code>org.springframework.beans.factory.DisposableBean</code> 接口让 bean 在包含它的容器被销毁时获得回调。<code>DisposableBean</code> 接口指定了一个方法：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
</code></pre></div><p>我们建议您不要使用 <code>DisposableBean</code> 接口，因为它不必要地将代码耦合到 Spring。我们建议使用 <code>@PreDestroy</code> 注解或指定 POJO 销毁方法。对于基于 XML 的配置元数据，您可以在 <code>&lt;bean/&gt;</code> 上使用 <code>destroy-method</code> 属性。通过 Java 配置，您可以使用 <code>@Bean</code> 的 <code>destroyMethod</code> 属性。参考以下示例：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>exampleInitBean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>examples.ExampleBean<span class="token punctuation">&quot;</span></span> <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cleanup<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><h2 id="容器扩展点"><a href="#容器扩展点" class="header-anchor">#</a> 容器扩展点</h2> <p>通常，应用程序开发人员不需要继承 <code>ApplicationContext</code> 实现类，相反，可以通过插入特殊集成接口的实现来扩展 Spring IoC 容器。接下来的几节描述了这些集成接口。</p> <h3 id="使用-beanfactorypostprocessor-自定义配置元数据"><a href="#使用-beanfactorypostprocessor-自定义配置元数据" class="header-anchor">#</a> 使用 <code>BeanFactoryPostProcessor</code> 自定义配置元数据</h3> <h4 id="示例-类名替换-propertysourcesplaceholderconfigurer"><a href="#示例-类名替换-propertysourcesplaceholderconfigurer" class="header-anchor">#</a> 示例：类名替换 <code>PropertySourcesPlaceholderConfigurer</code></h4> <p>您可以使用 <code>PropertySourcesPlaceholderConfigurer</code> 将 bean definition 中的属性值外部化到单独的文件中。这样做使部署应用程序的人员能够自定义特定于环境的属性，例如数据库 URL 和密码，而无需修改容器的主要 XML 定义文件。</p> <p>参考以下基于 XML 的配置元数据片段，其中定义了具有占位符值的 <code>DataSource</code>：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.context.support.PropertySourcesPlaceholderConfigurer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>locations<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classpath:jdbc.properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>close<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.commons.dbcp.BasicDataSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>driverClassName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.driverClassName}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.url}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>该示例显示了从外部 <code>Properties</code> 文件配置的属性。在运行时，<code>PropertySourcesPlaceholderConfigurer</code> 应用于替换 <code>DataSource</code> 的某些属性的元数据。要替换的值被指定为 <code>${property-name}</code> 形式的占位符，它遵循 Ant 和 log4j 以及 JSP EL 样式。</p> <blockquote><p><code>PropertyPlaceholderConfigurer</code>：Deprecated. as of 5.2.</p></blockquote> <p>实际值来自标准 Java <code>Properties</code> 格式的另一个文件：</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token key attr-name">jdbc.driverClassName</span><span class="token punctuation">=</span><span class="token value attr-value">org.hsqldb.jdbcDriver</span>
<span class="token key attr-name">jdbc.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:hsqldb:hsql://production:9002</span>
<span class="token key attr-name">jdbc.username</span><span class="token punctuation">=</span><span class="token value attr-value">sa</span>
<span class="token key attr-name">jdbc.password</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>
</code></pre></div><p>因此，<code>${jdbc.username}</code> 字符串在运行时被替换为值 <em>sa</em>，这同样适用于与 <code>properties</code> 文件中的键匹配的其他占位符值。<code>PropertySourcesPlaceholderConfigurer</code> 检查 bean definition 的大多数属性和属性中的占位符。此外，您可以自定义占位符前缀和后缀。</p> <p>使用 Spring 2.5 中引入的 <code>context</code> namespace，您可以使用专用配置元素配置属性占位符。您可以在 location 属性中以逗号分隔列表的形式提供一个或多个位置，如以下示例所示：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>property-placeholder</span> <span class="token attr-name">location</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>classpath:jdbc.properties<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p><code>PropertySourcesPlaceholderConfigurer</code> 不仅在您指定的 <code>Properties</code> 文件中查找属性。默认情况下，如果在指定的 <code>Properties</code> 文件中找不到属性，它会检查 Spring <code>Environment</code> 属性和常规 Java <code>System</code> 属性。</p> <h2 id="基于注解的容器配置"><a href="#基于注解的容器配置" class="header-anchor">#</a> 基于注解的容器配置</h2> <p>基于注解的配置提供了 XML 设置的替代方案，它依赖于字节码元数据来连接组件，而不是尖括号声明。开发人员不使用 XML 来描述 bean 关系，而是通过在相关类、方法或字段声明上使用注解将配置移动到组件类本身。</p> <p>一如既往，您可以将 post-processors 注册为单独的 bean definitions，但也可以通过在基于 XML 的 Spring 配置中包含以下标记来隐式注册它们：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        https://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>annotation-config</span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="autowired"><a href="#autowired" class="header-anchor">#</a> <code>@Autowired</code></h3> <p>您可以将 <code>@Autowired</code> 注解应用于构造函数，如以下示例所示：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MovieRecommender</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">CustomerPreferenceDao</span> customerPreferenceDao<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">public</span> <span class="token class-name">MovieRecommender</span><span class="token punctuation">(</span><span class="token class-name">CustomerPreferenceDao</span> customerPreferenceDao<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>customerPreferenceDao <span class="token operator">=</span> customerPreferenceDao<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>构造函数注入是通过对象构建的时候建立关系，所以这种方式对对象创建的顺序会有要求，Spring 会自动处理这样的先后顺序，除非出现循环依赖，然后就会抛出异常。</p> <p>从 Spring Framework 4.3 开始，如果目标 bean 仅定义了一个构造函数，则不再需要在此类构造函数上使用 <code>@Autowired</code> 注解。但是，如果有多个构造函数可用并且没有 primary/default 构造函数，则必须至少使用 <code>@Autowired</code> 注释其中一个构造函数，以指示容器使用哪一个。</p></blockquote> <p>您还可以将 <code>@Autowired</code> 注解应用于传统的 setter 方法，如以下示例所示：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleMovieLister</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">MovieFinder</span> movieFinder<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMovieFinder</span><span class="token punctuation">(</span><span class="token class-name">MovieFinder</span> movieFinder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>movieFinder <span class="token operator">=</span> movieFinder<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>您还可以将注解应用于具有任意名称和多个参数的方法，如以下示例所示：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MovieRecommender</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">MovieCatalog</span> movieCatalog<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">CustomerPreferenceDao</span> customerPreferenceDao<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">prepare</span><span class="token punctuation">(</span><span class="token class-name">MovieCatalog</span> movieCatalog<span class="token punctuation">,</span>
            <span class="token class-name">CustomerPreferenceDao</span> customerPreferenceDao<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>movieCatalog <span class="token operator">=</span> movieCatalog<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>customerPreferenceDao <span class="token operator">=</span> customerPreferenceDao<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>您也可以将 <code>@Autowired</code> 应用于字段，甚至可以将其与构造函数混合使用，如以下示例所示：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MovieRecommender</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">CustomerPreferenceDao</span> customerPreferenceDao<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">MovieCatalog</span> movieCatalog<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">public</span> <span class="token class-name">MovieRecommender</span><span class="token punctuation">(</span><span class="token class-name">CustomerPreferenceDao</span> customerPreferenceDao<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>customerPreferenceDao <span class="token operator">=</span> customerPreferenceDao<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>字段注入通过 Java 的反射机制实现，所以 <code>private</code> 的成员也可以被注入具体的对象。</p> <p>默认情况下，Spring 是按照类型装配的，也就是 <code>byType</code> 方式。所以需要确保您的目标组件始终由您用于 <code>@Autowired</code> 注解的注入点的类型声明。否则，注入可能会由于运行时出现 <em>no type match found</em> 错误而失败。</p></blockquote> <p>您还可以通过将 <code>@Autowired</code> 注解添加到需要该类型数组的字段或方法来指示 Spring 从 <code>ApplicationContext</code> 提供特定类型的所有 bean，如以下示例所示：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MovieRecommender</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">MovieCatalog</span><span class="token punctuation">[</span><span class="token punctuation">]</span> movieCatalogs<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><p>这同样适用于集合，如以下示例所示：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MovieRecommender</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MovieCatalog</span><span class="token punctuation">&gt;</span></span> movieCatalogs<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMovieCatalogs</span><span class="token punctuation">(</span><span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MovieCatalog</span><span class="token punctuation">&gt;</span></span> movieCatalogs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>movieCatalogs <span class="token operator">=</span> movieCatalogs<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>只要预期的键类型是 <code>String</code>，即使是 <code>Map</code> 实例也可以自动装配。映射值包含预期类型的所有 bean，键包含相应的 bean 名称，如以下示例所示：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MovieRecommender</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">MovieCatalog</span><span class="token punctuation">&gt;</span></span> movieCatalogs<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMovieCatalogs</span><span class="token punctuation">(</span><span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">MovieCatalog</span><span class="token punctuation">&gt;</span></span> movieCatalogs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>movieCatalogs <span class="token operator">=</span> movieCatalogs<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>默认情况下，当给定注入点没有匹配的候选 bean 时，自动装配会失败。在声明的数组、集合或 map 的情况下，至少需要一个匹配元素。</p> <h3 id="使用-primary-微调基于注解的自动装配"><a href="#使用-primary-微调基于注解的自动装配" class="header-anchor">#</a> 使用 <code>@Primary</code> 微调基于注解的自动装配</h3> <p>因为按类型自动装配可能会导致多个候选者，因此通常需要对选择过程进行更多控制。实现这一点的一种方法是使用 Spring 的 <code>@Primary</code> 注解。<code>@Primary</code> 表示当多个 bean 成为自动装配到单值依赖项的候选者时，应该优先考虑特定的 bean。如果候选中恰好存在一个 primary bean，则它将成为自动装配的值。</p> <p>参考以下将 <code>firstMovieCatalog</code> 定义为主 <code>MovieCatalog</code> 的配置：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MovieConfiguration</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@Primary</span>
    <span class="token keyword">public</span> <span class="token class-name">MovieCatalog</span> <span class="token function">firstMovieCatalog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">MovieCatalog</span> <span class="token function">secondMovieCatalog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h3 id="使用-qualifiers-微调基于注解的自动装配"><a href="#使用-qualifiers-微调基于注解的自动装配" class="header-anchor">#</a> 使用 <code>@Qualifiers</code> 微调基于注解的自动装配</h3> <p>当可以确定一个主要候选者时，<code>@Primary</code> 是通过多个实例按类型使用自动关联的有效方法。当您需要对选择过程进行更多控制时，可以使用 Spring 的 <code>@Qualifier</code> 注解。您可以将限定符值与特定参数相关联，缩小类型匹配集，以便为每个参数选择一个特定的 bean。</p> <p>在最简单的情况下，这可以是一个简单的描述性值，如以下示例所示：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MovieRecommender</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">&quot;movieCatalog&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">MovieCatalog</span> movieCatalog<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><h3 id="resource"><a href="#resource" class="header-anchor">#</a> <code>@Resource</code></h3> <p>Spring 还支持通过在字段或属性 setter 方法上使用 JSR-250 <code>@Resource</code> 注解 (<code>javax.annotation.Resource</code>) 进行注入。</p> <p><code>@Resource</code> 采用名称属性。默认情况下，Spring 将该值解释为要注入的 bean name。换句话说，它遵循 by-name 语义，如以下示例所示：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleMovieLister</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">MovieFinder</span> movieFinder<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Resource</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;myMovieFinder&quot;</span><span class="token punctuation">)</span> 
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMovieFinder</span><span class="token punctuation">(</span><span class="token class-name">MovieFinder</span> movieFinder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>movieFinder <span class="token operator">=</span> movieFinder<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果没有明确指定 name，则默认 name 派生自 field name 或 setter 方法。</p> <h2 id="类路径扫描和托管组件"><a href="#类路径扫描和托管组件" class="header-anchor">#</a> 类路径扫描和托管组件</h2> <h3 id="自动检测类和注册-beandefinition"><a href="#自动检测类和注册-beandefinition" class="header-anchor">#</a> 自动检测类和注册 <code>BeanDefinition</code></h3> <p>Spring 可以自动检测原型类并使用 <code>ApplicationContext</code> 注册相应的 <code>BeanDefinition</code> 实例。</p> <p>以下替代方法使用 XML：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/context<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans
        https://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        https://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.example<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="使用过滤器自定义扫描"><a href="#使用过滤器自定义扫描" class="header-anchor">#</a> 使用过滤器自定义扫描</h3> <p>默认情况下，使用 <code>@Component</code>、<code>@Repository</code>、<code>@Service</code>、<code>@Controller</code>、<code>@Configuration</code> 注解的类，或使用 <code>@Component</code> 注解的自定义注解是唯一检测到的候选组件。但是，您可以通过应用自定义过滤器来修改和扩展此行为。将它们添加为 <code>@ComponentScan</code> 注解的 <code>includeFilters</code> 或 <code>excludeFilters</code> 属性，或作为 XML 配置中 <code>&lt;context:component-scan&gt;</code> 元素的 <code>&lt;context:include-filter /&gt;</code> 或 <code>&lt;context:exclude-filter /&gt;</code> 子元素。每个过滤器元素都需要类型和表达式属性。</p> <p>以下示例显示了忽略所有 <code>@Repository</code> 注解并使用 <code>stub</code> 存储库的配置：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.example<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>include-filter</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>regex<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>.*Stub.*Repository<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>exclude-filter</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>annotation<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.stereotype.Repository<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">context:</span>component-scan</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>可以通过在注解上设置 <code>useDefaultFilters=false</code> 或通过提供 <code>use-default-filters=&quot;false&quot;</code> 作为 <code>&lt;component-scan/&gt;</code> 元素的属性来禁用默认过滤器。这有效地禁用了使用 <code>@Component</code>、<code>@Repository</code>、<code>@Service</code>、<code>@Controller</code>、<code>@RestController</code> 或 <code>@Configuration</code> 注解或元注解的类的自动检测。</p> <h2 id="applicationcontext-的其他功能"><a href="#applicationcontext-的其他功能" class="header-anchor">#</a> <code>ApplicationContext</code> 的其他功能</h2> <h3 id="在-web-应用程序中快捷实例化"><a href="#在-web-应用程序中快捷实例化" class="header-anchor">#</a> 在 Web 应用程序中快捷实例化</h3> <p>可以使用 <code>ContextLoader</code> 以声明方式创建 <code>ApplicationContext</code> 实例。也可以使用 <code>ApplicationContext</code> 实现之一以编程方式创建 <code>ApplicationContext</code> 实例。</p> <p>可以使用 <code>ContextLoaderListener</code> 注册 <code>ApplicationContext</code>，如以下示例所示：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>classpath:applicationContext.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.context.ContextLoaderListener<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener-class</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>ContextLoaderListener</code> 检查 <code>contextConfigLocation</code> 参数。如果该参数不存在，则默认使用 <code>/WEB-INF/applicationContext.xml</code>。</p> <h2 id="参考文献"><a href="#参考文献" class="header-anchor">#</a> 参考文献</h2> <ul><li><a href="https://www.zhihu.com/question/23277575" target="_blank" rel="noopener noreferrer">Spring IoC有什么好处 - 知乎<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="参见"><a href="#参见" class="header-anchor">#</a> 参见</h2> <ul><li><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans" target="_blank" rel="noopener noreferrer">The IoC Container<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.26e764c1.js" defer></script><script src="/assets/js/2.fbd8ae4c.js" defer></script><script src="/assets/js/1.36b86acd.js" defer></script><script src="/assets/js/171.06c63be3.js" defer></script>
  </body>
</html>
