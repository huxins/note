(window.webpackJsonp=window.webpackJsonp||[]).push([[122],{434:function(t,a,s){"use strict";s.r(a);var n=s(27),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"service-worker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#service-worker"}},[t._v("#")]),t._v(" Service Worker")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.w3.org/TR/service-workers/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Service Worker"),a("OutboundLink")],1),t._v(" 是运行于浏览器后台的代理脚本，通过拦截并管理网络请求实现离线资源缓存与动态请求处理。")]),t._v(" "),a("p",[a("strong",[t._v("功能定位如下")]),t._v("：")]),t._v(" "),a("ul",[a("li",[t._v("浏览器"),a("strong",[t._v("网络代理")]),t._v("：拦截和处理网络请求")]),t._v(" "),a("li",[a("strong",[t._v("独立线程")]),t._v("运行：不阻塞主线程")]),t._v(" "),a("li",[a("strong",[t._v("离线优先")]),t._v("策略：实现可靠的离线体验")]),t._v(" "),a("li",[a("strong",[t._v("可编程缓存")]),t._v("：精确控制资源缓存")])]),t._v(" "),a("h2",{attrs:{id:"一、生命周期管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、生命周期管理"}},[t._v("#")]),t._v(" 一、生命周期管理")]),t._v(" "),a("div",{staticClass:"language-mermaid extra-class"},[a("pre",{pre:!0,attrs:{class:"language-mermaid"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("graph")]),t._v(" LR\n    A"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[注册]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" B"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[安装]")]),t._v("\n    B "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" C"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("{安装成功?}")]),t._v("\n    C "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),a("span",{pre:!0,attrs:{class:"token label property"}},[t._v("|是|")]),t._v(" D"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[等待激活]")]),t._v("\n    C "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),a("span",{pre:!0,attrs:{class:"token label property"}},[t._v("|否|")]),t._v(" G"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[废弃]")]),t._v("\n    D "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" E"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[激活]")]),t._v("\n    E "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("--\x3e")]),t._v(" F"),a("span",{pre:!0,attrs:{class:"token text string"}},[t._v("[运行]")]),t._v("\n")])])]),a("h3",{attrs:{id:"注册阶段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注册阶段"}},[t._v("#")]),t._v(" 注册阶段")]),t._v(" "),a("p",[t._v("在应用程序的主 JavaScript 文件（如 "),a("code",[t._v("app.js")]),t._v("）中，通过调用 "),a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/ServiceWorkerContainer/register",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("ServiceWorkerContainer.register()")]),a("OutboundLink")],1),t._v(" 方法实现 "),a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Service_Worker_API/Using_Service_Workers#%E6%B3%A8%E5%86%8C%E4%BD%A0%E7%9A%84_worker",target:"_blank",rel:"noopener noreferrer"}},[t._v("Service Worker"),a("OutboundLink")],1),t._v(" 的注册，该初始代码段作为 Service Worker 功能的入口点，是其核心实现方式。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 最佳实践：页面加载完成后注册")]),t._v("\nwindow"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'load'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'serviceWorker'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" navigator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    navigator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("serviceWorker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/sw.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("scope")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/app/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 控制作用域")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("updateViaCache")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'none'")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 禁用HTTP缓存")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("registration")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Registration succeeded:'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" registration"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"安装阶段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装阶段"}},[t._v("#")]),t._v(" 安装阶段")]),t._v(" "),a("p",[t._v("Service Worker 完成注册后，浏览器会在后台启动安装流程。")]),t._v(" "),a("p",[t._v("安装阶段会触发 "),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerGlobalScope/install_event",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("install")]),a("OutboundLink")],1),t._v(" 事件，开发者通常在此阶段通过 Service Worker 专属的 "),a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Cache",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("Cache")]),a("OutboundLink")],1),t._v(" 存储 API 缓存核心静态资源以实现离线可用性。该 API 通过请求对象作为键值对网络响应进行持久化存储，其"),a("a",{attrs:{href:"https://w3c.github.io/ServiceWorker/#dom-registrationoptions-scope",target:"_blank",rel:"noopener noreferrer"}},[t._v("作用域"),a("OutboundLink")],1),t._v("限定于当前域且不受浏览器默认缓存策略影响。")]),t._v(" "),a("p",[t._v("安装结果分为两种状态：")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("成功")]),t._v("：所有指定资源完成缓存后进入 "),a("a",{attrs:{href:"https://www.w3.org/TR/service-workers/#dom-serviceworkerstate-activated",target:"_blank",rel:"noopener noreferrer"}},[t._v("Activated"),a("OutboundLink")],1),t._v(" 状态；")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Service_Worker_API/Using_Service_Workers#%E4%B8%BA%E4%BB%80%E4%B9%88%E6%88%91%E7%9A%84_service_worker_%E6%B3%A8%E5%86%8C%E5%A4%B1%E8%B4%A5%E4%BA%86%EF%BC%9F",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[t._v("失败")]),a("OutboundLink")],1),t._v("：任一资源缓存失败则终止安装，Service Worker 转入 Error 状态等待后续重试。")])]),t._v(" "),a("p",[t._v("缓存内容将永久驻留直至显式调用清除方法，此机制为 Web 应用提供可靠的离线资源管理能力。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'install'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 初始化缓存")]),t._v("\n  event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("waitUntil")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    caches"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'static-v1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("cache")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" \n      cache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/app/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/app/styles.css'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/app/main.js'")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"激活阶段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#激活阶段"}},[t._v("#")]),t._v(" 激活阶段")]),t._v(" "),a("p",[t._v("Service Worker 完成安装后即进入激活阶段。首次安装或激活周期仅完成工作线程注册，此时不会触发资源控制权接管。")]),t._v(" "),a("p",[t._v("核心应用场景差异体现在更新场景中：当检测到新版本 Service Worker 文件时，浏览器会自动触发更新流程，此时激活阶段将执行旧版本资源回收与新版本控制权接管操作。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'activate'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'V1 now ready to handle fetches!'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#运行"}},[t._v("#")]),t._v(" 运行")]),t._v(" "),a("p",[t._v("成功缓存站点资源后，需通过注册 "),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerGlobalScope/fetch_event",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("fetch")]),a("OutboundLink")],1),t._v(" 事件监听器实现缓存资源调度。该事件在浏览器发起网络请求时触发，开发者可通过 "),a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/FetchEvent/respondWith",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("event.respondWith()")]),a("OutboundLink")],1),t._v(" 方法注入缓存响应逻辑，具体实现需在 Service Worker 脚本中完成请求拦截与缓存匹配机制。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fetch'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" url "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("URL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("origin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" location"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("origin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pathname "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/dog.svg'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("respondWith")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("caches"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("match")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/cat.svg'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"更新"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更新"}},[t._v("#")]),t._v(" 更新")]),t._v(" "),a("p",[t._v("Service Worker 版本更新遵循浏览器端生命周期管控机制：当检测到新版本时，后台完成安装后进入待激活状态，此时旧版本仍保持控制权；新版本需在所有关联页面终止对旧实例的引用并满足激活条件后，方可自动激活并接管控制权。")]),t._v(" "),a("p",[t._v("Service Worker 的全局方法 "),a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/ServiceWorkerGlobalScope/skipWaiting",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("skipWaiting()")]),a("OutboundLink")],1),t._v(" 可在检测到新版本时立即激活更新，绕过默认的等待阶段实现快速版本切换，并自动接管当前页面及所有受控客户端的控制权。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'install'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 跳过等待直接激活")]),t._v("\n  self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("skipWaiting")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新版本缓存")]),t._v("\n  event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("waitUntil")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    caches"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'static-v2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("cache")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" \n      cache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/app/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/app/styles.css'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/app/main.js'")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("在用户首次访问时，Service Worker 安装并激活后，不会立即接管现有页面控制权，需页面刷新后生效。该机制影响范围包含所有现有同源客户端页面，包括首次注册 Service Worker 的页面及其他未受控的同源标签页。")]),t._v(" "),a("p",[t._v("可以通过使用 "),a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Clients/claim",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("clients.claim()")]),a("OutboundLink")],1),t._v(" 立即接管所有未被控制的同源客户端，实现无需刷新页面的全域控制权同步，使得后续请求能通过 Service Worker 处理。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'activate'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 立即接管控制权")]),t._v("\n  event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("waitUntil")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clients"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("claim")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("浏览器会在以下时机自动检查 "),a("code",[t._v("sw.js")]),t._v(" 是否更新：")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("页面导航事件")]),t._v("（如跳转、刷新）。")]),t._v(" "),a("li",[a("strong",[t._v("每隔 24 小时")]),t._v("（后台定期轮询，即使页面未刷新）。")]),t._v(" "),a("li",[a("strong",[t._v("手动触发更新")]),t._v("（通过 "),a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/ServiceWorkerRegistration/update",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("registration.update()")]),a("OutboundLink")],1),t._v("）。")])]),t._v(" "),a("p",[t._v("在代码中手动触发更新，通常做法如下代码所示（主线程执行）。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("navigator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("serviceWorker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("register")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/sw.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("reg")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" reg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("可以使用 "),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerGlobalScope/activate_event",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("activate")]),a("OutboundLink")],1),t._v(" 事件从之前的缓存中"),a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Service_Worker_API/Using_Service_Workers#%E5%88%A0%E9%99%A4%E6%97%A7%E7%BC%93%E5%AD%98",target:"_blank",rel:"noopener noreferrer"}},[t._v("移除数据"),a("OutboundLink")],1),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"二、核心-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、核心-api"}},[t._v("#")]),t._v(" 二、核心 API")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("接口对象")]),t._v(" "),a("th",[t._v("核心能力")]),t._v(" "),a("th",[t._v("典型应用场景")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/CacheStorage",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[t._v("CacheStorage")]),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("管理缓存数据库")]),t._v(" "),a("td",[t._v("离线资源存储")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/FetchEvent",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[t._v("FetchEvent")]),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("请求拦截处理")]),t._v(" "),a("td",[t._v("动态资源响应")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Client",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[t._v("Client")]),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("控制关联页面")]),t._v(" "),a("td",[t._v("跨窗口通信")])]),t._v(" "),a("tr",[a("td",[a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Notification",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[t._v("Notification")]),a("OutboundLink")],1)]),t._v(" "),a("td",[t._v("系统通知管理")]),t._v(" "),a("td",[t._v("推送消息展示")])])])]),t._v(" "),a("h3",{attrs:{id:"fetchevent"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fetchevent"}},[t._v("#")]),t._v(" FetchEvent")]),t._v(" "),a("p",[t._v("通过 "),a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/FetchEvent",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("FetchEvent")]),a("OutboundLink")],1),t._v(" 可以自定义请求的响应。")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fetch'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" request "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  \n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 缓存优先策略")]),t._v("\n  event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("respondWith")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    caches"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("match")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("cached")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" \n      cached "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("response")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 动态缓存非API请求")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("includes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/api/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" clone "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clone")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          caches"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("open")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dynamic-v1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("cache")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" \n            cache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" clone"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("实例属性")]),t._v("：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("event."),a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/FetchEvent/request",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[t._v("request")]),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("当前请求对象。")])])]),t._v(" "),a("p",[a("strong",[t._v("实例方法")]),t._v("：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("event."),a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/FetchEvent/respondWith",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[t._v("respondWith")]),a("OutboundLink")],1),t._v("("),a("em",[t._v("response")]),t._v(")")]),t._v(" "),a("p",[t._v("阻止浏览器默认的 "),a("code",[t._v("fetch")]),t._v(" 操作。")])])]),t._v(" "),a("h2",{attrs:{id:"三、缓存策略"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、缓存策略"}},[t._v("#")]),t._v(" 三、缓存策略")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("策略名称")]),t._v(" "),a("th",[t._v("实现方式")]),t._v(" "),a("th",[t._v("适用场景")]),t._v(" "),a("th",[t._v("优缺点分析")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("strong",[t._v("Cache First")])]),t._v(" "),a("td",[t._v("优先返回缓存，无缓存再请求")]),t._v(" "),a("td",[t._v("静态资源")]),t._v(" "),a("td",[t._v("快速但可能陈旧")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("Network First")])]),t._v(" "),a("td",[t._v("先请求网络，失败用缓存")]),t._v(" "),a("td",[t._v("实时性要求高")]),t._v(" "),a("td",[t._v("可靠但延迟较高")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("Stale While Revalidate")])]),t._v(" "),a("td",[t._v("同时返回缓存并更新缓存")]),t._v(" "),a("td",[t._v("可接受短暂陈旧")]),t._v(" "),a("td",[t._v("平衡速度与新鲜度")])])])]),t._v(" "),a("h2",{attrs:{id:"reference"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reference"}},[t._v("#")]),t._v(" Reference")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://gist.github.com/jakearchibald/80368b84ac1ae8e229fc90b3fe826301",target:"_blank",rel:"noopener noreferrer"}},[t._v("jakearchibald/cat.svg"),a("OutboundLink")],1),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://gists.rawgit.com/jakearchibald/80368b84ac1ae8e229fc90b3fe826301/raw/c891abf8ee55b1a65cc433711d047c899409d0ef/",target:"_blank",rel:"noopener noreferrer"}},[t._v("RawGit"),a("OutboundLink")],1)])])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://ithelp.ithome.com.tw/m/articles/10187529",target:"_blank",rel:"noopener noreferrer"}},[t._v("Service Work - "),a("em",[t._v("iT 邦幫忙")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://developers.google.com/web/fundamentals/instant-and-offline/service-worker/lifecycle",target:"_blank",rel:"noopener noreferrer"}},[t._v("Service Worker 生命周期"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://lavas-project.github.io/pwa-book/chapter04/3-service-worker-dive.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Service Worker 工作原理"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tomwang1013.github.io/pwa-clients-claim-vs-self-skipWaiting/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Service Worker 之 "),a("code",[t._v("clients.claim()")]),t._v(" vs "),a("code",[t._v("skipWaiting()")]),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);