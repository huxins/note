(window.webpackJsonp=window.webpackJsonp||[]).push([[236],{549:function(s,a,t){"use strict";t.r(a);var e=t(27),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"s5cmd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#s5cmd"}},[s._v("#")]),s._v(" s5cmd")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/peak/s5cmd",target:"_blank",rel:"noopener noreferrer"}},[a("code",[s._v("s5cmd")]),a("OutboundLink")],1),s._v(" 是一个非常快速的 S3 和本地文件系统执行工具。")]),s._v(" "),a("h2",{attrs:{id:"一、安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、安装"}},[s._v("#")]),s._v(" 一、安装")]),s._v(" "),a("h3",{attrs:{id:"二进制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二进制"}},[s._v("#")]),s._v(" 二进制")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-O")]),s._v(" s5cmd.tar.gz https://github.com/peak/s5cmd/releases/download/v2.2.2/s5cmd_2.2.2_Linux-64bit.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" zxvf s5cmd.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" s5cmd /usr/local/bin/s5cmd\n")])])]),a("h2",{attrs:{id:"二、配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、配置"}},[s._v("#")]),s._v(" 二、配置")]),s._v(" "),a("p",[a("code",[s._v("s5cmd")]),s._v(" 使用 AWS 官方 SDK 访问 S3，SDK 需要凭据来签署向 AWS 发出的请求。")]),s._v(" "),a("p",[s._v("提供"),a("a",{attrs:{href:"https://docs.aws.amazon.com/zh_cn/cli/latest/userguide/cli-chap-configure.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("凭据"),a("OutboundLink")],1),s._v("的方式有多种：")]),s._v(" "),a("ul",[a("li",[a("p",[a("strong",[s._v("凭证文件")])]),s._v(" "),a("p",[s._v("像 AWS CLI 一样，设置"),a("a",{attrs:{href:"https://docs.aws.amazon.com/zh_cn/cli/latest/userguide/cli-configure-files.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("凭证文件"),a("OutboundLink")],1),s._v("。")]),s._v(" "),a("p",[s._v("新建 "),a("code",[s._v("~/.aws/credentials")]),s._v(" 文件。")]),s._v(" "),a("div",{staticClass:"language-ini extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token section"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("default")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("aws_access_key_id")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("AKIAIOSFODNN7EXAMPLE")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("aws_secret_access_key")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY")]),s._v("\n")])])]),a("p",[s._v("新建 "),a("code",[s._v("~/.aws/config")]),s._v(" 文件。")]),s._v(" "),a("div",{staticClass:"language-ini extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token section"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("default")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("region")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("us-west-2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("output")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("json")]),s._v("\n")])])]),a("p",[s._v("配置完成后，发送 "),a("code",[s._v("ListObjects")]),s._v(" 请求进行测试。")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("s5cmd --endpoint-url http://s3.us-north-1.qiniucs.com "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" s3://my-company-bucket/\n")])])])]),s._v(" "),a("li",[a("p",[a("strong",[s._v("环境变量")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("AWS_ACCESS_KEY_ID")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("AKIAIOSFODNN7EXAMPLE\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("AWS_SECRET_ACCESS_KEY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("AWS_DEFAULT_REGION")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("us-west-2\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("S3_ENDPOINT_URL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://s3.us-north-1.qiniucs.com"')]),s._v("\ns5cmd "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" s3://my-company-bucket/\n")])])])])]),s._v(" "),a("h2",{attrs:{id:"三、使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、使用"}},[s._v("#")]),s._v(" 三、使用")]),s._v(" "),a("h3",{attrs:{id:"上传文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#上传文件"}},[s._v("#")]),s._v(" 上传文件")]),s._v(" "),a("p",[s._v("上传单个文件。")]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("s5cmd "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" object.gz s3://bucket/\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);