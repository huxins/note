<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PostgreSQL | 偷影子的人</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="你在，春华秋实夏蝉冬雪。">
    
    <link rel="preload" href="/assets/css/0.styles.f3e2e2a4.css" as="style"><link rel="preload" href="/assets/js/app.26e764c1.js" as="script"><link rel="preload" href="/assets/js/2.fbd8ae4c.js" as="script"><link rel="preload" href="/assets/js/1.36b86acd.js" as="script"><link rel="preload" href="/assets/js/210.bbd7e189.js" as="script"><link rel="prefetch" href="/assets/js/10.f9290ab4.js"><link rel="prefetch" href="/assets/js/100.382cb6e0.js"><link rel="prefetch" href="/assets/js/101.123c0127.js"><link rel="prefetch" href="/assets/js/102.634002a8.js"><link rel="prefetch" href="/assets/js/103.bc93a69d.js"><link rel="prefetch" href="/assets/js/104.03f88858.js"><link rel="prefetch" href="/assets/js/105.ea7c37c5.js"><link rel="prefetch" href="/assets/js/106.f6f31056.js"><link rel="prefetch" href="/assets/js/107.9af9d201.js"><link rel="prefetch" href="/assets/js/108.9e629ffa.js"><link rel="prefetch" href="/assets/js/109.e6132df5.js"><link rel="prefetch" href="/assets/js/11.3642076d.js"><link rel="prefetch" href="/assets/js/110.24b94b0a.js"><link rel="prefetch" href="/assets/js/111.adc17da6.js"><link rel="prefetch" href="/assets/js/112.6be94f38.js"><link rel="prefetch" href="/assets/js/113.5f067daa.js"><link rel="prefetch" href="/assets/js/114.ccdf12b3.js"><link rel="prefetch" href="/assets/js/115.2d494def.js"><link rel="prefetch" href="/assets/js/116.06327632.js"><link rel="prefetch" href="/assets/js/117.4bdef7f5.js"><link rel="prefetch" href="/assets/js/118.48bbd765.js"><link rel="prefetch" href="/assets/js/119.f5fe2448.js"><link rel="prefetch" href="/assets/js/12.d477a3d7.js"><link rel="prefetch" href="/assets/js/120.2faa0850.js"><link rel="prefetch" href="/assets/js/121.260ae837.js"><link rel="prefetch" href="/assets/js/122.91a798a4.js"><link rel="prefetch" href="/assets/js/123.883192e5.js"><link rel="prefetch" href="/assets/js/124.3055365d.js"><link rel="prefetch" href="/assets/js/125.23c33b14.js"><link rel="prefetch" href="/assets/js/126.bcc0c86f.js"><link rel="prefetch" href="/assets/js/127.610ac4e2.js"><link rel="prefetch" href="/assets/js/128.66e69a56.js"><link rel="prefetch" href="/assets/js/129.dc7e0e22.js"><link rel="prefetch" href="/assets/js/13.fdc0cb88.js"><link rel="prefetch" href="/assets/js/130.d5328c60.js"><link rel="prefetch" href="/assets/js/131.e32561c5.js"><link rel="prefetch" href="/assets/js/132.bbe59604.js"><link rel="prefetch" href="/assets/js/133.85128019.js"><link rel="prefetch" href="/assets/js/134.f3d8e386.js"><link rel="prefetch" href="/assets/js/135.2385c350.js"><link rel="prefetch" href="/assets/js/136.626375a0.js"><link rel="prefetch" href="/assets/js/137.83399c47.js"><link rel="prefetch" href="/assets/js/138.4d1e6582.js"><link rel="prefetch" href="/assets/js/139.d3efe04e.js"><link rel="prefetch" href="/assets/js/14.8652bbfc.js"><link rel="prefetch" href="/assets/js/140.c4e7fd05.js"><link rel="prefetch" href="/assets/js/141.648db750.js"><link rel="prefetch" href="/assets/js/142.d807cd59.js"><link rel="prefetch" href="/assets/js/143.ab924d26.js"><link rel="prefetch" href="/assets/js/144.b8e23446.js"><link rel="prefetch" href="/assets/js/145.4295c6ff.js"><link rel="prefetch" href="/assets/js/146.30b06925.js"><link rel="prefetch" href="/assets/js/147.3b6490b7.js"><link rel="prefetch" href="/assets/js/148.9cdf13b2.js"><link rel="prefetch" href="/assets/js/149.8d554acf.js"><link rel="prefetch" href="/assets/js/15.0924230e.js"><link rel="prefetch" href="/assets/js/150.24e6db5b.js"><link rel="prefetch" href="/assets/js/151.a10d09ac.js"><link rel="prefetch" href="/assets/js/152.bfc36b3a.js"><link rel="prefetch" href="/assets/js/153.fc589bcf.js"><link rel="prefetch" href="/assets/js/154.8f8ef57a.js"><link rel="prefetch" href="/assets/js/155.5a44283b.js"><link rel="prefetch" href="/assets/js/156.798d1c61.js"><link rel="prefetch" href="/assets/js/157.79dca306.js"><link rel="prefetch" href="/assets/js/158.1c981e76.js"><link rel="prefetch" href="/assets/js/159.1ec798ac.js"><link rel="prefetch" href="/assets/js/16.6370dde0.js"><link rel="prefetch" href="/assets/js/160.7c76094b.js"><link rel="prefetch" href="/assets/js/161.7d9200fd.js"><link rel="prefetch" href="/assets/js/162.7840af56.js"><link rel="prefetch" href="/assets/js/163.4ab2b7e3.js"><link rel="prefetch" href="/assets/js/164.9df265fb.js"><link rel="prefetch" href="/assets/js/165.c7b3aa16.js"><link rel="prefetch" href="/assets/js/166.a6c04cfb.js"><link rel="prefetch" href="/assets/js/167.428a5696.js"><link rel="prefetch" href="/assets/js/168.2df823f8.js"><link rel="prefetch" href="/assets/js/169.4b755137.js"><link rel="prefetch" href="/assets/js/17.40f5acbf.js"><link rel="prefetch" href="/assets/js/170.77002315.js"><link rel="prefetch" href="/assets/js/171.06c63be3.js"><link rel="prefetch" href="/assets/js/172.b4e0f83d.js"><link rel="prefetch" href="/assets/js/173.a316476e.js"><link rel="prefetch" href="/assets/js/174.96f2d995.js"><link rel="prefetch" href="/assets/js/175.09dfde29.js"><link rel="prefetch" href="/assets/js/176.36fac859.js"><link rel="prefetch" href="/assets/js/177.a1186054.js"><link rel="prefetch" href="/assets/js/178.6308f1c0.js"><link rel="prefetch" href="/assets/js/179.cc3c37e1.js"><link rel="prefetch" href="/assets/js/18.1198418d.js"><link rel="prefetch" href="/assets/js/180.3cdeb401.js"><link rel="prefetch" href="/assets/js/181.f6c50db1.js"><link rel="prefetch" href="/assets/js/182.b834eb68.js"><link rel="prefetch" href="/assets/js/183.2993debc.js"><link rel="prefetch" href="/assets/js/184.eb1dc8e8.js"><link rel="prefetch" href="/assets/js/185.da64597a.js"><link rel="prefetch" href="/assets/js/186.111a7473.js"><link rel="prefetch" href="/assets/js/187.c125876a.js"><link rel="prefetch" href="/assets/js/188.cf1afd07.js"><link rel="prefetch" href="/assets/js/189.1c70e820.js"><link rel="prefetch" href="/assets/js/19.9231050b.js"><link rel="prefetch" href="/assets/js/190.762c40b4.js"><link rel="prefetch" href="/assets/js/191.625ac8d4.js"><link rel="prefetch" href="/assets/js/192.4d801cde.js"><link rel="prefetch" href="/assets/js/193.7c00f9a9.js"><link rel="prefetch" href="/assets/js/194.ce783697.js"><link rel="prefetch" href="/assets/js/195.adc9f1b5.js"><link rel="prefetch" href="/assets/js/196.3106e5d2.js"><link rel="prefetch" href="/assets/js/197.b602befa.js"><link rel="prefetch" href="/assets/js/198.f92420ac.js"><link rel="prefetch" href="/assets/js/199.99a2e574.js"><link rel="prefetch" href="/assets/js/20.91723d19.js"><link rel="prefetch" href="/assets/js/200.b7d77a13.js"><link rel="prefetch" href="/assets/js/201.7baf4c1c.js"><link rel="prefetch" href="/assets/js/202.5784f1c1.js"><link rel="prefetch" href="/assets/js/203.282cbf5e.js"><link rel="prefetch" href="/assets/js/204.efe2ba54.js"><link rel="prefetch" href="/assets/js/205.ad5c2b97.js"><link rel="prefetch" href="/assets/js/206.adf8d7a2.js"><link rel="prefetch" href="/assets/js/207.0b5bc755.js"><link rel="prefetch" href="/assets/js/208.4c44730d.js"><link rel="prefetch" href="/assets/js/209.d7b7382d.js"><link rel="prefetch" href="/assets/js/21.0d839817.js"><link rel="prefetch" href="/assets/js/211.226de5a9.js"><link rel="prefetch" href="/assets/js/212.b25f4edb.js"><link rel="prefetch" href="/assets/js/213.a780b63d.js"><link rel="prefetch" href="/assets/js/214.f72c0ebb.js"><link rel="prefetch" href="/assets/js/215.17a6b0cd.js"><link rel="prefetch" href="/assets/js/216.c35c604d.js"><link rel="prefetch" href="/assets/js/217.dbcdb695.js"><link rel="prefetch" href="/assets/js/218.8616155b.js"><link rel="prefetch" href="/assets/js/219.c1ad65f0.js"><link rel="prefetch" href="/assets/js/22.ab19b397.js"><link rel="prefetch" href="/assets/js/220.e2c3d913.js"><link rel="prefetch" href="/assets/js/221.f085f4cc.js"><link rel="prefetch" href="/assets/js/222.b3914a2d.js"><link rel="prefetch" href="/assets/js/223.cc42d467.js"><link rel="prefetch" href="/assets/js/224.4446c0bf.js"><link rel="prefetch" href="/assets/js/225.889f1eef.js"><link rel="prefetch" href="/assets/js/226.80465316.js"><link rel="prefetch" href="/assets/js/227.bef2a223.js"><link rel="prefetch" href="/assets/js/228.3a4308a7.js"><link rel="prefetch" href="/assets/js/229.ab7cc470.js"><link rel="prefetch" href="/assets/js/23.93221970.js"><link rel="prefetch" href="/assets/js/230.4ca71f69.js"><link rel="prefetch" href="/assets/js/231.4082a004.js"><link rel="prefetch" href="/assets/js/232.f9b10ab6.js"><link rel="prefetch" href="/assets/js/233.6786a66b.js"><link rel="prefetch" href="/assets/js/234.57fbadfb.js"><link rel="prefetch" href="/assets/js/235.ae63d43d.js"><link rel="prefetch" href="/assets/js/236.332b4a3c.js"><link rel="prefetch" href="/assets/js/237.9cd3c9d1.js"><link rel="prefetch" href="/assets/js/238.93d504a0.js"><link rel="prefetch" href="/assets/js/239.6bf3284a.js"><link rel="prefetch" href="/assets/js/24.53be4ac8.js"><link rel="prefetch" href="/assets/js/240.718fdeba.js"><link rel="prefetch" href="/assets/js/241.34bf3b89.js"><link rel="prefetch" href="/assets/js/242.370557f4.js"><link rel="prefetch" href="/assets/js/243.1d29714a.js"><link rel="prefetch" href="/assets/js/244.c7b7f215.js"><link rel="prefetch" href="/assets/js/245.ac7d9a97.js"><link rel="prefetch" href="/assets/js/246.9dae41bc.js"><link rel="prefetch" href="/assets/js/247.847b1250.js"><link rel="prefetch" href="/assets/js/248.ee784f98.js"><link rel="prefetch" href="/assets/js/249.d9fcacc2.js"><link rel="prefetch" href="/assets/js/25.6a759ded.js"><link rel="prefetch" href="/assets/js/250.07fdf8d9.js"><link rel="prefetch" href="/assets/js/251.f8aef33d.js"><link rel="prefetch" href="/assets/js/252.422eaba4.js"><link rel="prefetch" href="/assets/js/253.9096defe.js"><link rel="prefetch" href="/assets/js/254.82542457.js"><link rel="prefetch" href="/assets/js/255.d7db3f0f.js"><link rel="prefetch" href="/assets/js/256.558f82e7.js"><link rel="prefetch" href="/assets/js/257.1621b7a7.js"><link rel="prefetch" href="/assets/js/258.66be29ca.js"><link rel="prefetch" href="/assets/js/259.19940ba0.js"><link rel="prefetch" href="/assets/js/26.73aa3261.js"><link rel="prefetch" href="/assets/js/260.5ed3ac15.js"><link rel="prefetch" href="/assets/js/261.0e7955f5.js"><link rel="prefetch" href="/assets/js/262.aa4f6899.js"><link rel="prefetch" href="/assets/js/263.3b4e7d7e.js"><link rel="prefetch" href="/assets/js/264.86766e96.js"><link rel="prefetch" href="/assets/js/265.12450c37.js"><link rel="prefetch" href="/assets/js/266.42c1c8b6.js"><link rel="prefetch" href="/assets/js/267.0a9d5170.js"><link rel="prefetch" href="/assets/js/268.0f9f3e97.js"><link rel="prefetch" href="/assets/js/269.e6119111.js"><link rel="prefetch" href="/assets/js/27.2ecebcaf.js"><link rel="prefetch" href="/assets/js/270.2d434d07.js"><link rel="prefetch" href="/assets/js/28.8c3e8d4d.js"><link rel="prefetch" href="/assets/js/29.aea3f323.js"><link rel="prefetch" href="/assets/js/3.39db2c88.js"><link rel="prefetch" href="/assets/js/30.7b5bdb01.js"><link rel="prefetch" href="/assets/js/31.eeb80769.js"><link rel="prefetch" href="/assets/js/32.3df9ee43.js"><link rel="prefetch" href="/assets/js/33.06f8435e.js"><link rel="prefetch" href="/assets/js/34.b26af0b3.js"><link rel="prefetch" href="/assets/js/35.0e2b9e77.js"><link rel="prefetch" href="/assets/js/36.df007a94.js"><link rel="prefetch" href="/assets/js/37.1114c553.js"><link rel="prefetch" href="/assets/js/38.86d8a338.js"><link rel="prefetch" href="/assets/js/39.0cd99bce.js"><link rel="prefetch" href="/assets/js/4.88a56df4.js"><link rel="prefetch" href="/assets/js/40.7be0da80.js"><link rel="prefetch" href="/assets/js/41.50cbfed9.js"><link rel="prefetch" href="/assets/js/42.a8ee22a7.js"><link rel="prefetch" href="/assets/js/43.8c067420.js"><link rel="prefetch" href="/assets/js/44.fd647e60.js"><link rel="prefetch" href="/assets/js/45.93e9e590.js"><link rel="prefetch" href="/assets/js/46.54e7a19c.js"><link rel="prefetch" href="/assets/js/47.b689b004.js"><link rel="prefetch" href="/assets/js/48.c227e546.js"><link rel="prefetch" href="/assets/js/49.f7843907.js"><link rel="prefetch" href="/assets/js/5.b7f90e93.js"><link rel="prefetch" href="/assets/js/50.dc8352d2.js"><link rel="prefetch" href="/assets/js/51.222af0e8.js"><link rel="prefetch" href="/assets/js/52.3737e9a2.js"><link rel="prefetch" href="/assets/js/53.8b6c114b.js"><link rel="prefetch" href="/assets/js/54.032ff63e.js"><link rel="prefetch" href="/assets/js/55.8bf50a38.js"><link rel="prefetch" href="/assets/js/56.64d6453f.js"><link rel="prefetch" href="/assets/js/57.577425b0.js"><link rel="prefetch" href="/assets/js/58.efbb78fe.js"><link rel="prefetch" href="/assets/js/59.e020f767.js"><link rel="prefetch" href="/assets/js/6.5e3ab303.js"><link rel="prefetch" href="/assets/js/60.ab4a5b20.js"><link rel="prefetch" href="/assets/js/61.997121af.js"><link rel="prefetch" href="/assets/js/62.3ae5d914.js"><link rel="prefetch" href="/assets/js/63.8072cead.js"><link rel="prefetch" href="/assets/js/64.0bea65d6.js"><link rel="prefetch" href="/assets/js/65.ed853767.js"><link rel="prefetch" href="/assets/js/66.298b6015.js"><link rel="prefetch" href="/assets/js/67.4bb3cf7c.js"><link rel="prefetch" href="/assets/js/68.992d0241.js"><link rel="prefetch" href="/assets/js/69.e4fd6506.js"><link rel="prefetch" href="/assets/js/7.59feaf69.js"><link rel="prefetch" href="/assets/js/70.2b437236.js"><link rel="prefetch" href="/assets/js/71.910913f9.js"><link rel="prefetch" href="/assets/js/72.0d0664fe.js"><link rel="prefetch" href="/assets/js/73.a404e451.js"><link rel="prefetch" href="/assets/js/74.1eca8bcf.js"><link rel="prefetch" href="/assets/js/75.999a5733.js"><link rel="prefetch" href="/assets/js/76.1902a309.js"><link rel="prefetch" href="/assets/js/77.72f88aad.js"><link rel="prefetch" href="/assets/js/78.b73d3576.js"><link rel="prefetch" href="/assets/js/79.8a639b82.js"><link rel="prefetch" href="/assets/js/80.29bb5d44.js"><link rel="prefetch" href="/assets/js/81.bac08b3e.js"><link rel="prefetch" href="/assets/js/82.2644c84d.js"><link rel="prefetch" href="/assets/js/83.71771fcc.js"><link rel="prefetch" href="/assets/js/84.826a929a.js"><link rel="prefetch" href="/assets/js/85.6e413b7b.js"><link rel="prefetch" href="/assets/js/86.a9c4bb93.js"><link rel="prefetch" href="/assets/js/87.97d001e0.js"><link rel="prefetch" href="/assets/js/88.ba363f72.js"><link rel="prefetch" href="/assets/js/89.955a2442.js"><link rel="prefetch" href="/assets/js/90.f63b2478.js"><link rel="prefetch" href="/assets/js/91.46ef79ce.js"><link rel="prefetch" href="/assets/js/92.331a5f68.js"><link rel="prefetch" href="/assets/js/93.71fa0fc9.js"><link rel="prefetch" href="/assets/js/94.3d198995.js"><link rel="prefetch" href="/assets/js/95.21680ca5.js"><link rel="prefetch" href="/assets/js/96.06021050.js"><link rel="prefetch" href="/assets/js/97.1626f156.js"><link rel="prefetch" href="/assets/js/98.1c48fd7b.js"><link rel="prefetch" href="/assets/js/99.10a10dbe.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.d852a880.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f3e2e2a4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">偷影子的人</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机硬件" class="dropdown-title"><span class="title">计算机硬件</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机硬件" class="mobile-dropdown-title"><span class="title">计算机硬件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/001 - 计算机硬件/存储设备/" class="nav-link">
  存储设备
</a></li><li class="dropdown-item"><!----> <a href="/001 - 计算机硬件/手机/" class="nav-link">
  手机
</a></li><li class="dropdown-item"><!----> <a href="/001 - 计算机硬件/品牌机/" class="nav-link">
  品牌机
</a></li><li class="dropdown-item"><!----> <a href="/001 - 计算机硬件/电脑配件/" class="nav-link">
  电脑配件
</a></li><li class="dropdown-item"><!----> <a href="/001 - 计算机硬件/计算机管理/" class="nav-link">
  计算机管理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机系统" class="dropdown-title"><span class="title">计算机系统</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机系统" class="mobile-dropdown-title"><span class="title">计算机系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/002 - 计算机系统/存储管理/" class="nav-link">
  存储管理
</a></li><li class="dropdown-item"><!----> <a href="/002 - 计算机系统/数据表示/" class="nav-link">
  数据表示
</a></li><li class="dropdown-item"><!----> <a href="/002 - 计算机系统/数据结构/" class="nav-link">
  数据结构
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="软件开发" class="dropdown-title"><span class="title">软件开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="软件开发" class="mobile-dropdown-title"><span class="title">软件开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/003 - 软件开发/开发工具/" class="nav-link">
  开发工具
</a></li><li class="dropdown-item"><!----> <a href="/003 - 软件开发/软件服务/" class="nav-link">
  软件服务
</a></li><li class="dropdown-item"><!----> <a href="/003 - 软件开发/软件工程/" class="nav-link">
  软件工程
</a></li><li class="dropdown-item"><!----> <a href="/003 - 软件开发/网络技术/" class="nav-link">
  网络技术
</a></li><li class="dropdown-item"><!----> <a href="/003 - 软件开发/文件格式/" class="nav-link">
  文件格式
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="生活技能" class="dropdown-title"><span class="title">生活技能</span> <span class="arrow down"></span></button> <button type="button" aria-label="生活技能" class="mobile-dropdown-title"><span class="title">生活技能</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/004 - 生活技能/购物指南/" class="nav-link">
  购物指南
</a></li><li class="dropdown-item"><!----> <a href="/004 - 生活技能/娱乐游戏/" class="nav-link">
  娱乐游戏
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/101 - 前端基础/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/101 - 前端基础/HTML/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/101 - 前端基础/JavaScript/" class="nav-link">
  JavaScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端开发" class="dropdown-title"><span class="title">前端开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端开发" class="mobile-dropdown-title"><span class="title">前端开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/102 - 前端开发/Vanilla/" class="nav-link">
  Vanilla
</a></li><li class="dropdown-item"><!----> <a href="/102 - 前端开发/Vue/" class="nav-link">
  Vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端语言" class="dropdown-title"><span class="title">后端语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端语言" class="mobile-dropdown-title"><span class="title">后端语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/201 - 后端语言/CSharp/" class="nav-link">
  CSharp
</a></li><li class="dropdown-item"><!----> <a href="/201 - 后端语言/Java/" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/201 - 后端语言/Node/" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/201 - 后端语言/Python/" class="nav-link">
  Python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端开发" class="dropdown-title"><span class="title">后端开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端开发" class="mobile-dropdown-title"><span class="title">后端开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/202 - 后端开发/Database/" class="nav-link">
  Database
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维部署" class="dropdown-title"><span class="title">运维部署</span> <span class="arrow down"></span></button> <button type="button" aria-label="运维部署" class="mobile-dropdown-title"><span class="title">运维部署</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/301 - 运维部署/Cloud/" class="nav-link">
  Cloud
</a></li><li class="dropdown-item"><!----> <a href="/301 - 运维部署/Command/" class="nav-link">
  Command
</a></li><li class="dropdown-item"><!----> <a href="/301 - 运维部署/DevOps/" class="nav-link">
  DevOps
</a></li><li class="dropdown-item"><!----> <a href="/301 - 运维部署/Proxmox VE/" class="nav-link">
  Proxmox VE
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="操作系统" class="dropdown-title"><span class="title">操作系统</span> <span class="arrow down"></span></button> <button type="button" aria-label="操作系统" class="mobile-dropdown-title"><span class="title">操作系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/302 - 操作系统/Linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/302 - 操作系统/Windows/" class="nav-link">
  Windows
</a></li></ul></div></div><div class="nav-item"><a href="https://inxiny.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  导航
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机硬件" class="dropdown-title"><span class="title">计算机硬件</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机硬件" class="mobile-dropdown-title"><span class="title">计算机硬件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/001 - 计算机硬件/存储设备/" class="nav-link">
  存储设备
</a></li><li class="dropdown-item"><!----> <a href="/001 - 计算机硬件/手机/" class="nav-link">
  手机
</a></li><li class="dropdown-item"><!----> <a href="/001 - 计算机硬件/品牌机/" class="nav-link">
  品牌机
</a></li><li class="dropdown-item"><!----> <a href="/001 - 计算机硬件/电脑配件/" class="nav-link">
  电脑配件
</a></li><li class="dropdown-item"><!----> <a href="/001 - 计算机硬件/计算机管理/" class="nav-link">
  计算机管理
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机系统" class="dropdown-title"><span class="title">计算机系统</span> <span class="arrow down"></span></button> <button type="button" aria-label="计算机系统" class="mobile-dropdown-title"><span class="title">计算机系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/002 - 计算机系统/存储管理/" class="nav-link">
  存储管理
</a></li><li class="dropdown-item"><!----> <a href="/002 - 计算机系统/数据表示/" class="nav-link">
  数据表示
</a></li><li class="dropdown-item"><!----> <a href="/002 - 计算机系统/数据结构/" class="nav-link">
  数据结构
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="软件开发" class="dropdown-title"><span class="title">软件开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="软件开发" class="mobile-dropdown-title"><span class="title">软件开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/003 - 软件开发/开发工具/" class="nav-link">
  开发工具
</a></li><li class="dropdown-item"><!----> <a href="/003 - 软件开发/软件服务/" class="nav-link">
  软件服务
</a></li><li class="dropdown-item"><!----> <a href="/003 - 软件开发/软件工程/" class="nav-link">
  软件工程
</a></li><li class="dropdown-item"><!----> <a href="/003 - 软件开发/网络技术/" class="nav-link">
  网络技术
</a></li><li class="dropdown-item"><!----> <a href="/003 - 软件开发/文件格式/" class="nav-link">
  文件格式
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="生活技能" class="dropdown-title"><span class="title">生活技能</span> <span class="arrow down"></span></button> <button type="button" aria-label="生活技能" class="mobile-dropdown-title"><span class="title">生活技能</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/004 - 生活技能/购物指南/" class="nav-link">
  购物指南
</a></li><li class="dropdown-item"><!----> <a href="/004 - 生活技能/娱乐游戏/" class="nav-link">
  娱乐游戏
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/101 - 前端基础/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/101 - 前端基础/HTML/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/101 - 前端基础/JavaScript/" class="nav-link">
  JavaScript
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端开发" class="dropdown-title"><span class="title">前端开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端开发" class="mobile-dropdown-title"><span class="title">前端开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/102 - 前端开发/Vanilla/" class="nav-link">
  Vanilla
</a></li><li class="dropdown-item"><!----> <a href="/102 - 前端开发/Vue/" class="nav-link">
  Vue
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端语言" class="dropdown-title"><span class="title">后端语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端语言" class="mobile-dropdown-title"><span class="title">后端语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/201 - 后端语言/CSharp/" class="nav-link">
  CSharp
</a></li><li class="dropdown-item"><!----> <a href="/201 - 后端语言/Java/" class="nav-link">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/201 - 后端语言/Node/" class="nav-link">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/201 - 后端语言/Python/" class="nav-link">
  Python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端开发" class="dropdown-title"><span class="title">后端开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端开发" class="mobile-dropdown-title"><span class="title">后端开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/202 - 后端开发/Database/" class="nav-link">
  Database
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维部署" class="dropdown-title"><span class="title">运维部署</span> <span class="arrow down"></span></button> <button type="button" aria-label="运维部署" class="mobile-dropdown-title"><span class="title">运维部署</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/301 - 运维部署/Cloud/" class="nav-link">
  Cloud
</a></li><li class="dropdown-item"><!----> <a href="/301 - 运维部署/Command/" class="nav-link">
  Command
</a></li><li class="dropdown-item"><!----> <a href="/301 - 运维部署/DevOps/" class="nav-link">
  DevOps
</a></li><li class="dropdown-item"><!----> <a href="/301 - 运维部署/Proxmox VE/" class="nav-link">
  Proxmox VE
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="操作系统" class="dropdown-title"><span class="title">操作系统</span> <span class="arrow down"></span></button> <button type="button" aria-label="操作系统" class="mobile-dropdown-title"><span class="title">操作系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/302 - 操作系统/Linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/302 - 操作系统/Windows/" class="nav-link">
  Windows
</a></li></ul></div></div><div class="nav-item"><a href="https://inxiny.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  导航
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/202 - 后端开发/Database/MySQL.html" class="sidebar-link">MySQL</a></li><li><a href="/202 - 后端开发/Database/PostgreSQL.html" class="active sidebar-link">PostgreSQL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/202 - 后端开发/Database/PostgreSQL.html#一、安装" class="sidebar-link">一、安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/202 - 后端开发/Database/PostgreSQL.html#red-hat" class="sidebar-link">Red Hat</a></li><li class="sidebar-sub-header"><a href="/202 - 后端开发/Database/PostgreSQL.html#debian" class="sidebar-link">Debian</a></li><li class="sidebar-sub-header"><a href="/202 - 后端开发/Database/PostgreSQL.html#docker" class="sidebar-link">Docker</a></li></ul></li><li class="sidebar-sub-header"><a href="/202 - 后端开发/Database/PostgreSQL.html#二、约束条件" class="sidebar-link">二、约束条件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/202 - 后端开发/Database/PostgreSQL.html#检查约束" class="sidebar-link">检查约束</a></li><li class="sidebar-sub-header"><a href="/202 - 后端开发/Database/PostgreSQL.html#非空约束" class="sidebar-link">非空约束</a></li><li class="sidebar-sub-header"><a href="/202 - 后端开发/Database/PostgreSQL.html#唯一约束" class="sidebar-link">唯一约束</a></li><li class="sidebar-sub-header"><a href="/202 - 后端开发/Database/PostgreSQL.html#主键约束" class="sidebar-link">主键约束</a></li><li class="sidebar-sub-header"><a href="/202 - 后端开发/Database/PostgreSQL.html#外键约束" class="sidebar-link">外键约束</a></li></ul></li><li class="sidebar-sub-header"><a href="/202 - 后端开发/Database/PostgreSQL.html#三、函数" class="sidebar-link">三、函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/202 - 后端开发/Database/PostgreSQL.html#序列" class="sidebar-link">序列</a></li></ul></li><li class="sidebar-sub-header"><a href="/202 - 后端开发/Database/PostgreSQL.html#四、服务器管理" class="sidebar-link">四、服务器管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/202 - 后端开发/Database/PostgreSQL.html#服务器配置" class="sidebar-link">服务器配置</a></li><li class="sidebar-sub-header"><a href="/202 - 后端开发/Database/PostgreSQL.html#客户端认证" class="sidebar-link">客户端认证</a></li><li class="sidebar-sub-header"><a href="/202 - 后端开发/Database/PostgreSQL.html#账户管理" class="sidebar-link">账户管理</a></li></ul></li><li class="sidebar-sub-header"><a href="/202 - 后端开发/Database/PostgreSQL.html#五、命令行程序" class="sidebar-link">五、命令行程序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/202 - 后端开发/Database/PostgreSQL.html#initdb" class="sidebar-link">initdb</a></li><li class="sidebar-sub-header"><a href="/202 - 后端开发/Database/PostgreSQL.html#createuser" class="sidebar-link">createuser</a></li><li class="sidebar-sub-header"><a href="/202 - 后端开发/Database/PostgreSQL.html#psql" class="sidebar-link">psql</a></li><li class="sidebar-sub-header"><a href="/202 - 后端开发/Database/PostgreSQL.html#pg-dump" class="sidebar-link">pg_dump</a></li><li class="sidebar-sub-header"><a href="/202 - 后端开发/Database/PostgreSQL.html#pg-controldata" class="sidebar-link">pg_controldata</a></li></ul></li></ul></li><li><a href="/202 - 后端开发/Database/SQL.html" class="sidebar-link">SQL</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="postgresql"><a href="#postgresql" class="header-anchor">#</a> PostgreSQL</h1> <p><a href="https://www.postgresql.org/docs/current/index.html" target="_blank" rel="noopener noreferrer">PostgreSQL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 是一个强大的开源对象关系数据库系统，它使用并扩展了 SQL 语言，并结合了许多功能，可以安全地存储和扩展最复杂的数据工作负载。</p> <h2 id="一、安装"><a href="#一、安装" class="header-anchor">#</a> 一、安装</h2> <h3 id="red-hat"><a href="#red-hat" class="header-anchor">#</a> Red Hat</h3> <p>要使用 PostgreSQL <a href="https://www.postgresql.org/download/linux/redhat/" target="_blank" rel="noopener noreferrer">Yum Repository<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，请按以下步骤操作。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>yum <span class="token function">install</span> <span class="token parameter variable">-y</span> https://download.postgresql.org/pub/repos/yum/reporpms/EL-7-x86_64/pgdg-redhat-repo-latest.noarch.rpm
yum <span class="token function">install</span> <span class="token parameter variable">-y</span> postgresql12-server
</code></pre></div><p>切换腾讯镜像源进行网络加速。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'s|download.postgresql.org/pub|mirrors.cloud.tencent.com/postgresql|g'</span> /etc/yum.repos.d/pgdg-redhat-all.repo
</code></pre></div><p>初始化数据库并启动服务。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>/usr/pgsql-12/bin/postgresql-12-setup initdb
systemctl <span class="token builtin class-name">enable</span> postgresql-12
systemctl start postgresql-12
</code></pre></div><h3 id="debian"><a href="#debian" class="header-anchor">#</a> Debian</h3> <p><a href="https://www.postgresql.org/download/linux/debian/" target="_blank" rel="noopener noreferrer">Debian<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 默认包含 PostgreSQL。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">apt</span> <span class="token function">install</span> postgresql
</code></pre></div><h3 id="docker"><a href="#docker" class="header-anchor">#</a> Docker</h3> <p>Docker 可以不受宿主机的限制，安装各种版本的 PostgreSQL。</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">5432</span>:5432 <span class="token parameter variable">--name</span> postgres <span class="token punctuation">\</span>
  <span class="token parameter variable">--restart</span> always <span class="token punctuation">\</span>
  <span class="token parameter variable">-e</span> <span class="token assign-left variable">POSTGRES_PASSWORD</span><span class="token operator">=</span>password <span class="token punctuation">\</span>
  <span class="token parameter variable">-e</span> <span class="token assign-left variable">TZ</span><span class="token operator">=</span>Asia/Shanghai <span class="token punctuation">\</span>
  <span class="token parameter variable">-v</span> /var/lib/postgres/data:/var/lib/postgresql/data <span class="token punctuation">\</span>
  postgres:10.7-alpine
</code></pre></div><p><code>PGDATA</code> 在 <a href="https://hub.docker.com/_/postgres" target="_blank" rel="noopener noreferrer">Docker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 中的默认路径为 <code>/var/lib/postgresql/data</code>，需要持久化数据时，请将此目录挂载到宿主机。</p> <h2 id="二、约束条件"><a href="#二、约束条件" class="header-anchor">#</a> 二、约束条件</h2> <h3 id="检查约束"><a href="#检查约束" class="header-anchor">#</a> 检查约束</h3> <p><a href="https://www.postgresql.org/docs/current/ddl-constraints.html#DDL-CONSTRAINTS-CHECK-CONSTRAINTS" target="_blank" rel="noopener noreferrer">检查约束<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>是最通用的约束类型。它允许我们指定特定列中的值必须满足布尔表达式。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 要求正值的产品价格</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> products <span class="token punctuation">(</span>
    product_no <span class="token keyword">integer</span><span class="token punctuation">,</span>
    name <span class="token keyword">text</span><span class="token punctuation">,</span>
    price <span class="token keyword">numeric</span> <span class="token keyword">CHECK</span> <span class="token punctuation">(</span>price <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>可以给约束一个独立的名称，这会使错误消息更为清晰，同时也允许我们在需要更改约束时能引用它。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> products <span class="token punctuation">(</span>
    product_no <span class="token keyword">integer</span><span class="token punctuation">,</span>
    name <span class="token keyword">text</span><span class="token punctuation">,</span>
    price <span class="token keyword">numeric</span> <span class="token keyword">CONSTRAINT</span> positive_price <span class="token keyword">CHECK</span> <span class="token punctuation">(</span>price <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>一个检查约束也可以引用多个列。例如我们存储一个普通价格和一个打折后的价格，而我们希望保证打折后的价格低于普通价格。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> products <span class="token punctuation">(</span>
    product_no <span class="token keyword">integer</span><span class="token punctuation">,</span>
    name <span class="token keyword">text</span><span class="token punctuation">,</span>
    price <span class="token keyword">numeric</span> <span class="token keyword">CHECK</span> <span class="token punctuation">(</span>price <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    discounted_price <span class="token keyword">numeric</span> <span class="token keyword">CHECK</span> <span class="token punctuation">(</span>discounted_price <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">CHECK</span> <span class="token punctuation">(</span>price <span class="token operator">&gt;</span> discounted_price<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>一个检查约束在其检查表达式值为 <code>true</code> 或 <code>null</code> 值时被满足。</p> <h3 id="非空约束"><a href="#非空约束" class="header-anchor">#</a> 非空约束</h3> <p>一个<a href="https://www.postgresql.org/docs/current/ddl-constraints.html#DDL-CONSTRAINTS-NOT-NULL" target="_blank" rel="noopener noreferrer">非空约束<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>仅仅指定一个列中不会有空值。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> products <span class="token punctuation">(</span>
    product_no <span class="token keyword">integer</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    name <span class="token keyword">text</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    price <span class="token keyword">numeric</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="唯一约束"><a href="#唯一约束" class="header-anchor">#</a> 唯一约束</h3> <p><a href="https://www.postgresql.org/docs/current/ddl-constraints.html#DDL-CONSTRAINTS-UNIQUE-CONSTRAINTS" target="_blank" rel="noopener noreferrer">唯一约束<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>保证在一列或一组列中保存的数据在表中所有行间是唯一的。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> products <span class="token punctuation">(</span>
    product_no <span class="token keyword">integer</span> <span class="token keyword">UNIQUE</span><span class="token punctuation">,</span>
    name <span class="token keyword">text</span><span class="token punctuation">,</span>
    price <span class="token keyword">numeric</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>为一组列定义一个唯一约束，把它写作一个表级约束，列名用逗号分隔。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> products <span class="token punctuation">(</span>
    product_no <span class="token keyword">integer</span><span class="token punctuation">,</span>
    name <span class="token keyword">text</span><span class="token punctuation">,</span>
    <span class="token keyword">UNIQUE</span> <span class="token punctuation">(</span>product_no<span class="token punctuation">,</span> name<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这指定这些列的组合值在整个表的范围内是唯一的，但其中任意一列的值并不需要是唯一的。</p> <p>为一个唯一约束命名：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> products <span class="token punctuation">(</span>
    product_no <span class="token keyword">integer</span> <span class="token keyword">CONSTRAINT</span> must_be_different <span class="token keyword">UNIQUE</span><span class="token punctuation">,</span>
    name <span class="token keyword">text</span><span class="token punctuation">,</span>
    price <span class="token keyword">numeric</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>增加一个唯一约束会在约束列或列组上自动创建一个唯一 <em>B-tree</em> 索引。</p> <h3 id="主键约束"><a href="#主键约束" class="header-anchor">#</a> 主键约束</h3> <p><a href="https://www.postgresql.org/docs/current/ddl-constraints.html#DDL-CONSTRAINTS-PRIMARY-KEYS" target="_blank" rel="noopener noreferrer">主键约束<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>保证在一列或一组列中可以用作表中行的唯一标识符。这要求值既是唯一的又是非空的。因此，以下两个表定义接受相同的数据。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> products <span class="token punctuation">(</span>
    product_no <span class="token keyword">integer</span> <span class="token keyword">UNIQUE</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    name <span class="token keyword">text</span><span class="token punctuation">,</span>
    price <span class="token keyword">numeric</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> products <span class="token punctuation">(</span>
    product_no <span class="token keyword">integer</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
    name <span class="token keyword">text</span><span class="token punctuation">,</span>
    price <span class="token keyword">numeric</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>主键也可以包含多于一个列，其语法和唯一约束相似。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> products <span class="token punctuation">(</span>
    product_no <span class="token keyword">integer</span><span class="token punctuation">,</span>
    name <span class="token keyword">text</span><span class="token punctuation">,</span>
    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>product_no<span class="token punctuation">,</span> name<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>增加一个主键将自动在主键中列出的列或列组上创建一个唯一 <em>B-tree</em> 索引，并且会强制这些列被标记为 <code>NOT NULL</code>。</p> <p>一个表最多只能有一个主键。关系数据库理论要求每一个表都要有一个主键，但 PostgreSQL 中并未强制要求这一点，但是最好能够遵循它。</p> <h3 id="外键约束"><a href="#外键约束" class="header-anchor">#</a> 外键约束</h3> <p><a href="https://www.postgresql.org/docs/current/ddl-constraints.html#DDL-CONSTRAINTS-FK" target="_blank" rel="noopener noreferrer">外键约束<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>指定一列或一组列中的值必须匹配出现在另一个表中某些行的值。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> products <span class="token punctuation">(</span>
    product_no <span class="token keyword">integer</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
    name <span class="token keyword">text</span><span class="token punctuation">,</span>
    price <span class="token keyword">numeric</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> orders <span class="token punctuation">(</span>
    order_id <span class="token keyword">integer</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
    product_no <span class="token keyword">integer</span> <span class="token keyword">REFERENCES</span> products <span class="token punctuation">(</span>product_no<span class="token punctuation">)</span><span class="token punctuation">,</span>
    quantity <span class="token keyword">integer</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="三、函数"><a href="#三、函数" class="header-anchor">#</a> 三、函数</h2> <h3 id="序列"><a href="#序列" class="header-anchor">#</a> 序列</h3> <p><a href="https://www.postgresql.org/docs/12/functions-sequence.html" target="_blank" rel="noopener noreferrer">序列<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>是一个数据库对象，本质上是一个自增器。序列在其他同类型数据库软件中以 <code>AUTO_INCREMENT</code> 值的形式存在。</p> <p>序列对象是使用 <a href="https://www.postgresql.org/docs/12/sql-createsequence.html" target="_blank" rel="noopener noreferrer"><code>CREATE SEQUENCE</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 创建的特殊单行表，序列对象通常用于为表的行生成唯一标识符。</p> <p>序列对象中包含当前值，和一些独特属性，例如如何递增或递减。序列不能直接访问，需要通过 PostgreSQL 中的相关函数来操作它们。</p> <p>以下为用于操作序列对象的函数，也称为序列生成器或序列。</p> <ul><li><p><strong>nextval</strong>(<em>regclass</em>) → <code>bigint</code></p> <p>将序列对象前进到它的下一个值并返回该值。</p></li> <li><p><strong>setval</strong>(<em>regclass</em>, <em>bigint</em> [, <em>boolean</em> ]) → <code>bigint</code></p> <p>设置序列的当前值。</p></li> <li><p><strong>currval</strong>(<em>regclass</em>) → <code>bigint</code></p> <p>返回指定序列最近使用 <code>nextval</code> 获得的值，即 <em>last_value</em>。</p></li></ul> <h4 id="创建序列"><a href="#创建序列" class="header-anchor">#</a> 创建序列</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> SEQUENCE sequence_name
    <span class="token punctuation">[</span> INCREMENT increment <span class="token punctuation">]</span>    <span class="token comment">-- 自增数，默认是 1</span>
    <span class="token punctuation">[</span> MINVALUE minvalue <span class="token punctuation">]</span>      <span class="token comment">-- 最小值</span>
    <span class="token punctuation">[</span> MAXVALUE maxvalue <span class="token punctuation">]</span>      <span class="token comment">-- 最大值</span>
    <span class="token punctuation">[</span> <span class="token keyword">START</span> <span class="token keyword">start</span> <span class="token punctuation">]</span>            <span class="token comment">-- 起始值</span>
    <span class="token punctuation">[</span> CACHE cache <span class="token punctuation">]</span>            <span class="token comment">-- 是否预先缓存</span>
    <span class="token punctuation">[</span> <span class="token keyword">CYCLE</span> <span class="token punctuation">]</span>                  <span class="token comment">-- 到达最大值时，是否重新返回到最小值</span>
</code></pre></div><p>序列使用的是整型数值。创建一个简单的序列：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> SEQUENCE sequence_name MINVALUE <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="查看序列"><a href="#查看序列" class="header-anchor">#</a> 查看序列</h4> <p><a href="https://www.postgresql.org/docs/17/app-psql.html" target="_blank" rel="noopener noreferrer"><code>psql</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的 <a href="https://www.postgresql.org/docs/17/app-psql.html#APP-PSQL-META-COMMAND-D" target="_blank" rel="noopener noreferrer"><code>\d</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 命令输出一个数据库对象，包括序列，表，视图和索引，还可以使用 <a href="https://www.postgresql.org/docs/17/app-psql.html#APP-PSQL-META-COMMAND-DE" target="_blank" rel="noopener noreferrer"><code>\ds</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 命令只查看当前数据库的所有序列。</p> <p>序列就像表和视图一样，拥有自己的结构，只不过它的结构是固定的。</p> <p>查询 <code>sequence_name</code> 的 <code>last_value</code>：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> last_value <span class="token keyword">FROM</span> sequence_name<span class="token punctuation">;</span>
</code></pre></div><h4 id="删除序列"><a href="#删除序列" class="header-anchor">#</a> 删除序列</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> SEQUENCE sequence_name<span class="token punctuation">;</span>
</code></pre></div><p>如果该序列无法直接删除，可以查询是否被数据库中的其他对象引用。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> p<span class="token punctuation">.</span>relname<span class="token punctuation">,</span> a<span class="token punctuation">.</span>adsrc <span class="token keyword">FROM</span> pg_class p
  <span class="token keyword">JOIN</span> pg_attrdef a <span class="token keyword">on</span> p<span class="token punctuation">.</span>relfilenode <span class="token operator">=</span> a<span class="token punctuation">.</span>adrelid
  <span class="token keyword">WHERE</span> a<span class="token punctuation">.</span>adsrc <span class="token operator">~</span> <span class="token string">'sequence_name'</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="四、服务器管理"><a href="#四、服务器管理" class="header-anchor">#</a> 四、服务器管理</h2> <h3 id="服务器配置"><a href="#服务器配置" class="header-anchor">#</a> 服务器配置</h3> <p><a href="https://www.postgresql.org/docs/12/config-setting.html" target="_blank" rel="noopener noreferrer">设置参数<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的最基本方法是编辑 <a href="https://www.postgresql.org/docs/12/config-setting.html#CONFIG-SETTING-CONFIGURATION-FILE" target="_blank" rel="noopener noreferrer"><code>postgresql.conf</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 文件，该文件通常保存在数据目录中。</p> <p>通过 SQL 查询配置文件和数据目录位置。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>psql <span class="token parameter variable">-U</span> postgres <span class="token parameter variable">-c</span> <span class="token string">&quot;SHOW config_file&quot;</span>     <span class="token comment"># 配置文件目录</span>
psql <span class="token parameter variable">-U</span> postgres <span class="token parameter variable">-c</span> <span class="token string">&quot;SHOW data_directory&quot;</span>  <span class="token comment"># 数据目录</span>
</code></pre></div><p>通过 <a href="https://www.postgresql.org/docs/17/app-pgconfig.html" target="_blank" rel="noopener noreferrer"><code>pg_config</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 可以查询执行文件所在目录。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>pg_config <span class="token parameter variable">--bindir</span>
</code></pre></div><h4 id="连接设置"><a href="#连接设置" class="header-anchor">#</a> 连接设置</h4> <p><a href="https://www.postgresql.org/docs/12/runtime-config-connection.html#RUNTIME-CONFIG-CONNECTION-SETTINGS" target="_blank" rel="noopener noreferrer">连接设置<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的相关配置项如下。</p> <ul><li><p><strong>listen_addresses</strong>(<em>string</em>)</p> <p>指定服务器在哪些 TCP/IP 地址上监听客户端连接。该值采用逗号分隔的主机名或数字 IP 地址列表的形式。特殊条目 <code>*</code> 对应于所有可用的 IP 接口。</p></li></ul> <h3 id="客户端认证"><a href="#客户端认证" class="header-anchor">#</a> 客户端认证</h3> <h4 id="配置文件"><a href="#配置文件" class="header-anchor">#</a> 配置文件</h4> <p>客户端身份验证由一个配置文件控制，该文件通常名为 <a href="https://www.postgresql.org/docs/12/auth-pg-hba-conf.html" target="_blank" rel="noopener noreferrer"><code>pg_hba.conf</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 并存储在数据库集簇的数据目录中。</p> <p><code>pg_hba.conf</code> 文件的格式是一组记录，每行一个。空白行将被忽略，<code>#</code> 注释字符之后的任何文本也是如此。</p> <p>每条记录指定一种连接类型、一个数据库名称、一个用户名、一个客户端 IP 地址范围以及对匹配这些参数的连接使用的认证方法。</p> <p>记录可以是下面格式之一：</p> <div class="language- extra-class"><pre class="language-text"><code>host    all             all             127.0.0.1/32            trust
host    database        user            address                 auth-method  [auth-options]
</code></pre></div><h4 id="身份验证"><a href="#身份验证" class="header-anchor">#</a> 身份验证</h4> <p>PostgreSQL 提供了多种<a href="https://www.postgresql.org/docs/12/auth-methods.html" target="_blank" rel="noopener noreferrer">验证用户<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的方法：</p> <ul><li><a href="https://www.postgresql.org/docs/12/auth-trust.html" target="_blank" rel="noopener noreferrer"><strong>Trust authentication</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：简单的信任用户声称的身份。</li> <li><a href="https://www.postgresql.org/docs/current/auth-password.html" target="_blank" rel="noopener noreferrer"><strong>Password authentication</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：需要用户提供密码。</li></ul> <h4 id="密码认证"><a href="#密码认证" class="header-anchor">#</a> 密码认证</h4> <p>有几种基于<a href="https://www.postgresql.org/docs/12/auth-password.html" target="_blank" rel="noopener noreferrer">密码<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的身份验证方法。这些方法的操作类似，但不同之处在于用户密码如何存储在服务器上以及客户端提供的密码如何通过连接发送。</p> <ul><li><p><strong>scram-sha-256</strong></p> <p><code>scram-sha-256</code> 方法执行 SCRAM-SHA-256 身份验证。它是一种<em>质询 - 响应</em>方案，可防止在不受信任的连接上嗅探密码，并支持以被认为安全的加密散列形式将密码存储在服务器上。</p></li> <li><p><strong>md5</strong></p> <p><code>md5</code> 方法使用自定义的安全性较低的<em>质询 - 响应</em>机制。</p></li> <li><p><strong>password</strong></p> <p><code>password</code> 方法以明文形式发送密码，因此容易受到密码嗅探攻击。</p></li></ul> <h3 id="账户管理"><a href="#账户管理" class="header-anchor">#</a> 账户管理</h3> <h4 id="修改密码"><a href="#修改密码" class="header-anchor">#</a> 修改密码</h4> <p>通过 SQL 修改用户密码。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>psql <span class="token parameter variable">-U</span> postgres <span class="token parameter variable">-c</span> <span class="token string">&quot;ALTER USER postgres WITH PASSWORD 'new-password'&quot;</span>
</code></pre></div><h2 id="五、命令行程序"><a href="#五、命令行程序" class="header-anchor">#</a> 五、命令行程序</h2> <h3 id="initdb"><a href="#initdb" class="header-anchor">#</a> initdb</h3> <p><a href="https://www.postgresql.org/docs/12/app-initdb.html" target="_blank" rel="noopener noreferrer"><code>initdb</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 用于创建一个新的 PostgreSQL 数据库集簇。</p> <div class="language- extra-class"><pre class="language-text"><code>initdb [option...] [ --pgdata | -D ] directory
</code></pre></div><p>安装完成后，可以进行初始化操作。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>/usr/pgsql-10/bin/initdb <span class="token punctuation">\</span>
    <span class="token parameter variable">--pgdata</span><span class="token operator">=</span>/var/lib/pgsql/10/data <span class="token punctuation">\</span>
    <span class="token parameter variable">--auth</span><span class="token operator">=</span>trust <span class="token punctuation">\</span>
    <span class="token parameter variable">--username</span><span class="token operator">=</span>postgres <span class="token punctuation">\</span>
    <span class="token parameter variable">--pwprompt</span>
</code></pre></div><ul><li><p>--<strong>auth</strong>=<em>authmethod</em></p> <p>为本地用户指定在 <code>pg_hba.conf</code> 中使用的默认认证方法。</p></li> <li><p>--<strong>auth-host</strong>=<em>authmethod</em></p> <p>为通过 TCP/IP 连接的本地用户指定在 <code>pg_hba.conf</code> 中使用的认证方法。</p></li> <li><p>--<strong>auth-local</strong>=<em>authmethod</em></p> <p>为通过 Unix 域套接字连接的本地用户指定在 <code>pg_hba.conf</code> 中使用的认证方法。</p></li> <li><p>-<strong>D</strong> <em>directory</em></p></li> <li><p>--<strong>pgdata</strong>=<em>directory</em></p> <p>指定数据库集簇应该存放的目录。</p></li> <li><p>--<strong>encoding</strong>=<em>encoding</em></p> <p>选择模板数据库的编码。这也将是后来创建的任何数据库的默认编码。</p></li> <li><p>--<strong>username</strong>=<em>username</em></p> <p>选择数据库超级用户的用户名。</p></li> <li><p>--<strong>pwprompt</strong></p> <p>让 <code>initdb</code> 提示要求为数据库超级用户给予一个口令。</p></li></ul> <h3 id="createuser"><a href="#createuser" class="header-anchor">#</a> createuser</h3> <p><a href="https://www.postgresql.org/docs/12/app-createuser.html" target="_blank" rel="noopener noreferrer"><code>createuser</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 用于定义一个新的 PostgreSQL 用户帐户。</p> <ul><li>-<strong>P</strong>, --<strong>pwprompt</strong>：如果给定，<code>createuser</code> 将提示输入新用户的密码。</li> <li>-<strong>s</strong>, --<strong>superuser</strong>：新用户将是超级用户。</li> <li>-<strong>e</strong>, --<strong>echo</strong>：回显 <code>createuser</code> 生成并发送到服务器的命令。</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">su</span> postgres
createuser <span class="token parameter variable">-P</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-e</span> sonar<span class="token punctuation">;</span>
</code></pre></div><h3 id="psql"><a href="#psql" class="header-anchor">#</a> psql</h3> <p><a href="https://www.postgresql.org/docs/12/app-psql.html" target="_blank" rel="noopener noreferrer"><code>psql</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 是 PostgreSQL 的一个基于终端的前端。</p> <ul><li>-<strong>U</strong> <em>username</em>, --<strong>username</strong>=<em>username</em>：以指定用户名连接到数据库。</li> <li>-<strong>d</strong> <em>dbname</em>, --<strong>dbname</strong>=<em>dbname</em>：指定要连接到的数据库的名称。</li> <li>-<strong>h</strong> <em>hostname</em>, --<strong>host</strong>=<em>hostname</em>：指定运行服务器的计算机的主机名。</li> <li>-<strong>p</strong> <em>port</em>, --<strong>port</strong>=<em>port</em>：指定服务器正在侦听连接的 TCP 端口。</li></ul> <p>连接指定数据库。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>psql <span class="token parameter variable">-U</span> dbuser <span class="token parameter variable">-d</span> exampledb <span class="token parameter variable">-h</span> <span class="token number">127.0</span>.0.1 <span class="token parameter variable">-p</span> <span class="token number">5432</span>
</code></pre></div><p><a href="https://www.postgresql.org/docs/12/app-psql.html#APP-PSQL-META-COMMANDS" target="_blank" rel="noopener noreferrer"><strong>Meta 命令</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：</p> <ul><li>\<strong>l</strong>：列出服务器中的数据库，并显示它们的名称、所有者、字符集编码和访问权限。</li> <li>\<strong>c</strong> <em>dbname</em>：建立到 PostgreSQL 服务器的新连接。</li> <li>\<strong>dt</strong>：列举表，<code>t</code> 为表。</li> <li>\<strong>z</strong>：列出表、视图和序列及其关联的访问权限。</li> <li>\<strong>encoding</strong>：设置客户端字符集编码。如果没有参数，此命令将显示当前编码。</li> <li>\<strong>q</strong>：退出 <code>psql</code> 程序。</li></ul> <h3 id="pg-dump"><a href="#pg-dump" class="header-anchor">#</a> pg_dump</h3> <p><a href="https://www.postgresql.org/docs/12/app-pgdump.html" target="_blank" rel="noopener noreferrer"><code>pg_dump</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 是一个用于备份 PostgreSQL 数据库的实用程序。</p> <ul><li>-<strong>U</strong> <em>username</em>：连接的用户名。</li> <li>-<strong>d</strong> <em>dbname</em>：指定要连接到的数据库的名称。</li></ul> <p>备份单个数据库。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>pg_dump <span class="token parameter variable">-U</span> postgres <span class="token parameter variable">-d</span> mydb <span class="token operator">&gt;</span> mydb.pgsql
<span class="token comment"># 压缩</span>
pg_dump <span class="token parameter variable">-U</span> postgres <span class="token parameter variable">-d</span> mydb <span class="token operator">|</span> <span class="token function">gzip</span> <span class="token operator">&gt;</span> mydb.pgsql.gz
<span class="token comment"># 分包</span>
pg_dump <span class="token parameter variable">-U</span> postgres <span class="token parameter variable">-d</span> mydb <span class="token operator">|</span> <span class="token function">gzip</span> <span class="token operator">|</span> <span class="token function">split</span> <span class="token parameter variable">-b</span> 100M - mydb.pgsql.gz
</code></pre></div><p>备份单个表。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>pg_dump <span class="token parameter variable">-U</span> postgres <span class="token parameter variable">-d</span> mydb <span class="token parameter variable">-t</span> mytable <span class="token operator">&gt;</span> mydb-mytable.pgsql
</code></pre></div><p>恢复数据。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>psql <span class="token parameter variable">-U</span> postgres <span class="token parameter variable">-d</span> mydb <span class="token parameter variable">-f</span> mydb.pgsql
<span class="token comment"># 解压</span>
gunzip <span class="token parameter variable">-c</span> mydb.pgsql.gz <span class="token operator">|</span> psql <span class="token parameter variable">-U</span> postgres <span class="token parameter variable">-d</span> mydb
<span class="token comment"># 合包</span>
<span class="token function">cat</span> mydb.pgsql.gz* <span class="token operator">|</span> gunzip <span class="token operator">|</span> psql <span class="token parameter variable">-U</span> postgres <span class="token parameter variable">-d</span> mydb
</code></pre></div><h3 id="pg-controldata"><a href="#pg-controldata" class="header-anchor">#</a> pg_controldata</h3> <p><a href="https://www.postgresql.org/docs/15/app-pgcontroldata.html" target="_blank" rel="noopener noreferrer"><code>pg_controldata</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 用于显示 PostgreSQL 数据库集群的控制信息。</p> <p>控制文件 <code>global/pg_control</code> 包含了关于数据库集群的信息，包括版本号。</p> <p>可以使用 <code>pg_controldata</code> 工具来读取这个文件的信息。</p> <div class="language-sh extra-class"><pre class="language-sh"><code>/usr/pgsql-12/bin/pg_controldata /path/to/data/directory
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.26e764c1.js" defer></script><script src="/assets/js/2.fbd8ae4c.js" defer></script><script src="/assets/js/1.36b86acd.js" defer></script><script src="/assets/js/210.bbd7e189.js" defer></script>
  </body>
</html>
