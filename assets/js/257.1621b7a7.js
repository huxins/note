(window.webpackJsonp=window.webpackJsonp||[]).push([[257],{574:function(a,s,t){"use strict";t.r(s);var e=t(27),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"yum"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#yum"}},[a._v("#")]),a._v(" YUM")]),a._v(" "),s("p",[s("a",{attrs:{href:"http://yum.baseurl.org/",target:"_blank",rel:"noopener noreferrer"}},[a._v("YUM"),s("OutboundLink")],1),a._v(" 是用于在 Red Hat Enterprise Linux 中安装、更新、删除和管理软件包的主要包管理工具。")]),a._v(" "),s("p",[a._v("YUM 在安装、更新和删除软件包时执行依赖项解析，YUM 可以从系统中已安装的存储库或 "),s("code",[a._v(".rpm")]),a._v(" 包中管理包。")]),a._v(" "),s("p",[a._v("YUM 的主要配置文件位于 "),s("code",[a._v("/etc/yum.conf")]),a._v("，所有 "),s("em",[a._v("repo")]),a._v(" 都位于 "),s("code",[a._v("/etc/yum.repos.d/")]),a._v("。")]),a._v(" "),s("h2",{attrs:{id:"一、配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、配置文件"}},[a._v("#")]),a._v(" 一、配置文件")]),a._v(" "),s("p",[s("code",[a._v("yum")]),a._v(" 的主要配置文件在 "),s("a",{attrs:{href:"https://man7.org/linux/man-pages/man5/yum.conf.5@@yum.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[a._v("/etc/yum.conf")]),s("OutboundLink")],1),a._v("。")]),a._v(" "),s("h3",{attrs:{id:"main"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#main"}},[a._v("#")]),a._v(" [main]")]),a._v(" "),s("ul",[s("li",[s("strong",[a._v("reposdir")]),a._v("：定义要使用的存储库的 "),s("code",[a._v(".repo")]),a._v(" 文件的目录列表。默认为 "),s("code",[a._v("/etc/yum.repos.d")]),a._v("。")]),a._v(" "),s("li",[s("strong",[a._v("exclude")]),a._v("：要从更新或安装中排除的软件包列表。以空格分隔。")]),a._v(" "),s("li",[s("strong",[a._v("ip_resolve")]),a._v("：IP 地址类型。确定如何解析主机名。")]),a._v(" "),s("li",[s("strong",[a._v("proxy")]),a._v("：要连接的代理服务器的 URL。")]),a._v(" "),s("li",[s("strong",[a._v("proxy_username")]),a._v("：用于连接代理服务器的用户名。")]),a._v(" "),s("li",[s("strong",[a._v("proxy_password")]),a._v("：用于连接代理服务器的密码。")])]),a._v(" "),s("h2",{attrs:{id:"二、命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、命令"}},[a._v("#")]),a._v(" 二、命令")]),a._v(" "),s("h3",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),s("p",[s("strong",[s("code",[a._v("install")])]),a._v(" 安装一个包或一组包的最新版本，同时确保满足所有依赖项。")]),a._v(" "),s("p",[s("strong",[s("code",[a._v("localinstall")])]),a._v(" 安装一组本地 "),s("em",[a._v(".rpm")]),a._v(" 文件。")]),a._v(" "),s("h3",{attrs:{id:"卸载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#卸载"}},[a._v("#")]),a._v(" 卸载")]),a._v(" "),s("p",[s("strong",[s("code",[a._v("remove")])]),a._v(" 从系统中删除指定的包以及删除依赖于被删除包的任何包。")]),a._v(" "),s("h3",{attrs:{id:"更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更新"}},[a._v("#")]),a._v(" 更新")]),a._v(" "),s("p",[s("strong",[s("code",[a._v("update")])]),a._v(" 如果在没有指定任何包的情况下运行，将更新每个当前安装的包。")]),a._v(" "),s("p",[s("strong",[s("code",[a._v("upgrade")])]),a._v(" 与设置了 "),s("code",[a._v("--obsoletes")]),a._v(" 标志的 "),s("code",[a._v("update")]),a._v(" 命令相同。")]),a._v(" "),s("p",[s("strong",[s("code",[a._v("check-update")])]),a._v(" 列出所有可更新的软件清单。")]),a._v(" "),s("h3",{attrs:{id:"依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#依赖"}},[a._v("#")]),a._v(" 依赖")]),a._v(" "),s("p",[s("strong",[s("code",[a._v("deplist")])]),a._v(" 列出依赖项和提供它们的包。")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("yum deplist dhcp-libs-4.2.5-83.el7.centos.1.x86_64\n")])])]),s("h3",{attrs:{id:"查询"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查询"}},[a._v("#")]),a._v(" 查询")]),a._v(" "),s("p",[s("strong",[s("code",[a._v("list")])]),a._v(" 列出可用包的各种信息。")]),a._v(" "),s("ul",[s("li",[s("strong",[a._v("all")]),a._v("：已安装和可用的软件包。")]),a._v(" "),s("li",[s("strong",[a._v("available")]),a._v("：可用的软件包。")]),a._v(" "),s("li",[s("strong",[a._v("installed")]),a._v("：已安装的软件包。")]),a._v(" "),s("li",[s("strong",[a._v("updates")]),a._v("：可更新的软件包。")]),a._v(" "),s("li",[s("strong",[a._v("extras")]),a._v("：已安装的软件包，且这些软件包在已配置的存储库中都不可用。")]),a._v(" "),s("li",[s("strong",[a._v("kernel")]),a._v("：已安装和可用的内核包。")])]),a._v(" "),s("p",[s("strong",[s("code",[a._v("info")])]),a._v(" 列出可用包的描述和摘要信息。")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("yum info nginx\n")])])]),s("p",[s("strong",[s("code",[a._v("search")])]),a._v(" 根据名称和摘要搜索包。")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("yum search nginx\n")])])]),s("p",[s("strong",[s("code",[a._v("provides")])]),a._v(" 查询提供了某些功能或文件的包。")]),a._v(" "),s("p",[a._v("显示包含 "),s("code",[a._v("top")]),a._v(" 命令的包。")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("yum provides "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"*bin/top"')]),a._v("\n")])])]),s("p",[a._v("显示包含 "),s("code",[a._v("nginx.conf")]),a._v(" 文件的包。")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("yum provides "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"*/nginx.conf"')]),a._v("\n")])])]),s("h3",{attrs:{id:"存储库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#存储库"}},[a._v("#")]),a._v(" 存储库")]),a._v(" "),s("p",[s("strong",[s("code",[a._v("repolist")])]),a._v(" 生成已配置存储库的列表，默认列出所有启用的存储库。")]),a._v(" "),s("ul",[s("li",[s("strong",[a._v("all")]),a._v("：所有的软件存储库。")]),a._v(" "),s("li",[s("strong",[a._v("enabled")]),a._v("：启用的软件存储库。")]),a._v(" "),s("li",[s("strong",[a._v("disabled")]),a._v("：禁用的软件存储库。")])]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("yum repolist all\n")])])]),s("h3",{attrs:{id:"缓存"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#缓存"}},[a._v("#")]),a._v(" 缓存")]),a._v(" "),s("p",[s("strong",[s("code",[a._v("clean")])]),a._v(" 清理缓存目录中随时间累积的各种东西。")]),a._v(" "),s("ul",[s("li",[s("strong",[a._v("packages")]),a._v("：删除保存在缓存中的包。")])]),a._v(" "),s("p",[s("strong",[s("code",[a._v("makecache")])]),a._v(" 下载当前启用的存储库的所有元数据并使其可用。")]),a._v(" "),s("p",[s("strong",[s("code",[a._v("history")])]),a._v(" 查看事务的历史记录。")]),a._v(" "),s("p",[a._v("撤消事务。")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("history")]),a._v(" undo "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("id"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),s("h2",{attrs:{id:"三、存储库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、存储库"}},[a._v("#")]),a._v(" 三、存储库")]),a._v(" "),s("h3",{attrs:{id:"安装-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-2"}},[a._v("#")]),a._v(" 安装")]),a._v(" "),s("h4",{attrs:{id:"rpm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rpm"}},[a._v("#")]),a._v(" RPM")]),a._v(" "),s("p",[a._v("安装一个带有存储库信息的 "),s("code",[a._v(".rpm")]),a._v("。")]),a._v(" "),s("p",[a._v("例如，以下命令在 "),s("em",[a._v("CentOS 7")]),a._v(" 中安装 EPEL 存储库。")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看该 rpm 包含什么文件")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rpm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-qlp")]),a._v(" https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 安装 rpm 包")]),a._v("\nyum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm\n")])])]),s("h4",{attrs:{id:"配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置文件"}},[a._v("#")]),a._v(" 配置文件")]),a._v(" "),s("p",[a._v("使用文本编辑器在 "),s("code",[a._v("/etc/yum.repos.d")]),a._v(" 中创建一个 "),s("code",[a._v(".repo")]),a._v(" 文件。")]),a._v(" "),s("p",[a._v("在此示例中，我们将为 MySQL 5.7 创建存储库文件。")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("nano")]),a._v(" /etc/yum.repos.d/mysql57-community.repo\n")])])]),s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token section"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[a._v("mysql57-community")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")])]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("MySQL 5.7 Community Server")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("baseurl")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("http://repo.mysql.com/yum/mysql-5.7-community/el/7/$basearch/")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("enabled")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("1")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("gpgcheck")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("1")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[a._v("gpgkey")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[a._v("https://repo.mysql.com/RPM-GPG-KEY-mysql-2022")]),a._v("\n")])])]),s("h3",{attrs:{id:"禁用存储库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#禁用存储库"}},[a._v("#")]),a._v(" 禁用存储库")]),a._v(" "),s("p",[a._v("在需要特定存储库的情况下，例如 PHP 7.2，首先需要安装存储库，然后使用 "),s("code",[a._v("yum-config-manager")]),a._v(" 禁用和启用存储库。")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" http://rpms.remirepo.net/enterprise/remi-release-7.rpm\nyum-config-manager "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--disable")]),a._v(" remi-php54\nyum-config-manager "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--enable")]),a._v(" remi-php72\n")])])]),s("h3",{attrs:{id:"存储库镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#存储库镜像"}},[a._v("#")]),a._v(" 存储库镜像")]),a._v(" "),s("p",[a._v("清华 Base：")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sed")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'s/^mirrorlist/#mirrorlist/g'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'s/^#baseurl/baseurl/g'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'s/mirror.centos.org/mirrors.cloud.tencent.com/g'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'s/http/https/g'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" /etc/yum.repos.d/CentOS-Base.repo\n")])])]),s("p",[a._v("清华 EPEL：")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" epel-release\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sed")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'s/^metalink/#metalink/g'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'s/^#baseurl/baseurl/g'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'s/download.fedoraproject.org\\/pub/mirrors.tuna.tsinghua.edu.cn/g'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'s/http/https/g'")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" /etc/yum.repos.d/epel*.repo\n")])])]),s("h2",{attrs:{id:"四、插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四、插件"}},[a._v("#")]),a._v(" 四、插件")]),a._v(" "),s("p",[a._v("插件的配置文件存在于 "),s("code",[a._v("/etc/yum/pluginconf.d/<plugin_name>.conf")]),a._v("。")]),a._v(" "),s("p",[a._v("禁用插件：")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sed")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("'s/enabled=1/enabled=0/g'")]),a._v(" /etc/yum/pluginconf.d/fastestmirror.conf\n")])])]),s("h2",{attrs:{id:"五、yum-utils"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#五、yum-utils"}},[a._v("#")]),a._v(" 五、yum-utils")]),a._v(" "),s("p",[a._v("操作存储库和扩展包管理的工具。")]),a._v(" "),s("p",[a._v("安装：")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" yum-utils\n")])])]),s("h3",{attrs:{id:"yum-config-manager"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#yum-config-manager"}},[a._v("#")]),a._v(" yum-config-manager")]),a._v(" "),s("p",[a._v("切换存储库，添加新存储库并设置主要配置选项。")]),a._v(" "),s("p",[a._v("从指定的文件或 "),s("em",[a._v("url")]),a._v(" 添加并启用 "),s("em",[a._v("repo")]),a._v("。")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("yum-config-manager --add-repo repository_url\n")])])]),s("p",[a._v("启用指定的 "),s("em",[a._v("repos")]),a._v("。")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("yum-config-manager "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--enable")]),a._v(" repository\n")])])]),s("p",[a._v("禁用指定的 "),s("em",[a._v("repos")]),a._v("。")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("yum-config-manager "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--disable")]),a._v(" repository\n")])])]),s("h3",{attrs:{id:"repoquery"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#repoquery"}},[a._v("#")]),a._v(" repoquery")]),a._v(" "),s("p",[a._v("查询远程 "),s("em",[a._v("repos")]),a._v(" 和本地 RPM 数据库。")]),a._v(" "),s("p",[a._v("显示依赖包。")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("repoquery "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--requires")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--resolve")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v("\n")])])]),s("p",[a._v("列出包中的文件。")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[a._v("repoquery "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-ql")]),a._v(" epel-release\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);