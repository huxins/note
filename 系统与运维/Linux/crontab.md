# crontab

[`crontab`](https://man7.org/linux/man-pages/man1/crontab.1.html) 是用于安装、移除或列出用于驱动 `cron` *daemon* 表的程序。它的名字来源于 `cron`，而 `cron` 是一个后台服务，专门用来按照预定的时间表自动执行任务。

每个用户都可以拥有自己的 `crontab`，尽管这些文件位于 `/var/spool/` 目录中，但并不直接编辑它们。

## 一、实现

- **Vixie Cron**

  [Vixie Cron](https://github.com/vixie/cron) 是最早的、也是最经典的 `cron` 实现之一，由 Paul Vixie 创建。
  
- **Cronie**

  [Cronie](https://github.com/cronie-crond/cronie) 是基于 Vixie Cron 的一个分支，旨在提供更现代的功能和更好的安全性。

- **Mcron**

  [Mcron](https://www.gnu.org/software/mcron/) 是 GNU 项目开发的 `cron` 实现，完全独立于 Vixie Cron。

## 二、用法

- -**e**：编辑工作表。
- -**l**：列出工作表里的命令。

查看当前用户的任务表。

```sh
crontab -l
```

编辑当前用户的任务表。

```sh
crontab -e
```

删除当前用户的任务表。

```sh
crontab -r
```

列出某个用户的任务表。

```sh
crontab -u 用户名 -l
```

## 三、表格式

`cron` 表中的每一行定义了一个定时任务，时间格式如下：

```
*    *    *    *    *
-    -    -    -    -
|    |    |    |    |
|    |    |    |    +----- 星期几 (0 - 7) (0 或 7 都表示星期天)
|    |    |    +---------- 月份 (1 - 12)
|    |    +--------------- 日期 (1 - 31)
|    +-------------------- 小时 (0 - 23)
+------------------------- 分钟 (0 - 59)
```

常用时间如下：

| 执行计划     | 格式          |
| ------------ | ------------- |
| 每五分钟执行 | `*/5 * * * *` |
| 每小时执行   | `0 * * * *`   |
| 每天执行     | `0 4 * * *`   |
| 每周执行     | `0 0 * * 0`   |
| 每月执行     | `0 0 1 * *`   |
| 每年执行     | `0 0 1 1 *`   |

