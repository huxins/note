(window.webpackJsonp=window.webpackJsonp||[]).push([[258],{583:function(a,v,s){"use strict";s.r(v);var e=s(27),t=Object(e.a)({},(function(){var a=this,v=a._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[v("h1",{attrs:{id:"logical-volume-manager"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#logical-volume-manager"}},[a._v("#")]),a._v(" Logical Volume Manager")]),a._v(" "),v("p",[a._v("在 Linux 中，逻辑卷管理器（LVM）是一个设备映射器框架，它为 Linux 内核提供逻辑卷管理。")]),a._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[v("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" info lvm2\n")])])]),v("h2",{attrs:{id:"一、概念"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#一、概念"}},[a._v("#")]),a._v(" 一、概念")]),a._v(" "),v("ul",[v("li",[v("strong",[a._v("Physical Volume（物理卷）")]),a._v("：常规物理磁盘分区的另一个名称，如 "),v("code",[a._v("sda1")]),a._v(" 分区、"),v("code",[a._v("sdb")]),a._v(" 磁盘。")]),a._v(" "),v("li",[v("strong",[a._v("Volume Group（卷组）")]),a._v("：创建在 PV 上，由一个或多个 PV 组成，可以在 VG 上创建一个或多个 LV，功能类似非 LVM 系统的物理硬盘。")]),a._v(" "),v("li",[v("strong",[a._v("Logical Volume（逻辑卷）")]),a._v("：每个逻辑卷都可以单独格式化，功能类似非 LVM 系统的磁盘分区。")]),a._v(" "),v("li",[v("strong",[a._v("Physical Extent（物理块）")]),a._v("：物理卷中可以分配的最小存储单元称为 PE，PE 的大小是可以指定的。")]),a._v(" "),v("li",[v("strong",[a._v("Logical Extent（逻辑块）")]),a._v("：逻辑卷中可以分配的最小存储单元称为 LE。在同一个卷组中，LE 的大小和 PE 的大小是一样的，并且一一对应。")])]),a._v(" "),v("p",[v("img",{attrs:{src:"https://img2023.cnblogs.com/blog/1768648/202307/1768648-20230710112259181-1715498829.png",alt:"LVM"}})]),a._v(" "),v("h2",{attrs:{id:"二、物理卷"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#二、物理卷"}},[a._v("#")]),a._v(" 二、物理卷")]),a._v(" "),v("p",[a._v("物理卷可以使用磁盘分区，也可以直接使用磁盘。")]),a._v(" "),v("ul",[v("li",[a._v("磁盘分区：需先把磁盘分区格式化为 "),v("code",[a._v("lvm")]),a._v(" 格式的分区。")]),a._v(" "),v("li",[a._v("磁盘：不需要格式化。")])]),a._v(" "),v("p",[v("strong",[a._v("相关命令")]),a._v("：")]),a._v(" "),v("ul",[v("li",[v("code",[a._v("pvcreate")])]),a._v(" "),v("li",[v("code",[a._v("pvremove")])]),a._v(" "),v("li",[v("code",[a._v("pvdisplay")])]),a._v(" "),v("li",[v("code",[a._v("pvscan")])]),a._v(" "),v("li",[v("code",[a._v("pvs")])]),a._v(" "),v("li",[v("code",[a._v("pvchange")])]),a._v(" "),v("li",[v("code",[a._v("pvck")])]),a._v(" "),v("li",[v("code",[a._v("pvmove")])]),a._v(" "),v("li",[v("code",[a._v("pvresize")])])]),a._v(" "),v("p",[a._v("磁盘分区前，先查看当前的分区情况。")]),a._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[v("span",{pre:!0,attrs:{class:"token function"}},[a._v("parted")]),a._v(" /dev/vdb print\n")])])]),v("p",[a._v("使用分区工具 "),v("code",[a._v("gdisk")]),a._v(" 创建分区，并更改分区类型为 "),v("em",[a._v("Linux LVM")]),a._v("（"),v("code",[a._v("8e00")]),a._v("）。")]),a._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[a._v("gdisk /dev/vdb\n")])])]),v("p",[a._v("创建物理卷：基于磁盘分区来创建 LVM 物理卷。")]),a._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[a._v("pvcreate /dev/vdb1\n")])])]),v("p",[a._v("删除物理卷：")]),a._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[a._v("pvremove /dev/vdb1\n")])])]),v("h2",{attrs:{id:"三、卷组"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#三、卷组"}},[a._v("#")]),a._v(" 三、卷组")]),a._v(" "),v("p",[v("strong",[a._v("相关命令")]),a._v("：")]),a._v(" "),v("ul",[v("li",[v("code",[a._v("vgcreate")])]),a._v(" "),v("li",[v("code",[a._v("vgremove")])]),a._v(" "),v("li",[v("code",[a._v("vgdisplay")])]),a._v(" "),v("li",[v("code",[a._v("vgscan")])]),a._v(" "),v("li",[v("code",[a._v("vgs")])])]),a._v(" "),v("p",[a._v("创建卷组：")]),a._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[a._v("vgcreate vg01 /dev/vdb1\n")])])]),v("p",[a._v("删除卷组：")]),a._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[a._v("vgremove /dev/vg01\n")])])]),v("p",[a._v("扩展卷组：")]),a._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[a._v("vgextend vg01 /dev/vdb2\n")])])]),v("h2",{attrs:{id:"四、逻辑卷"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#四、逻辑卷"}},[a._v("#")]),a._v(" 四、逻辑卷")]),a._v(" "),v("p",[v("strong",[a._v("相关命令")]),a._v("：")]),a._v(" "),v("ul",[v("li",[v("code",[a._v("lvcreate")])]),a._v(" "),v("li",[v("code",[a._v("lvremove")])]),a._v(" "),v("li",[v("code",[a._v("lvdisplay")])]),a._v(" "),v("li",[v("code",[a._v("lvscan")])]),a._v(" "),v("li",[v("code",[a._v("lvs")])])]),a._v(" "),v("p",[a._v("创建逻辑卷：")]),a._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[a._v("lvcreate "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-L")]),a._v(" 4G "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-n")]),a._v(" lvData vg01\n")])])]),v("p",[a._v("格式化逻辑卷：")]),a._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[a._v("mkfs.ext4 /dev/vg01/lvData\n")])])]),v("p",[a._v("挂载格式化后的逻辑卷：")]),a._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[v("span",{pre:!0,attrs:{class:"token function"}},[a._v("mount")]),a._v(" "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" ext4 /dev/vg01/lvData /media/data\n")])])]),v("p",[a._v("删除逻辑卷：")]),a._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[a._v("lvremove /dev/vg01/lvData\n")])])]),v("p",[a._v("扩展逻辑卷：")]),a._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[a._v("lvextend "),v("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-L")]),a._v(" 5000M /dev/vg01/lvData\n")])])]),v("p",[a._v("在线调整大小：")]),a._v(" "),v("div",{staticClass:"language-sh extra-class"},[v("pre",{pre:!0,attrs:{class:"language-sh"}},[v("code",[a._v("resize2fs /dev/vg01/lvData\n")])])])])}),[],!1,null,null,null);v.default=t.exports}}]);