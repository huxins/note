(window.webpackJsonp=window.webpackJsonp||[]).push([[228],{540:function(a,t,s){"use strict";s.r(t);var e=s(27),r=Object(e.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"awk"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#awk"}},[a._v("#")]),a._v(" Awk")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/index.html",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("awk")]),t("OutboundLink")],1),a._v(" 是一个强大的文本处理工具和编程语言，专门用于处理和分析文本数据。它以行为单位读取输入文件或标准输入，对每一行应用指定的规则和操作。")]),a._v(" "),t("p",[t("strong",[a._v("常见功能包括：")])]),a._v(" "),t("ul",[t("li",[a._v("文本过滤和提取")]),a._v(" "),t("li",[a._v("字符串处理")]),a._v(" "),t("li",[a._v("数据格式化")]),a._v(" "),t("li",[a._v("数值计算")]),a._v(" "),t("li",[a._v("表格数据处理")])]),a._v(" "),t("p",[t("code",[a._v("awk")]),a._v(" 的核心思想是基于 "),t("em",[a._v("pattern-action")]),a._v(" 规则，语法如下：")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("pattern "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" action "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),t("ul",[t("li",[t("strong",[a._v("pattern")]),a._v("：指定匹配条件，只有满足条件的行才会执行后面的动作。")]),a._v(" "),t("li",[t("strong",[a._v("action")]),a._v("：定义对匹配到的行将要执行的操作。")])]),a._v(" "),t("h2",{attrs:{id:"一、字段"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、字段"}},[a._v("#")]),a._v(" 一、字段")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Fields.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Fields"),t("OutboundLink")],1),a._v(" 是指每一行输入数据被分隔成的若干部分。"),t("code",[a._v("awk")]),a._v(" 的核心功能之一就是基于字段来处理和操作文本数据。")]),a._v(" "),t("ul",[t("li",[t("strong",[a._v("字段分隔符：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("awk")]),a._v(" 默认使用"),t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Default-Field-Splitting.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("空白字符"),t("OutboundLink")],1),a._v("（空格和制表符）作为字段分隔符。")]),a._v(" "),t("li",[a._v("可以通过设置特殊变量 "),t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Command-Line-Field-Separator.html",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("FS")]),t("OutboundLink")],1),a._v("（Field Separator）来指定其他的分隔符。")])])]),a._v(" "),t("li",[t("strong",[a._v("字段编号：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("awk")]),a._v(" 将每一行的字段编号为 "),t("code",[a._v("$1")]),a._v(", "),t("code",[a._v("$2")]),a._v(", "),t("code",[a._v("$3")]),a._v("，依此类推。")]),a._v(" "),t("li",[t("code",[a._v("$0")]),a._v(" 表示整行数据。")])])]),a._v(" "),t("li",[t("strong",[a._v("特殊字段变量：")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Auto_002dset.html#index-NF-variable-1",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("NF")]),t("OutboundLink")],1),a._v("：表示当前行的字段总数。")]),a._v(" "),t("li",[t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/User_002dmodified.html#index-field-separator-1",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("FS")]),t("OutboundLink")],1),a._v("：指定输入字段分隔符（默认为空白字符）。")]),a._v(" "),t("li",[t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/User_002dmodified.html#index-field-separator-2",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("OFS")]),t("OutboundLink")],1),a._v("：指定输出字段分隔符（默认也是空白字符）。")])])])]),a._v(" "),t("p",[a._v("假设有一个文件 "),t("code",[a._v("data.txt")]),a._v("，内容如下：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("apple orange banana\ncat dog tiger\n")])])]),t("p",[a._v("例如，"),t("strong",[a._v("访问字段")]),a._v("，以下命令打印每行的第一个字段。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{print $1}'")]),a._v(" data.txt\n")])])]),t("p",[a._v("例如，"),t("strong",[a._v("修改字段分隔符")]),a._v("，假设数据改为逗号分隔。")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("apple,orange,banana\ncat,dog,tiger\n")])])]),t("p",[a._v("可以显式指定分隔符。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-F")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("','")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{print $2}'")]),a._v(" data.txt\n")])])]),t("p",[a._v("例如，"),t("strong",[a._v("打印字段总数")]),a._v("，以下命令打印每行的字段总数。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{print NF}'")]),a._v(" data.txt\n")])])]),t("p",[a._v("例如，"),t("strong",[a._v("修改字段分隔符和输出分隔符")]),a._v("。假设我们想把逗号分隔的数据改为用冒号分隔，并打印出来。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-F")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("','")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'BEGIN {OFS=\":\"} {print $1, $2, $3}'")]),a._v(" data.txt\n")])])]),t("h2",{attrs:{id:"二、表达式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、表达式"}},[a._v("#")]),a._v(" 二、表达式")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Expressions.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Expressions"),t("OutboundLink")],1),a._v(" 是用于处理、计算和操作数据的核心部分。表达式可以是值、变量、运算符、函数调用等的组合，它们可以用来生成新值、匹配模式、执行条件判断等。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),a._v(" + "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$2")]),a._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 一个算术表达式")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$3")]),a._v(" ~ /abc/ "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 一个正则表达式匹配")]),a._v("\n")])])]),t("p",[t("code",[a._v("awk")]),a._v(" 会在每一行数据上逐行执行这些表达式。")]),a._v(" "),t("h3",{attrs:{id:"算术表达式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#算术表达式"}},[a._v("#")]),a._v(" 算术表达式")]),a._v(" "),t("p",[a._v("用来进行数学运算，支持常见的"),t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Arithmetic-Ops.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("算术运算符"),t("OutboundLink")],1),a._v("：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("+")]),a._v("：加")]),a._v(" "),t("li",[t("code",[a._v("-")]),a._v("：减")]),a._v(" "),t("li",[t("code",[a._v("*")]),a._v("：乘")]),a._v(" "),t("li",[t("code",[a._v("/")]),a._v("：除")]),a._v(" "),t("li",[t("code",[a._v("%")]),a._v("：取余")])]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),a._v(" + "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$2")]),a._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 将第一字段和第二字段相加")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$3")]),a._v(" - "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v("     "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 将第三字段减去 5")]),a._v("\n")])])]),t("h3",{attrs:{id:"字符串表达式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#字符串表达式"}},[a._v("#")]),a._v(" 字符串表达式")]),a._v(" "),t("p",[a._v("用于处理字符串，支持"),t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Concatenation.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("字符串连接"),t("OutboundLink")],1),a._v("操作：")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$2")]),a._v("      "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 将第一字段和第二字段直接拼接")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('", "')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$2")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 用逗号和空格连接第一字段和第二字段")]),a._v("\n")])])]),t("h3",{attrs:{id:"比较表达式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#比较表达式"}},[a._v("#")]),a._v(" 比较表达式")]),a._v(" "),t("p",[a._v("用于比较两个值，返回布尔值（"),t("code",[a._v("true")]),a._v(" 或 "),t("code",[a._v("false")]),a._v("）。支持以下"),t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Comparison-Operators.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("比较运算符"),t("OutboundLink")],1),a._v("：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("==")]),a._v("：等于")]),a._v(" "),t("li",[t("code",[a._v("!=")]),a._v("：不等于")]),a._v(" "),t("li",[t("code",[a._v("<")]),a._v("：小于")]),a._v(" "),t("li",[t("code",[a._v(">")]),a._v("：大于")]),a._v(" "),t("li",[t("code",[a._v("<=")]),a._v("：小于等于")]),a._v(" "),t("li",[t("code",[a._v(">=")]),a._v("：大于等于")])]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v("     "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 检查第一字段是否大于 10")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$2")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("==")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"abc"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v('# 检查第二字段是否等于 "abc"')]),a._v("\n")])])]),t("h3",{attrs:{id:"正则表达式匹配"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#正则表达式匹配"}},[a._v("#")]),a._v(" 正则表达式匹配")]),a._v(" "),t("p",[a._v("用来检查字段或字符串是否匹配某个"),t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Standard-Regexp-Constants.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("正则表达式"),t("OutboundLink")],1),a._v("：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("~")]),a._v("：匹配正则表达式")]),a._v(" "),t("li",[t("code",[a._v("!~")]),a._v("：不匹配正则表达式")])]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),a._v(" ~ /^"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("A-Z"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("/  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 检查第一字段是否以大写字母开头")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$2")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),a._v("~ /abc/    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v('# 检查第二字段是否不包含 "abc"')]),a._v("\n")])])]),t("h3",{attrs:{id:"逻辑表达式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#逻辑表达式"}},[a._v("#")]),a._v(" 逻辑表达式")]),a._v(" "),t("p",[a._v("用于逻辑判断，支持以下"),t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Boolean-Ops.html#Boolean-Expressions",target:"_blank",rel:"noopener noreferrer"}},[a._v("逻辑运算符"),t("OutboundLink")],1),a._v("：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("&&")]),a._v("：逻辑与（AND）")]),a._v(" "),t("li",[t("code",[a._v("||")]),a._v("：逻辑或（OR）")]),a._v(" "),t("li",[t("code",[a._v("!")]),a._v("：逻辑非（NOT）")])]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$2")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v("          "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 第一字段大于 10 且第二字段小于 5")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("==")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"abc"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("||")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$2")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("==")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"def"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v('# 第一字段是 "abc" 或第二字段是 "def"')]),a._v("\n")])])]),t("h3",{attrs:{id:"赋值表达式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#赋值表达式"}},[a._v("#")]),a._v(" 赋值表达式")]),a._v(" "),t("p",[a._v("将值赋给变量或字段。支持以下"),t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Assignment-Ops.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("赋值运算符"),t("OutboundLink")],1),a._v("：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("=")]),a._v("：赋值")]),a._v(" "),t("li",[t("code",[a._v("+=")]),a._v("：加法赋值")]),a._v(" "),t("li",[t("code",[a._v("-=")]),a._v("：减法赋值")]),a._v(" "),t("li",[t("code",[a._v("*=")]),a._v("：乘法赋值")]),a._v(" "),t("li",[t("code",[a._v("/=")]),a._v("：除法赋值")]),a._v(" "),t("li",[t("code",[a._v("%=")]),a._v("：取余赋值")])]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sum")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),a._v(" + "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$2")]),a._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 将第一字段和第二字段的和赋给变量 sum")]),a._v("\ncount "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("     "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 将变量 count 的值加 1")]),a._v("\n")])])]),t("h3",{attrs:{id:"条件表达式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#条件表达式"}},[a._v("#")]),a._v(" 条件表达式")]),a._v(" "),t("p",[t("code",[a._v("awk")]),a._v(" 支持"),t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Conditional-Exp.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("三目运算符"),t("OutboundLink")],1),a._v(" "),t("code",[a._v("condition ? true_value : false_value")]),a._v("，用于根据条件返回不同的值。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[a._v("x "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$1")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" ? "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"High"')]),a._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"Low"')]),a._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v('# 如果第一字段大于 10，则 x 为 "High"，否则为 "Low"')]),a._v("\n")])])]),t("h3",{attrs:{id:"优先级"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#优先级"}},[a._v("#")]),a._v(" 优先级")]),a._v(" "),t("p",[t("code",[a._v("awk")]),a._v(" 中的表达式运算符有"),t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Precedence.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("优先级"),t("OutboundLink")],1),a._v("，以下是常用运算符的优先级（从高到低）：")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("()")]),a._v("：括号，用于强制优先级")]),a._v(" "),t("li",[t("code",[a._v("!")]),a._v("：逻辑非")]),a._v(" "),t("li",[t("code",[a._v("*")]),a._v(" "),t("code",[a._v("/")]),a._v(" "),t("code",[a._v("%")]),a._v("：乘、除、取余")]),a._v(" "),t("li",[t("code",[a._v("+")]),a._v(" "),t("code",[a._v("-")]),a._v("：加、减")]),a._v(" "),t("li",[t("code",[a._v("<")]),a._v(" "),t("code",[a._v("<=")]),a._v(" "),t("code",[a._v(">")]),a._v(" "),t("code",[a._v(">=")]),a._v("：比较运算符")]),a._v(" "),t("li",[t("code",[a._v("==")]),a._v(" "),t("code",[a._v("!=")]),a._v("：等于、不等于")]),a._v(" "),t("li",[t("code",[a._v("~")]),a._v(" "),t("code",[a._v("!~")]),a._v("：正则表达式匹配")]),a._v(" "),t("li",[t("code",[a._v("&&")]),a._v("：逻辑与")]),a._v(" "),t("li",[t("code",[a._v("||")]),a._v("：逻辑或")]),a._v(" "),t("li",[t("code",[a._v("=")]),a._v(" "),t("code",[a._v("+=")]),a._v(" "),t("code",[a._v("-=")]),a._v(" "),t("code",[a._v("*=")]),a._v(" "),t("code",[a._v("/=")]),a._v(" "),t("code",[a._v("%=")]),a._v("：赋值运算符")])]),a._v(" "),t("h2",{attrs:{id:"三、模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、模式"}},[a._v("#")]),a._v(" 三、模式")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Pattern-Overview.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Patterns"),t("OutboundLink")],1),a._v(" 用于筛选匹配的行，决定哪些行需要执行 "),t("code",[a._v("awk")]),a._v(" 的 "),t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Action-Overview.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Actions"),t("OutboundLink")],1),a._v("。当 "),t("code",[a._v("awk")]),a._v(" 处理文本时，会遍历每一行数据，并检查模式是否匹配，匹配的行会执行指定的操作，不匹配的行则被跳过。")]),a._v(" "),t("p",[a._v("在 "),t("code",[a._v("awk")]),a._v(" 中，模式可以是：")]),a._v(" "),t("ul",[t("li",[t("strong",[a._v("空模式")]),a._v("（匹配所有行）")]),a._v(" "),t("li",[t("strong",[a._v("正则表达式")]),a._v("（匹配特定文本）")]),a._v(" "),t("li",[t("strong",[a._v("关系表达式")]),a._v("（比较字段或变量）")]),a._v(" "),t("li",[t("strong",[a._v("范围模式")]),a._v("（匹配特定范围的行）")]),a._v(" "),t("li",[t("strong",[a._v("BEGIN 和 END")]),a._v("（处理开始和结束逻辑）")]),a._v(" "),t("li",[t("strong",[a._v("组合模式")]),a._v("（逻辑运算符 "),t("code",[a._v("&&")]),a._v(", "),t("code",[a._v("||")]),a._v(", "),t("code",[a._v("!")]),a._v(" 组合多个模式）")])]),a._v(" "),t("p",[t("code",[a._v("awk")]),a._v(" 的模式提供了强大的行匹配功能，可以结合正则表达式、条件表达式、范围模式、逻辑运算符等高效地处理文本数据。")]),a._v(" "),t("h3",{attrs:{id:"空模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#空模式"}},[a._v("#")]),a._v(" 空模式")]),a._v(" "),t("p",[a._v("如果 "),t("code",[a._v("awk")]),a._v(" 只提供了 "),t("code",[a._v("{动作}")]),a._v(" 而没有指定模式，则 "),t("code",[a._v("awk")]),a._v(" 会默认匹配所有行。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{print}'")]),a._v(" data.txt  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 打印所有行，相当于 `cat data.txt`")]),a._v("\n")])])]),t("h3",{attrs:{id:"正则表达式模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#正则表达式模式"}},[a._v("#")]),a._v(" 正则表达式模式")]),a._v(" "),t("p",[t("code",[a._v("awk")]),a._v(" 可以使用 "),t("code",[a._v("/正则表达式/")]),a._v(" 作为匹配模式，匹配含有该模式的行。")]),a._v(" "),t("p",[a._v("使用 "),t("code",[a._v("~")]),a._v("（匹配）或 "),t("code",[a._v("!~")]),a._v("（不匹配）来检测字段是否符合正则表达式。")]),a._v(" "),t("p",[a._v("例如，匹配包含 "),t("code",[a._v("apple")]),a._v(" 的行。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'/apple/'")]),a._v(" data.txt\n")])])]),t("p",[a._v("例如，匹配第一列包含 "),t("code",[a._v("10")]),a._v(" 的行。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'$1 ~ /10/'")]),a._v(" data.txt\n")])])]),t("p",[a._v("例如，排除匹配 "),t("code",[a._v("apple")]),a._v(" 的行。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'!/apple/'")]),a._v(" data.txt\n")])])]),t("h3",{attrs:{id:"关系表达式模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#关系表达式模式"}},[a._v("#")]),a._v(" 关系表达式模式")]),a._v(" "),t("p",[a._v("关系表达式可以用于比较字段的值，如 "),t("code",[a._v("$1 > 10")]),a._v("，"),t("code",[a._v('$2 == "banana"')]),a._v(" 等。")]),a._v(" "),t("p",[a._v("例如，第一列大于 "),t("code",[a._v("20")]),a._v(" 的行。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'$1 > 20'")]),a._v(" data.txt\n")])])]),t("p",[a._v("例如，第三列等于 "),t("code",[a._v("banana")]),a._v(" 的行。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'$3 == \"banana\"'")]),a._v(" data.txt\n")])])]),t("h3",{attrs:{id:"范围模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#范围模式"}},[a._v("#")]),a._v(" 范围模式")]),a._v(" "),t("p",[t("code",[a._v("awk")]),a._v(" 允许使用 "),t("code",[a._v("模式1, 模式2")]),a._v(" 指定匹配的"),t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Ranges.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("范围"),t("OutboundLink")],1),a._v("（从匹配 "),t("code",[a._v("模式1")]),a._v(" 的行开始，到匹配 "),t("code",[a._v("模式2")]),a._v(" 的行结束），适用于提取数据的某个连续区域。")]),a._v(" "),t("p",[a._v("例如，匹配从 "),t("code",[a._v("banana")]),a._v(" 开始到 "),t("code",[a._v("cherry")]),a._v(" 结束的行。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'/banana/, /cherry/'")]),a._v(" data.txt\n")])])]),t("ul",[t("li",[a._v("第一次匹配 "),t("code",[a._v("/banana/")]),a._v("，开始输出。")]),a._v(" "),t("li",[a._v("直到匹配 "),t("code",[a._v("/cherry/")]),a._v(" 结束。")])]),a._v(" "),t("h3",{attrs:{id:"begin-和-end-模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#begin-和-end-模式"}},[a._v("#")]),a._v(" BEGIN 和 END 模式")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("BEGIN")]),a._v("：在 "),t("code",[a._v("awk")]),a._v(" 处理文件的第一行之前运行（可用于打印表头、初始化变量等）。")]),a._v(" "),t("li",[t("code",[a._v("END")]),a._v("：在 "),t("code",[a._v("awk")]),a._v(" 处理完所有行之后运行（可用于打印统计信息等）。")])]),a._v(" "),t("p",[a._v("例如，在处理前后打印消息。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'BEGIN {print "Processing Start"} {print} END {print "Processing End"}\'')]),a._v(" data.txt\n")])])]),t("p",[a._v("例如，统计文件的行数。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'END {print \"Total lines: \" NR}'")]),a._v(" data.txt\n")])])]),t("h3",{attrs:{id:"组合模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#组合模式"}},[a._v("#")]),a._v(" 组合模式")]),a._v(" "),t("ul",[t("li",[t("code",[a._v("&&")]),a._v("（逻辑 AND）：两个条件同时满足")]),a._v(" "),t("li",[t("code",[a._v("||")]),a._v("（逻辑 OR）：任意一个条件满足")]),a._v(" "),t("li",[t("code",[a._v("!")]),a._v("（逻辑 NOT）：取反")])]),a._v(" "),t("p",[a._v("例如，第一列大于 "),t("code",[a._v("10")]),a._v(" 且第二列小于 "),t("code",[a._v("50")]),a._v("。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'$1 > 10 && $2 < 50'")]),a._v(" data.txt\n")])])]),t("p",[a._v("例如，第一列等于 "),t("code",[a._v("10")]),a._v(" 或者第三列等于 "),t("code",[a._v("banana")]),a._v("。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'$1 == 10 || $3 == \"banana\"'")]),a._v(" data.txt\n")])])]),t("p",[a._v("例如，排除包含 "),t("code",[a._v("apple")]),a._v(" 的行。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'!/apple/'")]),a._v(" data.txt\n")])])]),t("h2",{attrs:{id:"四、动作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、动作"}},[a._v("#")]),a._v(" 四、动作")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Action-Overview.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Actions"),t("OutboundLink")],1),a._v(" 是对匹配模式的行所执行的操作。"),t("code",[a._v("awk")]),a._v(" 遇到匹配行时会执行指定的 "),t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Action-Overview.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Actions"),t("OutboundLink")],1),a._v("，例如"),t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Print.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("打印"),t("OutboundLink")],1),a._v("、修改、计算等。"),t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Action-Overview.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Actions"),t("OutboundLink")],1),a._v(" 通常写在 "),t("code",[a._v("{}")]),a._v(" 中，并且可以包含多条命令。")]),a._v(" "),t("p",[t("code",[a._v("awk")]),a._v(" 的基本结构："),t("code",[a._v("pattern { action }")])]),a._v(" "),t("ul",[t("li",[t("code",[a._v("pattern")]),a._v("：指定模式，用于匹配行。")]),a._v(" "),t("li",[t("code",[a._v("{ action }")]),a._v("：指定动作，定义对匹配行的操作。")])]),a._v(" "),t("p",[a._v("如果没有指定 "),t("code",[a._v("pattern")]),a._v("，默认匹配所有行。")]),a._v(" "),t("p",[a._v("如果没有指定 "),t("code",[a._v("action")]),a._v("，默认执行打印操作（即 "),t("code",[a._v("print $0")]),a._v("）。")]),a._v(" "),t("h3",{attrs:{id:"打印"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#打印"}},[a._v("#")]),a._v(" 打印")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Print.html",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("print")]),t("OutboundLink")],1),a._v(" 用于将指定的内容输出到标准输出或文件。"),t("code",[a._v("print")]),a._v(" 语句非常灵活，可以输出文本字符串、变量、字段和表达式的值。")]),a._v(" "),t("p",[a._v("基本格式如下：")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("print item1, item2, ..., itemN\n")])])]),t("ul",[t("li",[t("strong",[a._v("item")]),a._v("：要输出的内容，可以是字符串、字段值、变量、表达式等。")]),a._v(" "),t("li",[a._v("如果多个项目之间用逗号分隔，"),t("code",[a._v("awk")]),a._v(" 会默认用 "),t("strong",[a._v("输出字段分隔符")]),a._v("（"),t("code",[a._v("OFS")]),a._v("，默认为空格）将它们连接起来。")]),a._v(" "),t("li",[a._v("如果 "),t("code",[a._v("print")]),a._v(" 语句没有指定任何内容，默认会打印当前行的全部内容。")])]),a._v(" "),t("p",[a._v("例如，打印文件中的所有行。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{print}'")]),a._v(" file.txt\n")])])]),t("p",[a._v("例如，打印特定字段。打印文件中的第 "),t("code",[a._v("1")]),a._v(" 列和第 "),t("code",[a._v("3")]),a._v(" 列。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{print $1, $3}'")]),a._v(" file.txt\n")])])]),t("p",[a._v("例如，统计文件中的行数。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'END {print NR}'")]),a._v(" file.txt\n")])])]),t("p",[a._v("例如，简单数值计算。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{sum += $2} END {print sum}'")]),a._v(" file.txt\n")])])]),t("h3",{attrs:{id:"条件语句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#条件语句"}},[a._v("#")]),a._v(" 条件语句")]),a._v(" "),t("p",[a._v("可以使用 "),t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/If-Statement.html",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("if-else")]),t("OutboundLink")],1),a._v(" 条件语句来控制逻辑。")]),a._v(" "),t("p",[a._v("例如，根据条件打印特定字段。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{if ($1 > 20) print $1, $3; else print $1, $2}'")]),a._v(" data.txt\n")])])]),t("h3",{attrs:{id:"循环语句"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#循环语句"}},[a._v("#")]),a._v(" 循环语句")]),a._v(" "),t("p",[t("code",[a._v("awk")]),a._v(" 支持 "),t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/For-Statement.html",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("for")]),t("OutboundLink")],1),a._v(" 和 "),t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/While-Statement.html",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("while")]),t("OutboundLink")],1),a._v(" 循环，用于重复执行特定操作。")]),a._v(" "),t("p",[a._v("需注意，是每一行开启一次循环判断，循环的是该行的所有字段。")]),a._v(" "),t("ul",[t("li",[t("p",[t("strong",[t("code",[a._v("for")]),a._v(" 循环")])]),a._v(" "),t("p",[a._v("例如，打印每个字段。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{for (i = 1; i <= NF; i++) print $i}'")]),a._v(" data.txt\n")])])])]),a._v(" "),t("li",[t("p",[t("strong",[t("code",[a._v("while")]),a._v(" 循环")])]),a._v(" "),t("p",[a._v("例如，打印字段直到值为 "),t("code",[a._v("40")]),a._v("。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{i = 1; while ($i != 40 && i <= NF) {print $i; i++}}'")]),a._v(" data.txt\n")])])])])]),a._v(" "),t("h3",{attrs:{id:"修改字段"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改字段"}},[a._v("#")]),a._v(" 修改字段")]),a._v(" "),t("p",[t("code",[a._v("awk")]),a._v(" 可以直接修改字段的值。")]),a._v(" "),t("p",[a._v("例如，将第二列的值加 "),t("code",[a._v("10")]),a._v(" 并打印。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{$2 = $2 + 10; print}'")]),a._v(" data.txt\n")])])]),t("h3",{attrs:{id:"内置变量操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#内置变量操作"}},[a._v("#")]),a._v(" 内置变量操作")]),a._v(" "),t("p",[t("code",[a._v("awk")]),a._v(" 提供了一些内置变量，可以在 "),t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Action-Overview.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("Actions"),t("OutboundLink")],1),a._v(" 中使用：")]),a._v(" "),t("table",[t("thead",[t("tr",[t("th",[a._v("变量名")]),a._v(" "),t("th",[a._v("含义")])])]),a._v(" "),t("tbody",[t("tr",[t("td",[t("code",[a._v("$0")])]),a._v(" "),t("td",[a._v("当前行的全部内容")])]),a._v(" "),t("tr",[t("td",[t("code",[a._v("$1, $2")])]),a._v(" "),t("td",[a._v("当前行的第 1 列、第 2 列（字段）")])]),a._v(" "),t("tr",[t("td",[t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Auto_002dset.html#index-NF-variable-1",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("NF")]),t("OutboundLink")],1)]),a._v(" "),t("td",[a._v("当前行的字段数")])]),a._v(" "),t("tr",[t("td",[t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Auto_002dset.html#index-NR-variable-1",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("NR")]),t("OutboundLink")],1)]),a._v(" "),t("td",[a._v("当前行号（从 1 开始）")])]),a._v(" "),t("tr",[t("td",[t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Auto_002dset.html#index-FNR-variable-1",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("FNR")]),t("OutboundLink")],1)]),a._v(" "),t("td",[a._v("当前文件的行号")])]),a._v(" "),t("tr",[t("td",[t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/User_002dmodified.html#index-field-separator-1",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("FS")]),t("OutboundLink")],1)]),a._v(" "),t("td",[a._v("输入字段分隔符（默认是空白）")])]),a._v(" "),t("tr",[t("td",[t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/User_002dmodified.html#index-field-separator-2",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("OFS")]),t("OutboundLink")],1)]),a._v(" "),t("td",[a._v("输出字段分隔符（默认是空白）")])]),a._v(" "),t("tr",[t("td",[t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/User_002dmodified.html#index-record-separators-1",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("RS")]),t("OutboundLink")],1)]),a._v(" "),t("td",[a._v("输入记录分隔符（默认是换行符）")])]),a._v(" "),t("tr",[t("td",[t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/User_002dmodified.html#index-ORS-variable-1",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("ORS")]),t("OutboundLink")],1)]),a._v(" "),t("td",[a._v("输出记录分隔符（默认是换行符）")])])])]),a._v(" "),t("p",[a._v("例如，打印当前行号。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{print NR, $0}'")]),a._v(" data.txt\n")])])]),t("p",[a._v("例如，使用自定义分隔符。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'BEGIN {FS=","; OFS="|"} {print $1, $2}\'')]),a._v(" data.csv\n")])])]),t("h3",{attrs:{id:"数学运算"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数学运算"}},[a._v("#")]),a._v(" 数学运算")]),a._v(" "),t("p",[t("code",[a._v("awk")]),a._v(" 支持基本的数学运算："),t("code",[a._v("+")]),a._v(", "),t("code",[a._v("-")]),a._v(", "),t("code",[a._v("*")]),a._v(", "),t("code",[a._v("/")]),a._v(", "),t("code",[a._v("%")]),a._v("。")]),a._v(" "),t("p",[a._v("例如，计算每行的两列之和。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{sum = $1 + $2; print $1, $2, sum}'")]),a._v(" data.txt\n")])])]),t("h3",{attrs:{id:"数组操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#数组操作"}},[a._v("#")]),a._v(" 数组操作")]),a._v(" "),t("p",[t("code",[a._v("awk")]),a._v(" 支持关联数组（键值对）。")]),a._v(" "),t("p",[a._v("例如，统计每个单词出现的次数。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{for (i = 1; i <= NF; i++) count[$i]++} END {for (word in count) print word, count[word]}'")]),a._v(" data.txt\n")])])]),t("h3",{attrs:{id:"自定义函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#自定义函数"}},[a._v("#")]),a._v(" 自定义函数")]),a._v(" "),t("p",[a._v("可以在 "),t("code",[a._v("awk")]),a._v(" 中"),t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/User_002ddefined.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("定义函数"),t("OutboundLink")],1),a._v("来复用代码。")]),a._v(" "),t("p",[a._v("例如，定义一个函数计算平方。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'function square(x) {return x * x} {print $1, square($2)}'")]),a._v(" data.txt\n")])])]),t("h2",{attrs:{id:"五、环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#五、环境变量"}},[a._v("#")]),a._v(" 五、环境变量")]),a._v(" "),t("p",[a._v("在 "),t("code",[a._v("awk")]),a._v(" 中，环境变量是指可以从操作系统中获取的变量，或者在运行 "),t("code",[a._v("awk")]),a._v(" 脚本时通过命令行传递的变量。这些变量可以用于动态地控制 "),t("code",[a._v("awk")]),a._v(" 的行为，例如输入文件名、分隔符、过滤条件等。")]),a._v(" "),t("h3",{attrs:{id:"environ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#environ"}},[a._v("#")]),a._v(" ENVIRON")]),a._v(" "),t("p",[t("code",[a._v("ENVIRON")]),a._v(" 是一个关联数组，"),t("code",[a._v('ENVIRON["VAR_NAME"]')]),a._v(" 的值对应于操作系统中的环境变量 "),t("code",[a._v("VAR_NAME")]),a._v("。")]),a._v(" "),t("p",[a._v("虽然 "),t("code",[a._v("ENVIRON")]),a._v(" 数组可以访问环境变量，但不能直接通过 "),t("code",[a._v("ENVIRON")]),a._v(" 修改系统的环境变量。即使修改了 "),t("code",[a._v("ENVIRON")]),a._v(" 的值，也不会影响系统环境变量。")]),a._v(" "),t("p",[a._v("例如，打印所有环境变量。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'BEGIN {for (var in ENVIRON) print var, ENVIRON[var]}'")]),a._v("\n")])])]),t("p",[a._v("例如，访问特定环境变量。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'BEGIN {print "HOME:", ENVIRON["HOME"]; print "PATH:", ENVIRON["PATH"]}\'')]),a._v("\n")])])]),t("h3",{attrs:{id:"命令行传递"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#命令行传递"}},[a._v("#")]),a._v(" 命令行传递")]),a._v(" "),t("p",[a._v("可以通过"),t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Options.html#index-_002dv-option",target:"_blank",rel:"noopener noreferrer"}},[a._v("命令行"),t("OutboundLink")],1),a._v("将自定义变量传递给 "),t("code",[a._v("awk")]),a._v("，这些变量可以在 "),t("code",[a._v("awk")]),a._v(" 脚本中直接使用。")]),a._v(" "),t("p",[a._v("例如，传递变量并使用。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("threshold")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("50")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{if ($1 > threshold) print $1}'")]),a._v(" data.txt\n")])])]),t("p",[a._v("例如，传递多个变量。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("min")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("30")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("max")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("70")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{if ($1 >= min && $1 <= max) print $1}'")]),a._v(" data.txt\n")])])]),t("h2",{attrs:{id:"六、正则表达式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#六、正则表达式"}},[a._v("#")]),a._v(" 六、正则表达式")]),a._v(" "),t("h3",{attrs:{id:"括号表达式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#括号表达式"}},[a._v("#")]),a._v(" 括号表达式")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Bracket-Expressions.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("括号表达式"),t("OutboundLink")],1),a._v("匹配在开始和结束方括号之间列出的任何字符。")]),a._v(" "),t("p",[a._v("例如，通过 "),t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/String-Functions.html#index-split_0028_0029-function",target:"_blank",rel:"noopener noreferrer"}},[t("code",[a._v("split")]),t("OutboundLink")],1),a._v(" 按指定分隔符，把一行字符串分割成多个字段。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("123")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{ split($0, arr, /[2]+/); for (i=1; i<=length(arr); i++) print arr[i] }'")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("echo")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("123")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{ n=split($0, arr, /[2]+/); for(i=1; i<=n; i++) print arr[i] }'")]),a._v("\n")])])]),t("p",[t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/Bracket-Expressions.html#table_002dchar_002dclasses",target:"_blank",rel:"noopener noreferrer"}},[a._v("字符类"),t("OutboundLink")],1),a._v("由表示类的关键字 "),t("code",[a._v("[:")]),a._v(" 和 "),t("code",[a._v(":]")]),a._v(" 组成。")]),a._v(" "),t("p",[a._v("例如，空格字符作为分隔符，把一行字符串分割成多个字段（"),t("code",[a._v("for...in")]),a._v(" 遍历数组时，元素的顺序是不确定的，通常按哈希表顺序遍历）。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<<-")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("EOF"),t("span",{pre:!0,attrs:{class:"token bash punctuation"}},[a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{ split($0, arr, /[[:space:]]+/); for (i in arr) print arr[i] }'")])]),a._v("\napple  banana    cherry\ndog    elephant   fox\nEOF")]),a._v("\n")])])]),t("h3",{attrs:{id:"扩展正则"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#扩展正则"}},[a._v("#")]),a._v(" 扩展正则")]),a._v(" "),t("p",[a._v("处理正则表达式的 GNU 软件提供了许多额外的正则表达式"),t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/GNU-Regexp-Operators.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("运算符"),t("OutboundLink")],1),a._v("。")]),a._v(" "),t("p",[a._v("在 "),t("code",[a._v("awk")]),a._v(" 的正则表达式中，"),t("code",[a._v("[[:space:]]+")]),a._v(" 和 "),t("code",[a._v("\\s+")]),a._v(" 在大多数环境下作用相同，但 "),t("code",[a._v("\\s+")]),a._v(" 需要 "),t("code",[a._v("awk")]),a._v(" 支持"),t("a",{attrs:{href:"https://www.gnu.org/software/gawk/manual/html_node/GNU-Regexp-Operators.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("扩展正则表达式"),t("OutboundLink")],1),a._v("（ERE），比如使用 "),t("code",[a._v("gawk")]),a._v("：")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'BEGIN { if ("a b  c" ~ /\\s+/) print "match" }\'')]),a._v("\n")])])]),t("p",[a._v("但 "),t("code",[a._v("\\s+")]),a._v(" 可能在某些 "),t("code",[a._v("awk")]),a._v(" 版本（如 POSIX "),t("code",[a._v("awk")]),a._v("）中不被识别，因此 "),t("code",[a._v("[[:space:]]+")]),a._v(" 更通用。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('\'BEGIN { if ("a b  c" ~ /[[:space:]]+/) print "match" }\'')]),a._v("\n")])])]),t("h2",{attrs:{id:"七、示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#七、示例"}},[a._v("#")]),a._v(" 七、示例")]),a._v(" "),t("h3",{attrs:{id:"查看文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看文件"}},[a._v("#")]),a._v(" 查看文件")]),a._v(" "),t("p",[a._v("查看文件的指定行数范围。")]),a._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'NR >= 10 && NR <= 50 { print NR, $0 }'")]),a._v(" data.txt\n")])])]),t("h2",{attrs:{id:"reference"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#reference"}},[a._v("#")]),a._v(" Reference")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://coolshell.cn/articles/9070.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("AWK 简明教程 - 酷壳"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=r.exports}}]);